{"version":2,"kind":"Notebook","sha256":"8dd017447f46aee8a97f6cae923e6955b50fb6643f408e0ad51a0dab8b149a95","slug":"notebooks.openchallangenotebook-team-5-challenge-3-timeserie","location":"/notebooks/OpenChallangeNotebook-TEAM-5_CHALLENGE-3_Timeseries-Interpolation_UPDATED.ipynb","dependencies":[],"frontmatter":{"title":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","content_includes_title":true,"kernelspec":{"name":"conda-env-users-science-hub-course-updated-py","display_name":"users-science-hub-course-updated","language":"python"},"github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","subject":"Notebook examples","numbering":{"title":{"offset":1}},"source_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/blob/main/notebooks/OpenChallangeNotebook-TEAM-5_CHALLENGE-3_Timeseries-Interpolation_UPDATED.ipynb","edit_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/edit/main/notebooks/OpenChallangeNotebook-TEAM-5_CHALLENGE-3_Timeseries-Interpolation_UPDATED.ipynb","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","exports":[{"format":"ipynb","filename":"OpenChallangeNotebook-TEAM-5_CHALLENGE-3_Timeseries-Interpolation_UPDATED.ipynb","url":"/eodashboard-notebooks/build/OpenChallangeNoteboo-297fb97334ef7ad9cbe0889941c658e8.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","alt":"Sept-2025-Venice-Edinburgh-Leeds.jpg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uy58Tca19W","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...KKAP/2Q==\n"}],"key":"zu03LsJriL"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"div","class":"alert alert-info","children":[{"type":"text","value":"This concise notebook demonstrates guidelines for submission of your projects developed under the ","key":"MRdhypMJGM"},{"type":"strong","children":[{"type":"text","value":"Earth System Science Open Challenge!","key":"ljQoScrfhk"}],"key":"IyyhaqnBLj"},{"type":"break","key":"s7PGlTJzcy"},{"type":"text","value":" Please use this notebook as a template for delivering your workflow with the code you used to produce the results! ","key":"oHRw0iyUrC"},{"type":"break","key":"YkRkj6uESp"},{"type":"text","value":"For more information, refer to Open Challenge website: ","key":"C4A8BQg9rr"},{"type":"link","url":"https://eo4society.esa.int/event/sciencehubchallengefeb2024/","children":[{"type":"text","value":"https://​eo4society​.esa​.int​/event​/sciencehubchallengefeb2024/","key":"i4VoFNKGgX"}],"urlSource":"https://eo4society.esa.int/event/sciencehubchallengefeb2024/","key":"Za5vCtTosm"},{"type":"break","key":"l8NksVEnqb"}],"key":"RfMxH8mMAy"}],"visibility":"show","key":"p9K4MGrQuM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DnPQ5HaD8l"}],"identifier":"earth-system-science-hub-challenge-3-time-series-interpolation-techniques-for-remote-sensing-fran-denise-mae","label":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","html_id":"earth-system-science-hub-challenge-3-time-series-interpolation-techniques-for-remote-sensing-fran-denise-mae","implicit":true,"key":"ubjuUuoCOJ"},{"type":"thematicBreak","key":"oc6ddsgw53"}],"key":"inKtM1q7Vm"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section1","label":"section1","url":"","children":[],"urlSource":"","key":"xpCntfa4QX"}],"key":"BnCr4pS8Sh"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"1. Title","key":"GbQYdk5H9j"}],"key":"z3wlhSqN1r"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ytUg8Q09Pw"}],"identifier":"id-1-title","label":"1. Title ","html_id":"id-1-title","implicit":true,"key":"cW8lbvLI1S"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Author(s):","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YmNDD8AZUK"}],"key":"ErKzv9m6yD"},{"type":"text","value":"  Fran, Denise, Mae ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rXASgi66DR"},{"type":"break","key":"hO2Ir71xKC"},{"type":"text","value":"\n","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ETT985sg15"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Group name:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"e2JYiQ9Elh"}],"key":"xNTtgcWMxT"},{"type":"text","value":" “Team 5” ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GsU7RgQn5I"},{"type":"break","key":"aQomH8WuHL"},{"type":"text","value":"\n","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"iyN7Eq2fuc"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Challenge:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HSoFmIaoSv"}],"key":"pJ7NquK5ML"},{"type":"text","value":" Challenge 3: Time series interpolation techniques for remote sensing. From: ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kxSoz8gNbV"},{"type":"link","url":"https://eo4society.esa.int/wp-content/uploads/2024/02/Earth-System-Science-Hub-Challenges-February-2024-PREVIEW.pdf","children":[{"type":"text","value":"link to challenges","key":"MnSj34VbVO"}],"urlSource":"https://eo4society.esa.int/wp-content/uploads/2024/02/Earth-System-Science-Hub-Challenges-February-2024-PREVIEW.pdf","key":"PsE0t5HAGf"},{"type":"text","value":" ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Mzz6XnodsR"},{"type":"break","key":"VvqCJ4gA1L"}],"key":"hPUTTntNcp"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Submission date:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"EwAjgrGd0A"}],"key":"c1fcuiMuf4"},{"type":"text","value":" 06 Oct 2025 ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DVEIi2apIU"},{"type":"break","key":"nNR0de2Zxz"},{"type":"text","value":"\n","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BkMDLPRK57"},{"type":"break","key":"yerqeLdmDt"}],"key":"AYrNkmXz0t"}],"visibility":"show","key":"qEXzdc4Mf0"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section2","label":"section2","url":"","children":[],"urlSource":"","key":"wQX81IYcAB"}],"key":"u84gAFinsi"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"2. Description","key":"wNF6498Wcn"}],"key":"ji2pfTc5c7"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wxwc9sgEwW"}],"identifier":"id-2-description","label":"2. Description ","html_id":"id-2-description","implicit":true,"key":"WqiF7IotSS"},{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scientific problem:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y3sD77hp3W"}],"identifier":"scientific-problem","label":"Scientific problem:","html_id":"scientific-problem","implicit":true,"key":"LI48SX6COM"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Vegetation EO time series are crucial for monitoring ecosystem health, agricultural productivity and climate impacts.\nNDVI (Normalised Difference Vegetation Index) time series often suffer from residual cloud presence, even after data pre-processing.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"J0j0WJZL0R"}],"key":"JjpMdzcwYn"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Depending on land cover type, NDVI time series reconstructions may perform differently due to varying periodicity, amplitude or steepness of transitions (Julien and Sobrino, 2019).","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"ShpQEdg7pr"}],"key":"hxHLePIDMK"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Accurate interpolation is essential to ensure reliable analysis of vegetation dynamics !","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ICKhlQJmhj"}],"key":"zhsdeHvBs6"},{"type":"heading","depth":2,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Objective:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"HUaH53MH1R"}],"identifier":"objective","label":"Objective:","html_id":"objective","implicit":true,"key":"yFpfSKVnfD"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Design and implement a reproducible framework to compare multiple time series interpolation techniques on vegetation EO datasets with artificially introduced temporal gaps.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"mqvDcpmG2C"}],"key":"yh8eFugoCa"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Methods:","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"xVt35BZ0Cj"}],"identifier":"methods","label":"Methods:","html_id":"methods","implicit":true,"key":"yMhxk8Mw5f"},{"type":"heading","depth":3,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Location selection","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"c5qCcgp0CW"}],"identifier":"location-selection","label":"Location selection","html_id":"location-selection","implicit":true,"key":"riyPh6ocuY"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"We select 5 points:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Y1eLxZ81oN"}],"key":"RdQ9H4NhSp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":24,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"one in Amazon (Low seasonality, High precipitation, 123 billion tonnes of carbon (NOAA, 2021))","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"Fm18ektDQ7"}],"key":"wtG6DgOCcT"}],"key":"NAcWsQKGCj"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"one in Caatinga (High Seasonality, High precipitation, Nearly 100,000 km2 and large flux of carbon, water, and other compounds with the atmosphere with seasons)","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"jRQuRiVShx"}],"key":"pklIXQtGkg"}],"key":"N8A9aMEkKl"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"one in Elmstein, Germany (High seasonality, Medium precipitation)","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"Mzz9cuoA3I"}],"key":"K3WTNZ7AoL"}],"key":"V8N7vQ1Oqf"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"one in Muara, Indonesia (High Seasonality - monsoonal pattern, High precipitation)","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"hqUT8MWw9u"}],"key":"QMYxNfQKtH"}],"key":"qJuhmtwflE"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"one in the Canadian Rockies (High seasonality, medium precipitation, boreal)","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"E5PC5AVcHZ"}],"key":"u6FshnIIVf"}],"key":"HA77fzuL9G"}],"key":"e5YBlsKG3T"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Then:","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"bx8AmwoR70"}],"key":"BBVQzYdjKn"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":37,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Extract timeseries over each point for the period 2017-2022","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"mH62hL7v8k"}],"key":"J9xCblGWXf"}],"key":"ut7JEtYCoQ"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"introduce artifical gaps","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"JHTmH78ysB"}],"key":"XJEpA724FG"}],"key":"gMDWEOAUpw"},{"type":"listItem","spread":true,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Interpolate using various techniques","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"f2J5Ubkq2E"}],"key":"b4ftopOjne"}],"key":"m60JJbNRrC"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"measure metrics (R2, RMSE, processing time)","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"KD1oM9O0JQ"}],"key":"y3uIqygHJI"}],"key":"S0J8i2faUP"}],"key":"KplTQmYaXV"},{"type":"heading","depth":3,"position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Data used:","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"sZTwp8XF24"}],"identifier":"data-used","label":"Data used:","html_id":"data-used","implicit":true,"key":"rXVkpt6iNK"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"ndvi timeseries from DeepESDL Earth System Datacube (ESDC) v.3.0.1","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"FxwTMX2Szv"}],"key":"WxJon4t59B"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":44,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Temporal resolution: 8 days","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"H3U0G1JzZx"}],"key":"rxOFKdXPVP"}],"key":"BpFy1vMsQr"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"spatial resolution: 0.25° (~28 km)","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"wS5oDnjeng"}],"key":"J1osUAq7OG"}],"key":"Q1xjhETB6z"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Derived from MODIS Terra + Aqua BRDF corrected daily reflectance data","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"ZoFXetA741"}],"key":"MGlidkLrC1"}],"key":"Fga5HOfzhX"}],"key":"SEobZAbAbr"},{"type":"heading","depth":3,"position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Interpolation techniques tested:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"maohSOt3Sl"}],"identifier":"interpolation-techniques-tested","label":"Interpolation techniques tested:","html_id":"interpolation-techniques-tested","implicit":true,"key":"W6sBhhD51P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":51,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Linear interpolation: fit a line through the points.","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"OC3AeUv3ve"}],"key":"gjfqfi6rJj"}],"key":"lQkgmhOAry"},{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cubic Spline: uses piecewise cubic polynomials to create a smooth curve passing through a set of points.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"fRNwqGRPB7"}],"key":"wIupe3XI9b"}],"key":"kKpiMw6g5W"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gaussian Process Regression: Bayesian ML method that models data as a smooth curve with uncertainty. Smooth trend, seasonality noise accounted for using custom kernels.","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"Tg0G7GVLYf"}],"key":"i07UcvFTyH"}],"key":"TqusUWitoP"},{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Climatology Fill (seasonal): uses average values from previous 4 years to deduce pattern at missing time.","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"PhFTSjHgIV"}],"key":"rjieEOCVGN"}],"key":"qdlpwWaqMW"}],"key":"CH4jqZaefv"}],"visibility":"show","key":"IQNpj4QABU"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section3","label":"section3","url":"","children":[],"urlSource":"","key":"PbZMmEXYT0"}],"key":"joEZ3OHzrw"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"3. Table of Contents","key":"NbAYwapPCu"}],"key":"hK2qfK39mP"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"piKbv6dtnQ"}],"identifier":"id-3-table-of-contents","label":"3. Table of Contents ","html_id":"id-3-table-of-contents","implicit":true,"key":"oHpApug8gu"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Title","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C8iBxfqJJJ"}],"urlSource":"#section1","key":"P1VB5Kb6kU"}],"key":"TkweKQKxgv"}],"key":"PA2vyKiGdc"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section2","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Description","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"hUSy6t1rFX"}],"urlSource":"#section2","key":"FpukejYUqK"}],"key":"Qh4NxvEjnI"}],"key":"wbd0xWmbmh"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section3","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Table of Contents","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"o3vzasu9cY"}],"urlSource":"#section3","key":"rCNMn9p49U"}],"key":"ElpY4kAAdN"}],"key":"YdaAh7iVVn"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section4","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Mxw9LULsHp"}],"urlSource":"#section4","key":"bsNpEmyekJ"}],"key":"HKK7oO0ADy"}],"key":"pH0dVLr2E0"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section5","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Key Conclusions","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"f8L9re1qog"}],"urlSource":"#section5","key":"UC1zyre67U"}],"key":"w63dNSTuRM"}],"key":"EqoPKb1Rru"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section6","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Societal Context","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AttClNnPWN"}],"urlSource":"#section6","key":"oRw9RmQ8S2"}],"key":"v5RdSKj5BW"}],"key":"TgbPdpXaBc"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section7","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Import libraries","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"e7mPihgvph"}],"urlSource":"#section7","key":"yxFoJjWpZo"}],"key":"ZPn9HtZYDb"}],"key":"bRLKp7HYCm"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section8","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Access dataset","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"QVhFj16tH6"}],"urlSource":"#section8","key":"Mh7UnD30rk"}],"key":"AlEMmocd6H"}],"key":"H3aS5eb7la"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#section9","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Analysis cells","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"DpdaAgMfml"}],"urlSource":"#section9","key":"eH2HFDa1TT"}],"key":"ilZxRYScsb"}],"key":"r7Re5md8dz"}],"key":"x9oAjujtSB"}],"key":"su3FFeN0Hl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section4","label":"section4","url":"","children":[],"urlSource":"","key":"izGK0PJyMb"}],"key":"AjU0BTuxZM"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"4. References","key":"ppydECiewA"}],"key":"MTKTWPVi1F"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oezKjiUKMD"}],"identifier":"id-4-references","label":"4. References ","html_id":"id-4-references","implicit":true,"key":"tozmUzZGx4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Julien, Y. and Sobrino, J.A. (2019). Optimizing and comparing gap-filling techniques using simulated NDVI time series from remotely sensed global data. International Journal of Applied Earth Observation and Geoinformation, 76, pp.93-111.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KVs41Uva3i"}],"key":"n8r9g7rWbX"}],"key":"CpRnddgok7"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"de Oliveira, M.L.; dos Santos, C.A.C.; Santos, F.A.C.; de Oliveira, G.; Santos, C.A.G.; Bezerra, U.A.; de B. L. Cunha, J.E.; da Silva, R.M. (2023). Evaluation of Water and Carbon Estimation Models in the Caatinga Biome Based on Remote Sensing. Forests, 14, 828. ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"O5lU4SbzZa"},{"type":"cite","url":"https://doi.org/10.3390/f14040828","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Oliveira ","key":"N0FswDrnNw"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"MLnKgSFqWW"}],"key":"i1J0ih6lmG"},{"type":"text","value":" (2023)","key":"rihgg6sAOx"}],"kind":"narrative","label":"de_Oliveira_2023","identifier":"https://doi.org/10.3390/f14040828","enumerator":"1","key":"T13sadn3Du"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JSnXdMkAMF"}],"key":"IOQfMBRbzk"}],"key":"SEJLpvNbZC"}],"key":"DwCwRxr3iE"}],"key":"xF11lSZNRd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section5","label":"section5","url":"","children":[],"urlSource":"","key":"I5UOpcRfiL"}],"key":"vjl253Y5DJ"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"5. Key Conclusions","key":"RsPXxwAmi1"}],"key":"fNmWmnidIK"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OMnBezP9A0"}],"identifier":"id-5-key-conclusions","label":"5. Key Conclusions ","html_id":"id-5-key-conclusions","implicit":true,"key":"Msh6LJ5SwX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Best interpolation teechnique depends on land cover being observed + length of missing data gap.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"irvHwPXVq3"}],"key":"Ll6ulv8xlF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"short window →  better interpolation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"VPtaHT5UDB"}],"key":"hHvxQD9ICK"}],"key":"XhWZlItJSC"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"GPR processing time takes almost 2x as much","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PaugFgBPiB"}],"key":"PWnzxapHtm"}],"key":"gncLs0wja5"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Best interpolation technique for seasonal pattern:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"OI2HrWCrmi"}],"key":"TbBSoffd7T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"SHORT missing gap: linear, cubicSpline","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"f5t3GMb2uY"}],"key":"SllVNm1CRh"}],"key":"AfyBNCxkPK"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"LONG missing gap: Seasonal (but may be affected by climate change), GPR (but slightly more time-intensive)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"XK4GIZ4DzE"}],"key":"oxYwHpiPRG"}],"key":"dpYtslReSv"}],"key":"exI9Q2ZESs"}],"key":"pTfQwOwvEh"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Best interpolation technique for non-seasonal: linear","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oHZk94rgAR"}],"key":"xpJsEqRbvq"}],"key":"WtTjBOYbe9"}],"key":"gFIDig3KTH"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Note: when no data available over long periods, or when the missing data is at the end of the timeseries --> cubic spline overshoots!","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"L46Y7COgDN"}],"key":"GTdZ6puheN"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Disclaimer: Due to the coarse spatial resolution of this dataset (~28 km), certain land cover classes (e.g., cropland) could not be monitored in this case study. This framework however could be easily applied to ndvi timeseries acquired from other platforms (e.g. Sentinel-2) which would provide finer spatial resolution, allowing for field-scale monitoring.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"sdKaVcfFeY"}],"key":"PeRNBFJrNq"}],"key":"N6gAYk44uh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section6","label":"section6","url":"","children":[],"urlSource":"","key":"r0aTXuhZ9K"}],"key":"PKqlGqpTbe"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"6. Societal Context","key":"YCP9zgn5H1"}],"key":"XZVmMhRbJS"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XXJqoU0LlQ"}],"identifier":"id-6-societal-context","label":"6. Societal Context ","html_id":"id-6-societal-context","implicit":true,"key":"gzpaL4pCLh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This is important for society because reliable, gap-free vegetation timeseries are useful for...","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KPbPVe81Vi"}],"key":"GT7Uzx3xVH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"tracking carbon dynamics in forests & forest health","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"TQQZI6xMbh"}],"key":"valWysZXC1"}],"key":"RngQSEBQPP"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"tracking crop phenological stages and agricultural management","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Lwk5XrxuSp"}],"key":"GXuorMKTcS"}],"key":"AHoSOu8YUg"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"wider applicability outside of vegetation domain i.e. interpolating climatic data or data acquired by other sensors","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Ete4tsk91Z"}],"key":"zoWWEiBn1t"}],"key":"J4JJkTrUq9"}],"key":"FO54tjHd2V"}],"key":"WLP5z6Da0u"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"PART 2: SCIENTIFIC EXPLOITATION AND ANALYSIS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qBJ9SL3utU"}],"identifier":"part-2-scientific-exploitation-and-analysis","label":"PART 2: SCIENTIFIC EXPLOITATION AND ANALYSIS","html_id":"part-2-scientific-exploitation-and-analysis","implicit":true,"key":"nTEZKnDIky"},{"type":"thematicBreak","key":"SexeLl7BZE"}],"key":"fgnIX7h5F7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section7","label":"section7","url":"","children":[],"urlSource":"","key":"XMHRgeMcGb"}],"key":"ZujBQB3pYc"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"7. Import Libraries","key":"UA9jkbNZVH"}],"key":"WH8CCQGDlB"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uYgX6qSlGE"}],"identifier":"id-7-import-libraries","label":"7. Import Libraries ","html_id":"id-7-import-libraries","implicit":true,"key":"x4g3vKAw5w"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook runs with the python environment ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AiDZHt99GQ"},{"type":"inlineCode","value":"deepesdl-xcube-1.1.2","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iCHzrS7tSM"},{"type":"text","value":", please checkout the documentation for ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gX3xgtvLVa"},{"type":"link","url":"https://deepesdl.readthedocs.io/en/latest/guide/jupyterlab/#python-environment-selection-of-the-jupyter-kerne","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"help on changing the environment","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vN5bUSsAIP"}],"urlSource":"https://deepesdl.readthedocs.io/en/latest/guide/jupyterlab/#python-environment-selection-of-the-jupyter-kerne","key":"f5dyj9UbYj"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IvH1flODud"}],"key":"djFD4lNJJw"}],"key":"M515F4zseD"}],"key":"gfOklsec1r"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Here is all the imports needed:\nimport xcube\nimport matplotlib.pyplot as plt\nimport xarray as xr\nfrom xcube.core.store import new_data_store, get_data_store_params_schema\nfrom xcube_stac.utils import reproject_bbox\nimport pandas as pd \nimport numpy as np\nimport time\nfrom sklearn.gaussian_process import GaussianProcessRegressor\nfrom sklearn.metrics.pairwise import polynomial_kernel\nfrom sklearn.gaussian_process.kernels import ConstantKernel, RBF,ExpSineSquared, WhiteKernel\nfrom sklearn.metrics.pairwise import polynomial_kernel\nimport random\n\nfrom sklearn.metrics import r2_score, mean_absolute_error, root_mean_squared_error, mean_absolute_percentage_error\nimport matplotlib.dates as mdates\n\n# If one wants to try some more interpolation techniques....\nfrom scipy.interpolate import (\n    CubicHermiteSpline,\n    lagrange,\n    BarycentricInterpolator,\n    interp1d,\n    UnivariateSpline,\n    splrep,\n    splev,\n    Rbf,\n    CubicSpline,\n    BSpline,\n    PchipInterpolator,\n    NearestNDInterpolator\n)\n\n","visibility":"show","key":"G8FrQM67w4"},{"type":"output","id":"3RAdDVguBT-ptWtNJV80L","data":[],"visibility":"show","key":"W0KiAnhDYv"}],"visibility":"show","key":"k3uu8RFMgx"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section8","label":"section8","url":"","children":[],"urlSource":"","key":"afjVB8YWZt"}],"key":"UxWZJfevnt"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"8. Data sources","key":"Ep2DvepecB"}],"key":"vvu7fGeUEo"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DEP0kbv7z3"}],"identifier":"id-8-data-sources","label":"8. Data sources ","html_id":"id-8-data-sources","implicit":true,"key":"mM3kqWe1bK"},{"type":"break","key":"uFbAo0HvCf"},{"type":"table","position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Datacube name","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"M5kIRFSwQC"}],"key":"YDFcS0oZXr"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Variable name","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Of36Zr6Z2u"}],"key":"BqfZCtVQ0b"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Description","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"fiK5KKnyVu"}],"key":"pLZQCtYRV3"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Reference*","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"hL08aBS47Q"}],"key":"PRQI1Y5sUB"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Region","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ndEDbvUw8u"}],"key":"cifIxYSkWK"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Time range","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"SWRvRAU9OJ"}],"key":"sp4fMdQmWc"},{"type":"tableCell","header":true,"align":"center","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Resolution","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xOv4k1e3fn"}],"key":"K4R5prFr45"}],"key":"dID9AjkdiS"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"(ESDC) v3.0.1","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Hq7bWjlEIY"}],"key":"S2VeYaCgn0"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"ndvi","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BZimMMXPze"}],"key":"H6cr0nXw2m"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://deepesdl.readthedocs.io/en/latest/datasets/ESDC/#air_temperature_2m","children":[{"type":"text","value":"metadata description","key":"W9GxiAwt1L"}],"urlSource":"https://deepesdl.readthedocs.io/en/latest/datasets/ESDC/#air_temperature_2m","key":"l3pDsym6WA"}],"key":"UMPG0Sa88L"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"link","url":"https://www.earthdata.nasa.gov/data/catalog/lpcloud-mcd43c4-061","children":[{"type":"text","value":"link to source","key":"fc3WOiMc04"}],"urlSource":"https://www.earthdata.nasa.gov/data/catalog/lpcloud-mcd43c4-061","key":"mqFAiOQQtX"}],"key":"AIPEdvvZ8s"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"World","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Yx5Udl9xZ7"}],"key":"d5S4jbaE6G"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"8 days","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"md1hPZtjhT"}],"key":"GnNhQv42Tf"},{"type":"tableCell","align":"center","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"0.25° (~28 km)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dbeqdKRszI"}],"key":"mHjCf4iRMw"}],"key":"NWX2jJcDVI"}],"key":"TzQrANkZYP"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Here you can start with accessing the relevant data:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WP3BlTLruU"}],"key":"QsbSQPau6p"}],"visibility":"show","key":"Nv5UfXAr9F"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Access the data:\nstore = new_data_store(\"s3\", root=\"deep-esdl-public\")\nstore.list_data_ids()\n\n#Earth System Data Cube (ESDC) v3.0.1\n#-------------------------------------\ndata_store = new_data_store(\"s3\", root=\"deep-esdl-public\")\ndataset    = data_store.open_data( 'esdc-8d-0.25deg-256x128x128-3.0.1.zarr')\nds         = dataset[[\"ndvi\"]]\nds\n\n## SELECT OUR POINTS \n#-------------------------\nAMAZON = [-63.80931839570286, -2.1399049279461497]\nCAATINGA = [-40.091161552570036, -7.926450359938729]\nELMSTEIN = [7.918474, 49.377749] #Germany\nMUARA = [113.868742, -0.095807] #Indonesia\nROCKIES =[-123.747338,59.156882] # Canada\n\n\n\n# Visualise our data on a map:\nds.ndvi.isel(time=-1)[::10, ::10].plot(alpha=0.6, vmin=0, vmax=0.8)\nplt.scatter(AMAZON[0], AMAZON[1], label=\"AMAZON\",s=50,edgecolors='black',\n    linewidths=1,)\nplt.scatter(CAATINGA[0], CAATINGA[1], label=\"CAATINGA\",s=50,edgecolors='black',\n    linewidths=1,)\nplt.scatter(ELMSTEIN[0], ELMSTEIN[1], label=\"ELMSTEIN\", s=50, edgecolors='black',\n    linewidths=1, color=\"purple\")\nplt.scatter(MUARA[0], MUARA[1], label=\"MUARA\", color=\"pink\",s=50,edgecolors='black',\n    linewidths=1,)\nplt.scatter(ROCKIES[0], ROCKIES[1], label=\"ROCKIES\", color=\"red\",s=50,edgecolors='black',\n    linewidths=1,)\n\nplt.title(\"ndvi\")\nplt.legend()\n\nplt.show()\nplt.close()\n\n# Let's visualise two timeseries (2017-2022) for these points:\n#plt.figure()\n\nfig, axs = plt.subplots(5, figsize=(10,12))\n\nstart_date= pd.to_datetime(\"2017-01-01\")\nend_date= pd.to_datetime(\"2022-01-01\")\n\n\nstart_date = pd.to_datetime(start_date)\nend_date = pd.to_datetime(end_date)\n\n# Subset by time:\ntime_subsetA = ds.ndvi.sel(time=slice(start_date, end_date))\n\n\n\n# Create Amazon timeseries\nds1dA = time_subsetA.sel(lat=AMAZON[1], lon=AMAZON[0], method=\"nearest\")\n# Plot Amazon timeseries\nds1dA.plot(label=\"AMAZON\",color=\"tab:blue\",marker=\"o\",ax=axs[0])\naxs[0].set_title(\"AMAZON\")\n\n\n# Create Caatinga timeseries\nds1dCA = time_subsetA.sel(lat=CAATINGA[1], lon=CAATINGA[0],method=\"nearest\",)\n# Plot Caatinga timeseries\nds1dCA.plot(label= \"CAATINGA\", color = \"orange\",marker=\"o\",ax=axs[1])\naxs[1].set_title(\"CAATINGA\")\n\n\n\n# Create Caatinga timeseries\nds1dE = time_subsetA.sel(lat=ELMSTEIN[1], lon=ELMSTEIN[0],method=\"nearest\",)\n# Plot Caatinga timeseries\nds1dE.plot(label= \"ELMSTEIN\", color = \"purple\",marker=\"o\",ax=axs[2])\naxs[2].set_title(\"ELMSTEIN\")\n\n\n# Create Caatinga timeseries\nds1dM = time_subsetA.sel(lat=MUARA[1], lon=MUARA[0],method=\"nearest\",)\n# Plot Caatinga timeseries\nds1dM.plot(label= \"MUARA\", color = \"pink\", marker=\"o\",ax=axs[3])\naxs[3].set_title(\"MUARA\")\n\n\n# Create Caatinga timeseries\nds1dR = time_subsetA.sel(lat=ROCKIES[1], lon=ROCKIES[0],method=\"nearest\",)\n# Plot Caatinga timeseries\nds1dR.plot(label= \"ROCKIES\", color = \"red\", marker=\"o\",ax=axs[4])\naxs[4].set_title(\"ROCKIES\")\n\n\nfig.tight_layout()\nplt.show()\nplt.close()\n\n","visibility":"show","key":"ELF5c8FQQ4"},{"type":"output","id":"DtQsuJktjgG3H1v8sutZF","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c906187e1d530f252ca088d156ceecbe","path":"/eodashboard-notebooks/build/c906187e1d530f252ca088d156ceecbe.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8ef9c61eba61c1f078c4eb7887f17e1b","path":"/eodashboard-notebooks/build/8ef9c61eba61c1f078c4eb7887f17e1b.png"},"text/plain":{"content":"<Figure size 1000x1200 with 5 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Ji1ZCWuZoJ"}],"visibility":"show","key":"e3apUmSoRQ"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","identifier":"section9","label":"section9","url":"","children":[],"urlSource":"","key":"CoWpn2psYz"}],"key":"HvPXOrUxOl"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"9. Analysis cells","key":"cR4FnQrVgE"}],"key":"TdgdC5N03I"},{"type":"text","value":" ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"b38P0bGhHA"}],"identifier":"id-9-analysis-cells","label":"9. Analysis cells ","html_id":"id-9-analysis-cells","implicit":true,"key":"BXipreEbp1"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Please comment your code, describe the functions, remove dead and unreachable code.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QwcheZUyak"}],"key":"AXe2K4yVZf"}],"visibility":"show","key":"pLMM9hzS4w"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"\ndef generate_gaps(time_values, gap_length, unit=\"days\", n_gaps=2, seed=42, min_spacing=0):\n    \"\"\"\n    Generate gaps in a timeseries without overlaps and with minimum spacing.\n    \n    Parameters:\n    - time_values: list of datetime values\n    - gap_length: length of each gap\n    - unit: \"days\", \"weeks\", \"months\"\n    - n_gaps: number of gaps to generate\n    - seed: random seed\n    - min_spacing: minimum spacing between gaps (in same units as `unit`)\n    \n    Returns:\n    - gaps: list of (start, end) tuples\n    - actual_gap_length: length of each gap in days\n    \"\"\"\n    rng = random.Random(seed)\n    gaps = []\n\n    # Convert time_values to sorted pandas Series\n    time_series = pd.Series(pd.to_datetime(time_values)).sort_values().reset_index(drop=True)\n\n    # Convert min_spacing to DateOffset\n    if unit == \"weeks\":\n        spacing_offset = pd.DateOffset(weeks=min_spacing)\n        gap_offset = pd.DateOffset(weeks=gap_length)\n        actual_gap_length = gap_length * 7\n    elif unit == \"months\":\n        spacing_offset = pd.DateOffset(months=min_spacing)\n        gap_offset = pd.DateOffset(months=gap_length)\n        actual_gap_length = gap_length * 30  # approximate\n    else:  # days\n        spacing_offset = pd.DateOffset(days=min_spacing)\n        gap_offset = pd.DateOffset(days=gap_length)\n        actual_gap_length = gap_length\n\n    attempts = 0\n    max_attempts = n_gaps * 20  # safety to avoid infinite loops\n\n    while len(gaps) < n_gaps and attempts < max_attempts:\n        attempts += 1\n        random_start = rng.choice(time_series)\n        random_end = random_start + gap_offset\n\n        # Check for overlap with existing gaps + min_spacing\n        overlap = False\n        for s, e in gaps:\n            buffer_start = s - spacing_offset\n            buffer_end = e + spacing_offset\n            if (random_start <= buffer_end) and (random_end >= buffer_start):\n                overlap = True\n                break\n\n        if not overlap:\n            gaps.append((random_start, random_end))\n\n    return gaps, actual_gap_length\n\n\ndef subset_data_with_gaps(ds, gaps, data_name=\"DATASET\"):\n    \"\"\"\n    Apply gaps to a dataset and plot.\n\n    Parameters:\n    - ds: xarray dataset with time dimension\n    - gaps: list of (start, end) tuples\n    - data_name: string for labeling\n\n    Returns:\n    - train_set: dataset excluding gap periods\n    - test_set: dataset (gap periods)\n    \"\"\"\n    # Concatenate all gap periods into test_set\n    test_sets = [ds.sel(time=slice(start, end)) for start, end in gaps]\n    if test_sets:\n        test_set = xr.concat(test_sets, dim=\"time\").sortby(\"time\")\n    else:\n        test_set = ds.isel(time=[])\n\n    # Train set is everything else\n    train_set = ds.sel(time=~ds['time'].isin(test_set['time'].values))\n\n    # Compute duration of the first gap in days\n    if gaps:\n        first_gap_length = (gaps[0][1] - gaps[0][0]).days + 1  # +1 to include both start and end\n    else:\n        first_gap_length = 0\n\n    # Plot\n    plt.figure(figsize=(5, 4))\n    train_set.plot.scatter(x='time', y='ndvi', color='tab:blue', label=f'Train - {data_name}')\n    if len(test_set.time) > 0:\n        test_set.plot.scatter(x='time', y='ndvi', color='tab:green', label=f'Test (gap) - {data_name}')\n    plt.legend()\n    plt.ylim(0, 1)\n    plt.title(f\"{data_name} with gap length: {first_gap_length} days\")\n\n    return train_set, test_set\n\n\n# Choose a reference timeline (e.g., Amazon dataset)\nref_time = pd.to_datetime(ds1dA['time'].values)\n\n# Generate shared gaps once\ngaps, days = generate_gaps(ref_time, gap_length=6, unit=\"months\", n_gaps=4, seed=18, min_spacing=2)\n\n# Apply same gaps to all datasets\ntrain_setA, test_setA = subset_data_with_gaps(ds1dA, gaps, \"AMAZON\")\ntrain_setC, test_setC = subset_data_with_gaps(ds1dCA, gaps, \"CAATINGA\")\ntrain_setE, test_setE = subset_data_with_gaps(ds1dE, gaps, \"ELMSTEIN\")\ntrain_setM, test_setM = subset_data_with_gaps(ds1dM, gaps, \"MUARA\")\ntrain_setR, test_setR = subset_data_with_gaps(ds1dR, gaps, \"ROCKIES\")\n","visibility":"show","key":"iAJLu0RtCw"},{"type":"output","id":"7vsfLyU0Zxu6XJ_32iQLj","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ad8f57ca41d12693bed012438bc2062f","path":"/eodashboard-notebooks/build/ad8f57ca41d12693bed012438bc2062f.png"},"text/plain":{"content":"<Figure size 500x400 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c7b78142634694b151e5b1d22205ba0e","path":"/eodashboard-notebooks/build/c7b78142634694b151e5b1d22205ba0e.png"},"text/plain":{"content":"<Figure size 500x400 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f7a5cb0294fc2f6a4e142a72c2010d57","path":"/eodashboard-notebooks/build/f7a5cb0294fc2f6a4e142a72c2010d57.png"},"text/plain":{"content":"<Figure size 500x400 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c01aaa0c5ee94840c0c6d14681811277","path":"/eodashboard-notebooks/build/c01aaa0c5ee94840c0c6d14681811277.png"},"text/plain":{"content":"<Figure size 500x400 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d59529eff787be10220df84b05058b4d","path":"/eodashboard-notebooks/build/d59529eff787be10220df84b05058b4d.png"},"text/plain":{"content":"<Figure size 500x400 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ksM94mJFIW"}],"visibility":"show","key":"Y05kTTxOYG"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# We define a function to calculate processing time:\n\ndef exec_time(start, end):\n    \"\"\"\n    This function calculates process execution time\n    -----------------------------------------------\n    \n    input:\n    - start time: start time. call with time.time()\n    - end time: end of processing time. call time.time() again.\n\n    output:\n    - diff_time: time it took to run the process\n    \"\"\"\n    \n    diff_time = end - start\n    m, s = divmod(diff_time, 60)\n    h, m = divmod(m, 60)\n    s,m,h = int(round(s, 0)), int(round(m, 0)), int(round(h, 0))\n    print(\"Execution Time: \", diff_time )#+ \"{0:06d}:{1:06d}:{2:06d}\".format(h, m, s)\n\n    return diff_time\n    \n","visibility":"show","key":"kuQMIHSSPZ"},{"type":"output","id":"ZT3kbzR-fdv3mkdC9RJN6","data":[],"visibility":"show","key":"Co8nj556QR"}],"visibility":"show","key":"oZtHU9wEnJ"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Start time counter\nstart = time.time()\n\ndef interpolation(TYPE, location):\n    start = time.time()\n    \n    \"\"\"\n    A function that interpolates our timeseries data.\n    Input:\n    - TYPE: choose among \"linear\", \n    - location: pick our location\n\n    output:\n    - dfmetrics: a dataframe of accuracy metrics\n    \n    \"\"\"\n    if location == \"Amazon\":\n        train_set = train_setA\n        test_set = test_setA\n        \n    elif location == \"Caatinga\":\n        train_set = train_setC\n        test_set = test_setC\n            \n    elif location == \"Elmstein\":\n        train_set = train_setE\n        test_set = test_setE\n        \n        \n    elif location == \"Muara\":\n        train_set = train_setM\n        test_set = test_setM\n    \n    elif location == \"Rockies\":\n        train_set = train_setR\n        test_set = test_setR\n        \n    # numeric time for interpolation\n    train_time_num = (train_set.time.astype(\"int64\") // 10**6).astype(\"int64\").values\n    test_time_num = (test_set.time.astype(\"int64\") // 10**6).astype(\"int64\").values\n\n    # datetime for plotting\n    train_time_dt = train_set.time.values\n    test_time_dt = test_set.time.values\n    \n\n    # interpolation\n    if TYPE == \"linear\":\n        f = interp1d(train_time_num, train_set.values, kind=TYPE, fill_value=\"extrapolate\")\n        interpolated_values = f(test_time_num)\n        \n        # plot with datetime\n        plt.figure(figsize=(6, 5))\n        plt.scatter(train_time_dt, train_set.values, label=\"train\")\n        plt.scatter(test_time_dt, interpolated_values, label=\"interpolated\")\n        plt.scatter(test_time_dt, test_set.values, label=\"real\")\n\n        plt.title(TYPE +\" interpolation - \" + location )\n        plt.xlabel(\"Time\")\n        plt.ylabel(\"Values\")\n\n        # format x-axis as dates\n        plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d\"))\n        plt.gcf().autofmt_xdate()\n\n        plt.legend()\n        #plt.show()\n        \n        R2 = r2_score(test_set.values, interpolated_values)\n        RMSE = root_mean_squared_error(test_set.values, interpolated_values)\n        MAPE = mean_absolute_percentage_error(test_set.values, interpolated_values)\n\n        end = time.time()\n        T =exec_time(start,end)\n\n        dfmetrics = {\"R2\": R2, \"RMSE\":RMSE, \"MAPE\":MAPE, \"days\":days, \"kind\":TYPE, \"time\": T, \"location\": location}\n        \n        #plt.savefig(\"Linear_\"+str(days)+\"_\"+location+\".png\", dpi=400)\n        \n    #Cubic Spline interpolation  \n    if TYPE == \"CubicSpline\":\n        f = CubicSpline((train_set.time.astype(\"int64\")//10**6).astype(\"int64\").values, train_set.values)  # 'linear' interpolation\n        interpolated_values = f(test_time_num)\n        \n        # plot with datetime\n        plt.figure(figsize=(6, 5))\n        plt.scatter(train_time_dt, train_set.values, label=\"train\")\n        plt.scatter(test_time_dt, interpolated_values, label=\"interpolated\")\n        plt.scatter(test_time_dt, test_set.values, label=\"real\")\n\n        plt.title(TYPE +\" interpolation - \" + location )\n        plt.xlabel(\"Time\")\n        plt.ylabel(\"Values\")\n\n        # format x-axis as dates\n        plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d\"))\n        plt.gcf().autofmt_xdate()\n\n        plt.legend()\n        #plt.show()\n        \n        R2 = r2_score(test_set.values, interpolated_values)\n        RMSE = root_mean_squared_error(test_set.values, interpolated_values)\n        MAPE = mean_absolute_percentage_error(test_set.values, interpolated_values)\n\n        end = time.time()\n        T =exec_time(start,end)\n\n        dfmetrics = {\"R2\": R2, \"RMSE\":RMSE, \"MAPE\":MAPE, \"days\":days, \"kind\":TYPE, \"time\": T, \"location\": location}\n        \n        #plt.savefig(\"Cubic_\"+str(days)+\"_\"+location+\".png\", dpi=400)\n        \n    \n    #Gaussian Process Regression interpolation\n    if TYPE == \"GPR\":\n        start = time.time()\n\n        # --- Convert train time to numeric days ---\n        X_raw = train_set.time.values.astype(\"int64\") // 10**9\n        X_days = (X_raw - X_raw.min()) / (60*60*24)\n\n        y = train_set.values\n        if hasattr(y, \"to_numpy\"):\n            y = y.to_numpy()\n\n        # Mask observed values\n        observed_mask = ~np.isnan(y)\n        X_train = X_days[observed_mask].reshape(-1, 1)\n        y_train = y[observed_mask]\n\n        # --- Full timeline for prediction ---\n        train_time_series = pd.Series(train_set.time.values)\n        test_time_series = pd.Series(test_set.time.values)\n        full_time = pd.concat([train_time_series, test_time_series]).sort_values().reset_index(drop=True)\n\n        #convert date to a better format for GPR\n        X_full = (full_time.values.astype(\"int64\") // 10**9 - X_raw.min()) / (60*60*24)\n        X_full = X_full.reshape(-1, 1)\n\n        # --- Fit Gaussian Process ---\n        # Pick our kernels: \n        #  RBF to account for smoothness,\n        #  ExpSineSquared to account for seasonality\n        #  WhiteKernel to accoutn for noise  \n        kernel = RBF(length_scale=50.0) + ExpSineSquared(length_scale=50.0, periodicity=365.0) + WhiteKernel(noise_level=0.01)\n        gp = GaussianProcessRegressor(kernel=kernel, n_restarts_optimizer=9, normalize_y=True)\n        gp.fit(X_train, y_train)\n\n        # --- Predict over full timeline ---\n        y_pred, y_std = gp.predict(X_full, return_std=True)\n\n        # --- Plot scatter like other methods ---\n        plt.figure(figsize=(6,5))\n        plt.scatter(train_set.time, train_set.values, label=\"train\", color=\"tab:blue\", s=20)\n        plt.scatter(full_time, y_pred, label=\"interpolated (GPR)\", color=\"tab:orange\", s=20)\n        plt.scatter(test_set.time, test_set.values, label=\"real\", color=\"green\", s=20)\n\n        # Confidence interval\n        plt.fill_between(full_time,\n                         y_pred - 2*y_std,\n                         y_pred + 2*y_std,\n                         color=\"tab:orange\", alpha=0.2, label=\"±2σ\") #95% CI\n\n        plt.title(f\"GPR interpolation - {location}\")\n        plt.xlabel(\"Time\")\n        plt.ylabel(\"Values\")\n        plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d\"))\n        plt.gcf().autofmt_xdate()\n        plt.legend()\n        #plt.show()\n\n        # --- Metrics on test set only ---\n        X_test = (test_set.time.values.astype(\"int64\") // 10**9 - X_raw.min()) / (60*60*24)\n        X_test = X_test.reshape(-1, 1)\n        y_test = test_set.values\n        if hasattr(y_test, \"to_numpy\"):\n            y_test = y_test.to_numpy()\n        y_test_pred, _ = gp.predict(X_test, return_std=True)\n\n        R2 = r2_score(y_test, y_test_pred)\n        RMSE = root_mean_squared_error(y_test, y_test_pred)\n        MAPE = mean_absolute_percentage_error(y_test, y_test_pred)\n\n        end = time.time()\n        T = exec_time(start, end)\n\n        dfmetrics = {\"R2\": R2, \"RMSE\": RMSE, \"MAPE\": MAPE, \"days\": days, \"kind\": TYPE, \"time\": T, \"location\": location}\n\n        #plt.savefig(\"GPR_\"+str(days)+\"_\"+location+\".png\", dpi=400)\n        \n    # --- Seasonal interpolation (with past and future window) ---\n    elif TYPE == \"Seasonal\":\n        \n        window_days=7\n        train_df = pd.DataFrame({\"time\": train_time_dt, \"value\": train_set.values})\n        train_df[\"doy\"] = train_df[\"time\"].dt.dayofyear\n        test_time_dt1 = pd.to_datetime(test_time_dt)\n        interpolated_values = []\n\n        for t in test_time_dt1:\n            doy_t = t.timetuple().tm_yday\n            \n            # Windowed selection\n            window_vals = train_df[(train_df[\"doy\"] >= doy_t - window_days) & (train_df[\"doy\"] <= doy_t + window_days)][\"value\"]\n            \n            if len(window_vals) > 0:\n                interpolated_values.append(window_vals.mean())\n            else:\n                diffs = np.abs(train_df[\"doy\"] - doy_t)\n                idx_min = diffs.idxmin()\n                interpolated_values.append(train_df.loc[idx_min, \"value\"])\n\n        interpolated_values = np.array(interpolated_values)\n\n        plt.figure(figsize=(6, 5))\n        plt.scatter(train_time_dt, train_set.values, label=\"train\")\n        plt.scatter(test_time_dt, interpolated_values, label=\"interpolated (seasonal)\", color=\"tab:orange\")\n        plt.scatter(test_time_dt, test_set.values, label=\"real\", color=\"green\")\n        plt.title(\"Seasonal interpolation - \" + location)\n        plt.xlabel(\"Time\")\n        plt.ylabel(\"Values\")\n        plt.gca().xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d\"))\n        plt.gcf().autofmt_xdate()\n        plt.legend()\n        #plt.show()\n\n        R2 = r2_score(test_set.values, interpolated_values)\n        RMSE = root_mean_squared_error(test_set.values, interpolated_values)\n        MAPE = mean_absolute_percentage_error(test_set.values, interpolated_values)\n        end = time.time()\n        T = exec_time(start, end)\n\n        dfmetrics = {\"R2\": R2, \"RMSE\": RMSE, \"MAPE\": MAPE, \"days\":days, \"kind\":TYPE, \"time\": T, \"location\": location}\n        #plt.savefig(\"Seasonal_\"+str(days)+\"_\"+location+\".png\", dpi=400)\n        \n\n    return dfmetrics\n","visibility":"show","key":"jeQofQqR5m"},{"type":"output","id":"OcgRa5esxZRj0-FCAPRBl","data":[],"visibility":"show","key":"I1hMM6NG2P"}],"visibility":"show","key":"XMBdFox5AF"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#LINEAR INTERPOLATION\nLC = interpolation(\"linear\", \"Caatinga\")\nLA = interpolation(\"linear\", \"Amazon\")\nLE =interpolation(\"linear\", \"Elmstein\")\nLM = interpolation(\"linear\", \"Muara\")\nLR = interpolation(\"linear\", \"Rockies\")\n","visibility":"show","key":"HUzWVkS08O"},{"type":"output","id":"SvZWjH8sSldtLUTDgLb6f","data":[{"name":"stdout","output_type":"stream","text":"Execution Time:  0.35504698753356934\nExecution Time:  0.6290695667266846\nExecution Time:  0.37151408195495605\nExecution Time:  0.4424552917480469\nExecution Time:  0.5377426147460938\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"145ea3982d47f221beafd334b3e2735f","path":"/eodashboard-notebooks/build/145ea3982d47f221beafd334b3e2735f.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"307c3ee1a828fad231c9b02eaae5a0cf","path":"/eodashboard-notebooks/build/307c3ee1a828fad231c9b02eaae5a0cf.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"98ddc156756c3dd609fd6bddd03e74a7","path":"/eodashboard-notebooks/build/98ddc156756c3dd609fd6bddd03e74a7.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"867ab41b8d0daaaa0e745e451df302f0","path":"/eodashboard-notebooks/build/867ab41b8d0daaaa0e745e451df302f0.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a0b93b5bfbff365ba8bd9ef678ef52fe","path":"/eodashboard-notebooks/build/a0b93b5bfbff365ba8bd9ef678ef52fe.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"vYW34TgQ3c"}],"visibility":"show","key":"VSfmeB8aRF"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#CUBIC SPLINE INTERPOLATION\nCC = interpolation(\"CubicSpline\", \"Caatinga\")\nCA =interpolation(\"CubicSpline\", \"Amazon\")\nCE =interpolation(\"CubicSpline\", \"Elmstein\")\nCM =interpolation(\"CubicSpline\", \"Muara\")\nCR =interpolation(\"CubicSpline\", \"Rockies\")\n","visibility":"show","key":"GFy5UCia4n"},{"type":"output","id":"H5zKjj2LxAvaGwuRNNQb9","data":[{"name":"stdout","output_type":"stream","text":"Execution Time:  0.38396620750427246\nExecution Time:  0.6379997730255127\nExecution Time:  0.3731379508972168\nExecution Time:  0.44517946243286133\nExecution Time:  0.5438599586486816\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"4fdfc0a515e852de52501e5d46a7424f","path":"/eodashboard-notebooks/build/4fdfc0a515e852de52501e5d46a7424f.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c4c2e6ab0106c60d89ed02b98814e8bf","path":"/eodashboard-notebooks/build/c4c2e6ab0106c60d89ed02b98814e8bf.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"91bf5eff10762ebc2746219f3bb420ad","path":"/eodashboard-notebooks/build/91bf5eff10762ebc2746219f3bb420ad.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b373c64e1a801e17566fe4c11173e07d","path":"/eodashboard-notebooks/build/b373c64e1a801e17566fe4c11173e07d.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"6ad079476bce156af8b46763369200f4","path":"/eodashboard-notebooks/build/6ad079476bce156af8b46763369200f4.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"C39BwOZwqC"}],"visibility":"show","key":"xrpKffyklK"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"GC = interpolation(\"GPR\", \"Caatinga\")\nGA = interpolation(\"GPR\", \"Amazon\")\nGE = interpolation(\"GPR\", \"Elmstein\")\nGM = interpolation(\"GPR\", \"Muara\")\nGR = interpolation(\"GPR\", \"Rockies\")\n","visibility":"show","key":"HJhTHa9eH0"},{"type":"output","id":"33MreHdd1FiF8UpNGY5wf","data":[{"name":"stdout","output_type":"stream","text":"Execution Time:  0.8819622993469238\n"},{"name":"stderr","output_type":"stream","text":"/home/conda/users/fbfe84b6-1757499783-109-science-hub-course-updated/lib/python3.13/site-packages/sklearn/gaussian_process/kernels.py:440: ConvergenceWarning: The optimal value found for dimension 0 of parameter k2__noise_level is close to the specified lower bound 1e-05. Decreasing the bound and calling fit again may find a better value.\n  warnings.warn(\n"},{"name":"stdout","output_type":"stream","text":"Execution Time:  1.1756927967071533\n"},{"name":"stderr","output_type":"stream","text":"/home/conda/users/fbfe84b6-1757499783-109-science-hub-course-updated/lib/python3.13/site-packages/sklearn/gaussian_process/_gpr.py:663: ConvergenceWarning: lbfgs failed to converge after 1 iteration(s) (status=2):\nABNORMAL: \n\nYou might also want to scale the data as shown in:\n    https://scikit-learn.org/stable/modules/preprocessing.html\n  _check_optimize_result(\"lbfgs\", opt_res)\n"},{"name":"stdout","output_type":"stream","text":"Execution Time:  1.2742934226989746\n"},{"name":"stderr","output_type":"stream","text":"/home/conda/users/fbfe84b6-1757499783-109-science-hub-course-updated/lib/python3.13/site-packages/sklearn/gaussian_process/_gpr.py:663: ConvergenceWarning: lbfgs failed to converge after 2 iteration(s) (status=2):\nABNORMAL: \n\nYou might also want to scale the data as shown in:\n    https://scikit-learn.org/stable/modules/preprocessing.html\n  _check_optimize_result(\"lbfgs\", opt_res)\n/home/conda/users/fbfe84b6-1757499783-109-science-hub-course-updated/lib/python3.13/site-packages/sklearn/gaussian_process/kernels.py:450: ConvergenceWarning: The optimal value found for dimension 0 of parameter k1__k2__periodicity is close to the specified upper bound 100000.0. Increasing the bound and calling fit again may find a better value.\n  warnings.warn(\n"},{"name":"stdout","output_type":"stream","text":"Execution Time:  1.1290569305419922\nExecution Time:  1.4447743892669678\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8815af2a9db2fad877165534ac052afb","path":"/eodashboard-notebooks/build/8815af2a9db2fad877165534ac052afb.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"56fc5457197185af58c2b01384096eda","path":"/eodashboard-notebooks/build/56fc5457197185af58c2b01384096eda.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ff19492a5537527e87182a3df90f399a","path":"/eodashboard-notebooks/build/ff19492a5537527e87182a3df90f399a.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f9c2e2bb08f7c18165883fcebe6d07df","path":"/eodashboard-notebooks/build/f9c2e2bb08f7c18165883fcebe6d07df.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a9a3e94278cd00c2e8fa4af82e5a5898","path":"/eodashboard-notebooks/build/a9a3e94278cd00c2e8fa4af82e5a5898.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"w09K64lpFE"}],"visibility":"show","key":"pkelBTeaAG"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"SC = interpolation(\"Seasonal\", \"Caatinga\")\nSA = interpolation(\"Seasonal\", \"Amazon\")\nSE = interpolation(\"Seasonal\", \"Elmstein\")\nSM =interpolation(\"Seasonal\", \"Muara\")\nSR =interpolation(\"Seasonal\", \"Rockies\")\n","visibility":"show","key":"DWFDO9AfDC"},{"type":"output","id":"9RAaMvKGpSnJbpWKV4si4","data":[{"name":"stdout","output_type":"stream","text":"Execution Time:  0.3807833194732666\nExecution Time:  0.6626808643341064\nExecution Time:  0.3941342830657959\nExecution Time:  0.4735894203186035\nExecution Time:  0.5647144317626953\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9cd3d01d521375ca700c46a29abc2e60","path":"/eodashboard-notebooks/build/9cd3d01d521375ca700c46a29abc2e60.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b032a63ed4fad485b5f2e5dc9b32ebb9","path":"/eodashboard-notebooks/build/b032a63ed4fad485b5f2e5dc9b32ebb9.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2dd1c8c694c7e594996e92f57e4e671e","path":"/eodashboard-notebooks/build/2dd1c8c694c7e594996e92f57e4e671e.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b06c3f702c32d98dddee201688716b68","path":"/eodashboard-notebooks/build/b06c3f702c32d98dddee201688716b68.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f77f6cda3f947fa893e2db9a1f9881a6","path":"/eodashboard-notebooks/build/f77f6cda3f947fa893e2db9a1f9881a6.png"},"text/plain":{"content":"<Figure size 600x500 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"qtzO7Dbhst"}],"visibility":"show","key":"rWu6PNWEWH"},{"type":"block","kind":"notebook-code","data":{"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# collate all metrics ! \nmetrics = [LA, LC, LE, LM, LR, \n           CA, CC, CE, CM, CR,\n            SC, SA, SE, SM ,SR,\n           GA, GC, GE, GM, GR]\n\n\nDFmetrics = pd.DataFrame(metrics)\n\n#divide time by 10 to make it fit into plot\nDFmetrics.time=DFmetrics.time/10\nDFmetrics","visibility":"show","key":"tqAhaNJMjZ"},{"type":"output","id":"nieQiROr9jDmOvpxd8-J0","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>R2</th>\n      <th>RMSE</th>\n      <th>MAPE</th>\n      <th>days</th>\n      <th>kind</th>\n      <th>time</th>\n      <th>location</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>-2.071670</td>\n      <td>0.022765</td>\n      <td>0.017272</td>\n      <td>180</td>\n      <td>linear</td>\n      <td>0.062907</td>\n      <td>Amazon</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>-0.783645</td>\n      <td>0.154162</td>\n      <td>0.344884</td>\n      <td>180</td>\n      <td>linear</td>\n      <td>0.035505</td>\n      <td>Caatinga</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.064498</td>\n      <td>0.125736</td>\n      <td>0.165355</td>\n      <td>180</td>\n      <td>linear</td>\n      <td>0.037151</td>\n      <td>Elmstein</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>-0.160626</td>\n      <td>0.019588</td>\n      <td>0.017285</td>\n      <td>180</td>\n      <td>linear</td>\n      <td>0.044246</td>\n      <td>Muara</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0.556621</td>\n      <td>0.193512</td>\n      <td>0.710559</td>\n      <td>180</td>\n      <td>linear</td>\n      <td>0.053774</td>\n      <td>Rockies</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>-1.203839</td>\n      <td>0.019283</td>\n      <td>0.015733</td>\n      <td>180</td>\n      <td>CubicSpline</td>\n      <td>0.063800</td>\n      <td>Amazon</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>-4.664079</td>\n      <td>0.274719</td>\n      <td>0.410980</td>\n      <td>180</td>\n      <td>CubicSpline</td>\n      <td>0.038397</td>\n      <td>Caatinga</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>-8.888681</td>\n      <td>0.408797</td>\n      <td>0.358573</td>\n      <td>180</td>\n      <td>CubicSpline</td>\n      <td>0.037314</td>\n      <td>Elmstein</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>-20.002818</td>\n      <td>0.083325</td>\n      <td>0.058022</td>\n      <td>180</td>\n      <td>CubicSpline</td>\n      <td>0.044518</td>\n      <td>Muara</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>0.283473</td>\n      <td>0.246001</td>\n      <td>0.853321</td>\n      <td>180</td>\n      <td>CubicSpline</td>\n      <td>0.054386</td>\n      <td>Rockies</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>0.462521</td>\n      <td>0.084626</td>\n      <td>0.166001</td>\n      <td>180</td>\n      <td>Seasonal</td>\n      <td>0.038078</td>\n      <td>Caatinga</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>-0.698638</td>\n      <td>0.016929</td>\n      <td>0.013000</td>\n      <td>180</td>\n      <td>Seasonal</td>\n      <td>0.066268</td>\n      <td>Amazon</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>0.650421</td>\n      <td>0.076862</td>\n      <td>0.099251</td>\n      <td>180</td>\n      <td>Seasonal</td>\n      <td>0.039413</td>\n      <td>Elmstein</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>0.055022</td>\n      <td>0.017675</td>\n      <td>0.015228</td>\n      <td>180</td>\n      <td>Seasonal</td>\n      <td>0.047359</td>\n      <td>Muara</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>0.751644</td>\n      <td>0.144830</td>\n      <td>0.297944</td>\n      <td>180</td>\n      <td>Seasonal</td>\n      <td>0.056471</td>\n      <td>Rockies</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>-0.131028</td>\n      <td>0.013814</td>\n      <td>0.011259</td>\n      <td>180</td>\n      <td>GPR</td>\n      <td>0.117569</td>\n      <td>Amazon</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>0.671794</td>\n      <td>0.066130</td>\n      <td>0.103889</td>\n      <td>180</td>\n      <td>GPR</td>\n      <td>0.088196</td>\n      <td>Caatinga</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>0.316192</td>\n      <td>0.107499</td>\n      <td>0.141263</td>\n      <td>180</td>\n      <td>GPR</td>\n      <td>0.127429</td>\n      <td>Elmstein</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>-0.087993</td>\n      <td>0.018965</td>\n      <td>0.015341</td>\n      <td>180</td>\n      <td>GPR</td>\n      <td>0.112906</td>\n      <td>Muara</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>0.783029</td>\n      <td>0.135370</td>\n      <td>0.390458</td>\n      <td>180</td>\n      <td>GPR</td>\n      <td>0.144477</td>\n      <td>Rockies</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"           R2      RMSE      MAPE  days         kind      time  location\n0   -2.071670  0.022765  0.017272   180       linear  0.062907    Amazon\n1   -0.783645  0.154162  0.344884   180       linear  0.035505  Caatinga\n2    0.064498  0.125736  0.165355   180       linear  0.037151  Elmstein\n3   -0.160626  0.019588  0.017285   180       linear  0.044246     Muara\n4    0.556621  0.193512  0.710559   180       linear  0.053774   Rockies\n5   -1.203839  0.019283  0.015733   180  CubicSpline  0.063800    Amazon\n6   -4.664079  0.274719  0.410980   180  CubicSpline  0.038397  Caatinga\n7   -8.888681  0.408797  0.358573   180  CubicSpline  0.037314  Elmstein\n8  -20.002818  0.083325  0.058022   180  CubicSpline  0.044518     Muara\n9    0.283473  0.246001  0.853321   180  CubicSpline  0.054386   Rockies\n10   0.462521  0.084626  0.166001   180     Seasonal  0.038078  Caatinga\n11  -0.698638  0.016929  0.013000   180     Seasonal  0.066268    Amazon\n12   0.650421  0.076862  0.099251   180     Seasonal  0.039413  Elmstein\n13   0.055022  0.017675  0.015228   180     Seasonal  0.047359     Muara\n14   0.751644  0.144830  0.297944   180     Seasonal  0.056471   Rockies\n15  -0.131028  0.013814  0.011259   180          GPR  0.117569    Amazon\n16   0.671794  0.066130  0.103889   180          GPR  0.088196  Caatinga\n17   0.316192  0.107499  0.141263   180          GPR  0.127429  Elmstein\n18  -0.087993  0.018965  0.015341   180          GPR  0.112906     Muara\n19   0.783029  0.135370  0.390458   180          GPR  0.144477   Rockies","content_type":"text/plain"}}}],"visibility":"show","key":"sksmymyQav"}],"visibility":"show","key":"qacWOlGWwT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df = DFmetrics\nmetrics = [\"R2\",\"RMSE\", \"time\"]\nlocations = df[\"location\"].unique()\n\nfig, axes = plt.subplots(1, len(locations), figsize=(5*len(locations), 5), sharey=False)\n\nfor i, loc in enumerate(locations):\n    sub = df[df[\"location\"] == loc]\n    \n    # x positions = kinds\n    kinds = sub[\"kind\"].unique()\n    x = np.arange(len(kinds))\n    width = 0.25  # width of each bar\n    \n    for j, metric in enumerate(metrics):\n        axes[i].bar(x + j*width, sub[metric], width, label=metric)\n    \n    axes[i].set_title(loc)\n    axes[i].set_ylim(0,1.2)\n    axes[i].set_xticks(x + width)\n    axes[i].set_xticklabels(kinds, rotation=30)\n    axes[i].set_ylabel(\"Value\")\n    axes[i].grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\n\n\n# put one legend for all\nhandles, labels = axes[0].get_legend_handles_labels()\nfig.legend(handles, labels, loc=\"upper center\", ncol=len(metrics))\n\nplt.tight_layout(rect=[0, 0, 1, 0.95])\n\n#plt.savefig(\"Summary_\"+str(days)+\"days.png\", dpi=300)","visibility":"show","key":"eqGY98XAoP"},{"type":"output","id":"SktSCOsA8N9WwnVsmngO_","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c81a410dc8bf8b81e6e7e43668fa588e","path":"/eodashboard-notebooks/build/c81a410dc8bf8b81e6e7e43668fa588e.png"},"text/plain":{"content":"<Figure size 2500x500 with 5 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"vhDGooTjE1"}],"visibility":"show","key":"UrsChMXZ1i"}],"key":"KywYMyGrmw"},"references":{"cite":{"order":["de_Oliveira_2023"],"data":{"de_Oliveira_2023":{"label":"de_Oliveira_2023","enumerator":"1","doi":"10.3390/f14040828","html":"de Oliveira, M. L., dos Santos, C. A. C., Santos, F. A. C., de Oliveira, G., Santos, C. A. G., Bezerra, U. A., de B. L. Cunha, J. E., & da Silva, R. M. (2023). Evaluation of Water and Carbon Estimation Models in the Caatinga Biome Based on Remote Sensing. <i>Forests</i>, <i>14</i>(4), 828. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.3390/f14040828\">10.3390/f14040828</a>","url":"https://doi.org/10.3390/f14040828"}}}},"footer":{"navigation":{"prev":{"title":"<a name=\"toc\"></a><span style='color:DarkCyan'> Table of Contents </center> </span>","url":"/notebooks/oceanographic-patterns-clustering","group":"Notebooks"},"next":{"title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","url":"/notebooks/openchallengenotebook-c1-jessel-hezzi-roussel","group":"Notebooks"}}},"domain":"http://localhost:3000"}