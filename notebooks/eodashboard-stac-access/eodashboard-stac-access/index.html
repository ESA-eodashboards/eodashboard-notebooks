<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>EODashboard STAC access examples - EO Dashboard Notebooks</title><meta property="og:title" content="EODashboard STAC access examples - EO Dashboard Notebooks"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of examples relevant to the EO Dashboard project"/><meta property="og:description" content="Collection of examples relevant to the EO Dashboard project"/><meta name="keywords" content=""/><meta name="image" content="/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png"/><meta property="og:image" content="/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png"/><link rel="stylesheet" href="/eodashboard-notebooks/build/_assets/app-2K3KGISG.css"/><link rel="stylesheet" href="/eodashboard-notebooks/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/eodashboard-notebooks/favicon.ico"/><link rel="stylesheet" href="/eodashboard-notebooks/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100%;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-full top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block lg:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/eodashboard-notebooks/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 dark:text-gray-300 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-full xl:pointer-events-none overflow-auto max-xl:w-[75vw] max-xl:max-w-[350px] max-xl:!top-0 max-xl:h-screen lg:hidden hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden max-xl:h-full hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity lg:hidden ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white font-medium"></div></nav></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="myst-fm-block-subject flex-none pr-2 smallcaps">Notebook examples</div><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/ESA-eodashboards/eodashboard-notebooks" title="GitHub Repository: ESA-eodashboards/eodashboard-notebooks" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/ESA-eodashboards/eodashboard-notebooks/edit/main/notebooks/eodashboard_STAC_access/eodashboard_STAC_access.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">EODashboard STAC access examples</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="b0MxFFPUd5" class="myst-jp-nb-block relative group/block"><h1 id="eodashboard-stac-access-examples" class="relative group"><span class="heading-text">EODashboard STAC access examples</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#eodashboard-stac-access-examples" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p><a target="_blank" rel="noreferrer" href="http://eodashboard.org" class="link whitespace-nowrap"><span class="link-text whitespace-normal">eodashboard.org</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> uses a standard static STAC catalog</p><p>This example notebook outlines</p><ul><li><p>accessing eodashboard STAC catalog</p></li><li><p>discovery of the collections</p></li><li><p>checking individual metadata fields</p></li><li><p>browsing through items inside linked GeoParquet storage</p></li><li><p>showing linked XYZ service on an interactive map for a single date</p></li><li><p>time series analysis using referenced statistics endpoint</p></li></ul></div><div id="PPTJOh70kc" class="myst-jp-nb-block relative group/block"><h1 id="step-1-accessing-the-eodashboard-stac-catalog" class="relative group"><span class="heading-text">Step 1: Accessing the EODashboard STAC Catalog</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-1-accessing-the-eodashboard-stac-catalog" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>The <a target="_blank" rel="noreferrer" href="http://eodashboard.org" class="link whitespace-nowrap"><span class="link-text whitespace-normal">eodashboard.org</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="link-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"></path></svg></a> platform provides a publicly accessible STAC catalog.<br/>In this step, we use the <code>pystac</code> library to load the root catalog from the provided URL to explore provided collections.</p><p>This root catalog serves as the entry point and provides metadata and links to collections and subcatalogs.
We’ll inspect the catalog description, and check how many child collections are directly linked.</p><h2 id="structure" class="relative group"><span class="heading-text">Structure</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#structure" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>eodash organizes its data in a two-level STAC structure:</p><ul><li><p>The top level consists of <strong>“indicators”</strong>, represented as STAC <strong>collections</strong>. Each indicator describes a derived environmental variable or theme (e.g. “SMOS Ocean Salinity”).</p></li><li><p>Each indicator then groups one or more <strong>sub-collections</strong>, represented also as STAC <strong>collections</strong>. They group the actual datasets contributing to the indicator and each subcollection is shown as separate layer in the eodash client interface.</p></li></ul></div><div id="JEPw7naCCo" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Step 1: Access the EODashboard STAC Catalog via PySTAC

from pystac import Catalog

# URL to the root STAC catalog (adjust if necessary)
catalog_url = &quot;https://ESA-eodashboards.github.io/eodashboard-catalog/trilateral/catalog.json&quot;

# Load the catalog
catalog = Catalog.from_file(catalog_url)

# Print basic information
print(f&quot;Catalog ID: {catalog.id}&quot;)
print(f&quot;Description: {catalog.description}&quot;)
indicators = list(catalog.get_children())

print(f&quot;Number of child indicators: {len(indicators)}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="LcJ7HKX6QA3SwP6sgn3N8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Catalog ID: trilateral
Description: A Tri-Agency Dashboard by NASA, ESA, JAXA
Number of child indicators: 127
</span></code></pre></div></div></div></div><div id="Hu04A8A4yc" class="myst-jp-nb-block relative group/block"></div><div id="noXz4NGN2b" class="myst-jp-nb-block relative group/block"><h1 id="step-2-discovering-and-filtering-indicators" class="relative group"><span class="heading-text">Step 2: Discovering and Filtering Indicators</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-2-discovering-and-filtering-indicators" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>The STAC catalog contains over 100 indicators.<br/>In this step, we retrieve all indicators and filter them to include only those relevant to <strong>Soil Moisture and Ocean Salinity satellite (SMOS)</strong>.</p><p>We look for the keyword “SMOS” in the collection’s <code>satellite</code> metadata field.<br/>This helps us isolate datasets derived from or related to ESA’s SMOS mission.</p></div><div id="JDXqzZAR99" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Step 2: Filter indicators related to SMOS

# Filter indicators that mention &#x27;SMOS&#x27; in satellite property
smos_indicators = [
    ind for ind in indicators
    if &quot;satellite&quot; in ind.extra_fields and &quot;SMOS&quot; in [s.upper() for s in ind.extra_fields[&quot;satellite&quot;]]
]

# Show results
print(f&quot;Found {len(smos_indicators)} SMOS-related collections (strict filter):&quot;)
for ind in smos_indicators:
    print(f&quot;{ind.id}: {ind.title}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="JoI1eyLugp29cl2T_fbqk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Found 14 SMOS-related collections (strict filter):
RECCAP2_1_AGC_LVOD_amazonia_methods_mean_crop: Methods mean aboveground carbon (CCI RECCAP2)
RECCAP2_2_AGC_LVOD_amazonia_smooth_max_crop: Smooth max aboveground carbon (CCI RECCAP2)
RECCAP2_3_AGC_LVOD_amazonia_smooth_mean_crop: Smooth mean aboveground carbon (CCI RECCAP2)
RECCAP2_4_AGC_LVOD_amazonia_trend_mean_crop: Trend mean aboveground carbon (CCI RECCAP2)
RECCAP2_5_SF_biomass_growth: Secondary forest growth (CCI RECCAP2)
RECCAP2_6_deforested_biomass: Deforestation (CCI RECCAP2)
RECCAP2_7_degraded_biomass: Degradation (CCI RECCAP2)
RECCAP2_8_edge_biomass_change: Edge biomass change (CCI RECCAP2)
RECCAP2_9_intact_biomass_change_methods_mean: Methods mean intact biomass change (CCI RECCAP2)
RECCAP2_10_intact_biomass_change_smooth_max: Smooth max intact biomass change (CCI RECCAP2)
RECCAP2_11_intact_biomass_change_smooth_mean: Smooth mean intact biomass change (CCI RECCAP2)
RECCAP2_12_intact_biomass_change_trend_mean: Mean intact biomass change trend (CCI RECCAP2)
smos_ocean_salinity: SMOS Ocean Salinity
smos_soil_moisture: SMOS Soil Moisture
</span></code></pre></div></div></div></div><div id="LFuFm0nI8q" class="myst-jp-nb-block relative group/block"><h1 id="step-3-checking-individual-metadata-fields" class="relative group"><span class="heading-text">Step 3: Checking Individual Metadata Fields</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-3-checking-individual-metadata-fields" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>Now that we’ve identified SMOS-related indicators, we’ll examine one specific indicator in detail:<br/><strong><code>smos_ocean_salinity</code></strong>, which shows the sea surface salinity globally acquired by the SMOS mission.</p><p>We’ll print out the main metadata fields, including:</p><ul><li><p>Basic identification (<code>title</code>, <code>description</code>)</p></li><li><p>Spatial and temporal extent</p></li><li><p>Licensing and providers</p></li><li><p>Custom fields such as <code>satellite</code>, <code>region</code>, and <code>data_source</code> if available</p></li></ul></div><div id="NXMXj1v4Oi" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">indicator = next(ind for ind in indicators if ind.id == &quot;smos_ocean_salinity&quot;) 
# Print basic metadata
print(f&quot;Title: {indicator.title}&quot;)
print(f&quot;License: {indicator.license}&quot;)
print(f&quot;Temporal Extent: {indicator.extent.temporal.to_dict()}&quot;)
print(f&quot;Spatial Extent (bbox): {indicator.extent.spatial.bboxes}&quot;)
print(&quot;-----------------------------------------------&quot;)
print(f&quot;Description: {indicator.description}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="5bHhpH5gaM6_WPmq4fWzJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Title: SMOS Ocean Salinity
License: other
Temporal Extent: {&#x27;interval&#x27;: [[&#x27;2023-01-04T00:00:00Z&#x27;, &#x27;2023-12-27T00:00:00Z&#x27;]]}
Spatial Extent (bbox): [[-180.0, -88.59375, 180.0, 88.59375], [-180.0, -88.59375, 180.0, 88.59375]]
-----------------------------------------------
Description: ## Ocean Salinity

This indicator shows the sea surface salinity globally acquired by the ESA Earth Explorer [Soil Moisture and Ocean Salinity (SMOS) mission](https://earth.esa.int/eogateway/missions/smos/description). Ocean currents are driven by temperature and salinity variations in the seawater and Understanding ocean salinity&#x27;s annual and inter-annual variability are crucial in understanding the role of the ocean in the climate system. Ocean circulation is mainly driven by the water and heat flux through the atmosphere-ocean interface, but salinity is also fundamental in determining ocean density and hence thermohaline circulation. 

This dataset is provided by the **Euro Data Cube**&#x27;s [SMOS Level-2C Datacube Service](https://collections.eurodatacube.com/smos-datacube/readme.html) offered by Brockmann Consult. The SMOS data cube service is implemented using the [xcube-smos datastore](https://github.com/xcube-dev/xcube-smos), which is available with the permissive MIT license.   

### Dataset description
-  Data is acquired by the sensor onboard SMOS, the [Microwave Imaging Radiometer with Aperture Synthesis (MIRAS)](https://earth.esa.int/eogateway/instruments/miras). MIRAS creates images of radiation emitted in the microwave L-band (1.4 GHz), by measuring changes in the salinity of seawater by observing variations in the natural microwave emission coming up off the surface of the ocean.
-  The Level 2 Ocean Salinity (OS) product comprises sea surface salinity measurements geo-located in an equal-area (grid system ISEA 4H9).
-  Spatial resolution: ~40 km (varies due to the SMOS interferometric imaging technique)

### Applications
Ocean salinity can be used for various applications, including ocean circulation, climate monitoring and water management.

### Read more

* [SMOS L1 and L2 Science data](https://earth.esa.int/eogateway/catalog/smos-science-products)
* [SMOS Datacube Service - Euro Data Cube](https://collections.eurodatacube.com/smos-datacube/)
* [xcube SMOS Python Package](https://xcube-dev.github.io/xcube-smos/)
* [Notebooks for xcube SMOS store](https://github.com/xcube-dev/xcube-smos/tree/main/notebooks)

</span></code></pre></div></div></div></div><div id="ceM54heNe9" class="myst-jp-nb-block relative group/block"><h1 id="step-4-navigating-the-indicator-and-dataset-hierarchy" class="relative group"><span class="heading-text">Step 4: Navigating the Indicator and Dataset Hierarchy</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-4-navigating-the-indicator-and-dataset-hierarchy" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>So far, we’ve explored the <strong>indicator STAC Collection</strong> <code>smos_ocean_salinity</code> as explained in the <strong>Step 1</strong>.</p><p>To access the actual data items on a <strong>subcollection STAC Collection</strong> we now need to look at its <strong>child collections</strong>, which contain the STAC Items and assets.</p><p>In this step, we identify and load those child collections so we can continue our exploration at the data level.</p><p>In our case, the indicator has just one collection - itself so it looks easy.</p></div><div id="ObqEvCzyR8" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get child links that are STAC collections
child_collections = []
for link in indicator.get_links(&quot;child&quot;):
    if link.rel == &quot;child&quot;:
        child_collection = link.resolve_stac_object().target
        child_collections.append(child_collection)

# Show child collection IDs and titles
print(f&quot;{len(child_collections)} child collections found under &#x27;smos_ocean_salinity&#x27;:&quot;)
for col in child_collections:
    print(f&quot;- {col.id}: {col.title}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="x-EjhOzs5JQ_lccM_oyNo" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>1 child collections found under &#x27;smos_ocean_salinity&#x27;:
- smos_ocean_salinity: SMOS Ocean Salinity
</span></code></pre></div></div></div></div><div id="lWB98nBuGV" class="myst-jp-nb-block relative group/block"><h1 id="step-5-accessing-and-browsing-stac-items-via-geoparquet" class="relative group"><span class="heading-text">Step 5: Accessing and Browsing STAC Items via GeoParquet</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-5-accessing-and-browsing-stac-items-via-geoparquet" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>In eodashboard, each child collection under an indicator may reference a bulk listing of STAC Items using a <strong>GeoParquet</strong> file for performance reasons during the catalog creation.
This file acts as a storage for the STAC Items associated with that dataset and can be efficiently read and queried.</p><p>We identify this asset by checking for an <strong>Asset</strong> with a <code>roles</code> array containing <code>&quot;collection-mirror&quot;</code> which is eodash specific way of distinction of the GeoParquet.</p><p>Once found, we load it and use <code>pyarrow.parquet</code> to load the GeoParquet file and <code>stac_geoparquet</code> to convert it back to STAC Item structure and display their contents.</p><p>This enables fast, local-style exploration of all STAC items in the dataset, including geometry, timestamp, and links to assets like XYZ tiles or statistics endpoints.</p></div><div id="zzfOHCtgYH" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import requests
import pyarrow.parquet as pq
import io
import stac_geoparquet

geoparquet_asset = None
for key, asset in child_collection.assets.items():
    # specific way how eodash labels the asset with a geoparquet of items
    if &quot;collection-mirror&quot; in asset.roles:
        geoparquet_asset = asset
        break

if geoparquet_asset is None:
    raise ValueError(&quot;No asset with role &#x27;collection-mirror&#x27; found in the child collection.&quot;)
# eodash catalog links the asset href with relative path, we need to get absolute to retrieve it
parquet_url = geoparquet_asset.get_absolute_href()
print(f&quot;Reading remote GeoParquet from: {parquet_url}&quot;)

response = requests.get(parquet_url)
if response.status_code != 200:
    print(f&quot;Failed to download parquet file from {parquet_url}&quot;)
# Read the table with pyarrow
table = pq.read_table(io.BytesIO(response.content))

# Convert to a list of STAC dictionaries
items = list(stac_geoparquet.arrow.stac_table_to_items(table))
print(f&quot;In total {len(items)} items were retrieved.&quot;)
print(f&quot;Submission {len(items)} items were retrieved.&quot;)
# show example of metadata of one item
item = items[0]
print(&quot;-------------------------------------&quot;)
print(f&quot;Datetime: {item[&#x27;properties&#x27;].get(&#x27;datetime&#x27;)}&quot;)
print(f&quot;BBox: {item[&#x27;bbox&#x27;]}&quot;)
print(f&quot;Number of service links: {len(item[&#x27;links&#x27;])}&quot;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="VBQTQxC-OzvBQ3eOg-oHt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Reading remote GeoParquet from: https://ESA-eodashboards.github.io/eodashboard-catalog/trilateral/smos_ocean_salinity/smos_ocean_salinity/items.parquet
In total 52 items were retrieved.
Submission 52 items were retrieved.
-------------------------------------
Datetime: 2023-01-04T00:00:00.000000Z
BBox: [-180.0, -88.59375, 180.0, 88.59375]
Number of service links: 1
</span></code></pre></div></div></div></div><div id="l3YdEMbJKM" class="myst-jp-nb-block relative group/block"><h1 id="step-6-visualize-linked-xyz-tile-layer" class="relative group"><span class="heading-text">Step 6. Visualize Linked XYZ Tile Layer</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-6-visualize-linked-xyz-tile-layer" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>For each item, eodash links the suggested rendering of the visualization layer, which we can display using <code>folium</code> on the map.</p><p>We selected the first Item containing data for 1.4.2023 and add the tile layer with a eox cloudless background..</p></div><div id="vbl3Cf6o0i" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import folium

# Find the xyz tile link for 1.4.2023
xyz_link = next((l for l in item[&quot;links&quot;] if l[&quot;rel&quot;] == &quot;xyz&quot;), None)
print(f&quot;Actual link is {xyz_link}&quot;)
m = folium.Map(location=[45, 10], zoom_start=4, tiles=None)
if xyz_link:
    folium.TileLayer(
        tiles=xyz_link[&quot;href&quot;],
        attr=&#x27;Rendering of SMOS datacube provided by xcube-server operated by Brockmann Consult GmbH&#x27;,
        name=xyz_link.get(&quot;title&quot;, &quot;Tile Layer&quot;),
        overlay=True,
        control=True
    ).add_to(m)

# Add EOxCloudless layer
folium.TileLayer(
    tiles=&quot;https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2024_3857/default/GoogleMapsCompatible/{z}/{y}/{x}.jpg&quot;,
    attr=&#x27;&lt;a href=&quot;https://maps.eox.at&quot;&gt;Overlay&lt;/a&gt; { Data &amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors, Rendering &amp;copy; &lt;a href=&quot;https://eox.at&quot;&gt;EOX&lt;/a&gt; and &lt;a href=&quot;https://github.com/mapserver/basemaps&quot;&gt;MapServer&lt;/a&gt; }&#x27;,
    name=&quot;EOxCloudless 2024&quot;,
    overlay=False,
    control=True
).add_to(m)

folium.LayerControl().add_to(m)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="TW-Jn_4f_BWgESwGyIkC5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Actual link is {&#x27;href&#x27;: &#x27;https://api.earthsystemdatalab.net/api/tiles/smos-os/SSS_corr/{z}/{y}/{x}?crs=EPSG:3857&amp;time=2023-01-04T00:00:00Z&amp;vmin=0&amp;vmax=50&amp;cbar=jet&#x27;, &#x27;rel&#x27;: &#x27;xyz&#x27;, &#x27;title&#x27;: &#x27;xcube tiles&#x27;, &#x27;type&#x27;: &#x27;image/png&#x27;}
</span></code></pre></div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="VHf9UUwg9z" class="myst-jp-nb-block relative group/block"><h1 id="step-7-create-the-legend-for-the-provided-layer" class="relative group"><span class="heading-text">Step 7. Create the legend for the provided layer</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-7-create-the-legend-for-the-provided-layer" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>When viewing geospatial datasets, especially those using color mapped imagery such as the SMOS ocean salinity layer, the colors themselves have no meaning without a reference.</p><p>In our case, the SMOS layer visualization uses the jet colormap scaled from 0 to 50 as seen in the XYZ link from metadata, which corresponds to sea surface salinity in parts per 1000 (ppt).</p><p>Including a legend ensures that viewers can correctly interpret the scientific meaning behind the visual patterns.</p></div><div id="eiYgxnEyp7" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">
import matplotlib.pyplot as plt

fig, ax = plt.subplots(figsize=(6, 1))
fig.subplots_adjust(bottom=0.5)

# Create a colorbar image from the &quot;jet&quot; colormap
cmap = plt.get_cmap(&#x27;jet&#x27;)
norm = plt.Normalize(vmin=0, vmax=50)

cb = plt.colorbar(
    plt.cm.ScalarMappable(norm=norm, cmap=cmap),
    cax=ax,
    orientation=&#x27;horizontal&#x27;
)

cb.set_label(&quot;Sea Surface Salinity (ppt)&quot;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="Ili-opPdrjC1P_pmOntnw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/eodashboard-notebooks/build/6d736eb524cb2beb50d4992620081ae2.png" alt="&lt;Figure size 600x100 with 1 Axes&gt;"/></div></div></div><div id="MCmMJSdm4I" class="myst-jp-nb-block relative group/block"><h1 id="step-8-fetching-and-plotting-time-series-statistics" class="relative group"><span class="heading-text">Step 8. Fetching and Plotting Time Series Statistics</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-8-fetching-and-plotting-time-series-statistics" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>In this step, we access the statistics service linked from the indicator level STAC collection.
We sent a POST request with a specified geographic polygon to retrieve median values of the satellite data over time.
The response provides a time series which we then visualized using <code>Matplotlib</code>.</p><p>To ensure the date labels on the x-axis are readable and well-formatted, we converted the time strings to datetime objects and used Matplotlib’s date locators and formatters.</p></div><div id="QKuZoNKcVg" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import requests
import json
import matplotlib.pyplot as plt
from shapely.geometry import Polygon, mapping
import matplotlib.dates as mdates
from datetime import datetime

# Find the statistics link in the indicator-level STAC Collection
stats_link = next(
    link for link in indicator.links
    if link.rel == &quot;service&quot; and link.media_type == &quot;application/json&quot;
)
print(f&quot;Statistics link {stats_link.target}&quot;)
# Prepare the polygon geometry (example: small box in the Mediterranean sea south of France)
polygon_geom = Polygon([
    (4.35, 40.55),
    (4.35, 42.35),
    (7.2, 42.35),
    (7.2, 40.55),
    (4.35, 40.55)
])

geometry_geojson = mapping(polygon_geom)

# Load POST body template from linked JSON file and fill {{{geometry}}}
body_url = stats_link.extra_fields[&quot;body&quot;]
body_template_str = requests.get(body_url).text
# Replace the placeholder with the actual JSON object text
body_filled_str = body_template_str.replace(
    &quot;{{{polygon}}}&quot;,
    json.dumps(geometry_geojson)
)

# Now parse into a Python dict
body_filled = json.loads(body_filled_str)

# Send the POST request
response = requests.post(stats_link.target, json=body_filled)
response.raise_for_status()
data = response.json()

# Extract times and median values
times = [entry[&quot;time&quot;] for entry in data[&quot;result&quot;]]
# Convert to datetime
times_dt = [datetime.fromisoformat(t.replace(&quot;Z&quot;, &quot;+00:00&quot;)) for t in times]
medians = [entry[&quot;median&quot;] for entry in data[&quot;result&quot;]]

# Plot as a time series
fig, ax = plt.subplots(figsize=(10, 5))
ax.plot(times_dt, medians, marker=&quot;o&quot;)

ax.set_title(&quot;SMOS Ocean Salinity Median Values&quot;)
ax.set_xlabel(&quot;Time&quot;)
ax.set_ylabel(&quot;Median Value Salinity (ppt)&quot;)

# Format the x-axis dates
ax.xaxis.set_major_locator(mdates.MonthLocator(interval=1))  # one tick per month
ax.xaxis.set_major_formatter(mdates.DateFormatter(&#x27;%Y-%m&#x27;))

plt.xticks(rotation=45, ha=&quot;right&quot;)
plt.tight_layout()
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="oBKJmOLrBRycEJTUziwFz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Statistics link https://api.earthsystemdatalab.net/api/timeseries/smos-os/SSS_corr?aggMethods=median
</span></code></pre></div></div><div data-name="safe-output-image"><img src="/eodashboard-notebooks/build/751002775fa2456776ee10981658b412.png" alt="&lt;Figure size 1000x500 with 1 Axes&gt;"/></div></div></div><div class="myst-backmatter-parts"></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/eodashboard-notebooks/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-G62B6HZR.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/root-PMP5BIHC.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-IX5KPAHP.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/routes/$-5ZLZ2O3Y.js"/><script>window.__remixContext = {"url":"/notebooks/eodashboard-stac-access/eodashboard-stac-access","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true,"style":"/eodashboard-notebooks/build/custom-372de37690cfb47f22816bb0c23eb657.css"},"nav":[],"actions":[],"projects":[{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Group1","level":2},{"title":"2025 Bi DS EO Dashboard","level":3},{"slug":"external-notebooks.group1.2025-bids-eodashboard.readme","title":"2025-BiDS-EODashboard","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebook","level":4},{"slug":"external-notebooks.group1.2025-bids-eodashboard.notebook.urban-health-and-megacities","title":"URBAN HEALTH AND MEGACITIES: THE CASE OF NEW DELHI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/header-efdd7d7042b27d54684a1811fc755d02.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.oceanographic-patterns-clustering","title":"K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallangenotebook-team-5-challenge-3-timeserie","title":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Eodashboard STAC Access","level":2},{"slug":"notebooks.eodashboard-stac-access.eodashboard-stac-access","title":"EODashboard STAC access examples","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Monitoring socio-economic activities with nighttime light maps","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1d318eb5521a50ad6b7e4f73355e792b.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/eodashboard-notebooks"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true,"style":"/eodashboard-notebooks/build/custom-372de37690cfb47f22816bb0c23eb657.css"},"nav":[],"actions":[],"projects":[{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Group1","level":2},{"title":"2025 Bi DS EO Dashboard","level":3},{"slug":"external-notebooks.group1.2025-bids-eodashboard.readme","title":"2025-BiDS-EODashboard","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebook","level":4},{"slug":"external-notebooks.group1.2025-bids-eodashboard.notebook.urban-health-and-megacities","title":"URBAN HEALTH AND MEGACITIES: THE CASE OF NEW DELHI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/header-efdd7d7042b27d54684a1811fc755d02.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.oceanographic-patterns-clustering","title":"K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallangenotebook-team-5-challenge-3-timeserie","title":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Eodashboard STAC Access","level":2},{"slug":"notebooks.eodashboard-stac-access.eodashboard-stac-access","title":"EODashboard STAC access examples","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Monitoring socio-economic activities with nighttime light maps","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1d318eb5521a50ad6b7e4f73355e792b.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}]},"page":{"version":3,"kind":"Notebook","sha256":"9c0825cf8c5b91c44b0a0a330540c4205b8041fd0071cfe98e7c84d7d89f0028","slug":"notebooks.eodashboard-stac-access.eodashboard-stac-access","location":"/notebooks/eodashboard_STAC_access/eodashboard_STAC_access.ipynb","dependencies":[],"frontmatter":{"title":"EODashboard STAC access examples","thumbnail":"/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"eodashboard-stac-conda-forge","language":"python"},"github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","subject":"Notebook examples","numbering":{"title":{"offset":2}},"source_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/blob/main/notebooks/eodashboard_STAC_access/eodashboard_STAC_access.ipynb","edit_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/edit/main/notebooks/eodashboard_STAC_access/eodashboard_STAC_access.ipynb","exports":[{"format":"ipynb","filename":"eodashboard_STAC_access.ipynb","url":"/eodashboard-notebooks/build/eodashboard_STAC_acc-801f995642151820367ccef0fbb3b683.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EODashboard STAC access examples","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZCX0J1yuN4"}],"identifier":"eodashboard-stac-access-examples","label":"EODashboard STAC access examples","html_id":"eodashboard-stac-access-examples","implicit":true,"key":"DZK4m35o5K"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"http://eodashboard.org","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"eodashboard.org","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"T1DBqO5n7j"}],"urlSource":"http://eodashboard.org","key":"VYBit1xDoa"},{"type":"text","value":" uses a standard static STAC catalog","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xG3ND0eKIx"}],"key":"eCS9jikn0w"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This example notebook outlines","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"XoauZNvHUn"}],"key":"ba7zEC4w20"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"accessing eodashboard STAC catalog","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"m1js7OMtTi"}],"key":"hu8Agtnke2"}],"key":"lzw7EbetkS"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"discovery of the collections","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pEx761Xcpm"}],"key":"niJJpjMP9u"}],"key":"U6BvGyfXLL"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"checking individual metadata fields","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"edw8AdxfWF"}],"key":"C0NC7USh6X"}],"key":"HpbSfCMaA1"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"browsing through items inside linked GeoParquet storage","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IG7KgJwOT3"}],"key":"sOPNvTgX3L"}],"key":"SKsB0m5OZk"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"showing linked XYZ service on an interactive map for a single date","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sTkiWdeb6E"}],"key":"grB3azXSUK"}],"key":"CzX98ZGEbh"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"time series analysis using referenced statistics endpoint","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"dP0Eb2eXgx"}],"key":"eLXki7GnVg"}],"key":"ZVwRoUtw9o"}],"key":"px1QqHxzvi"}],"key":"b0MxFFPUd5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1: Accessing the EODashboard STAC Catalog","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VwVIhXmy4V"}],"identifier":"step-1-accessing-the-eodashboard-stac-catalog","label":"Step 1: Accessing the EODashboard STAC Catalog","html_id":"step-1-accessing-the-eodashboard-stac-catalog","implicit":true,"key":"ErsvNJngbO"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"inoUwQISET"},{"type":"link","url":"http://eodashboard.org","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"eodashboard.org","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ucp3ohKksQ"}],"urlSource":"http://eodashboard.org","key":"zGxotFDtD8"},{"type":"text","value":" platform provides a publicly accessible STAC catalog.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N0rxg0eFt0"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"giDnV7HjKy"},{"type":"text","value":"In this step, we use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YjlStfGDSZ"},{"type":"inlineCode","value":"pystac","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Zpc0efgWfT"},{"type":"text","value":" library to load the root catalog from the provided URL to explore provided collections.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kDEdK6MSpm"}],"key":"EX6teawUJO"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"This root catalog serves as the entry point and provides metadata and links to collections and subcatalogs.\nWe’ll inspect the catalog description, and check how many child collections are directly linked.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KNi4TOHeXM"}],"key":"YfNg2Bvo2p"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Structure","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"yM0aoFgQeM"}],"identifier":"structure","label":"Structure","html_id":"structure","implicit":true,"key":"CdOw5JzISl"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"eodash organizes its data in a two-level STAC structure:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"c7m1gC68cg"}],"key":"YvoDLv4BVm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The top level consists of ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"KA9tiE3zKx"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"“indicators”","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"h0ELD3oP7B"}],"key":"vQYeJX8J1r"},{"type":"text","value":", represented as STAC ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"gBLOmgQkOG"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"collections","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"wQGciluPFe"}],"key":"vAq0GZwdgD"},{"type":"text","value":". Each indicator describes a derived environmental variable or theme (e.g. “SMOS Ocean Salinity”).","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"vbO8fwH5mn"}],"key":"a7OivenbzV"}],"key":"bjeOKlKBgE"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Each indicator then groups one or more ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"yw1v2ymIar"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"sub-collections","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"KFNogftFET"}],"key":"IZQs3UpygO"},{"type":"text","value":", represented also as STAC ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ohiEbCRqkL"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"collections","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"CScQMSAHCF"}],"key":"jg2cvWazyV"},{"type":"text","value":". They group the actual datasets contributing to the indicator and each subcollection is shown as separate layer in the eodash client interface.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"y1l38IbpEU"}],"key":"OOzosegNmI"}],"key":"t0l7fxmgdj"}],"key":"TOsCpDYGtM"}],"key":"PPTJOh70kc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Step 1: Access the EODashboard STAC Catalog via PySTAC\n\nfrom pystac import Catalog\n\n# URL to the root STAC catalog (adjust if necessary)\ncatalog_url = \"https://ESA-eodashboards.github.io/eodashboard-catalog/trilateral/catalog.json\"\n\n# Load the catalog\ncatalog = Catalog.from_file(catalog_url)\n\n# Print basic information\nprint(f\"Catalog ID: {catalog.id}\")\nprint(f\"Description: {catalog.description}\")\nindicators = list(catalog.get_children())\n\nprint(f\"Number of child indicators: {len(indicators)}\")","key":"fwLQ9239lO"},{"type":"outputs","id":"LcJ7HKX6QA3SwP6sgn3N8","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Catalog ID: trilateral\nDescription: A Tri-Agency Dashboard by NASA, ESA, JAXA\nNumber of child indicators: 127\n"},"children":[],"key":"BKuZDYUyN0"}],"key":"gXiIW5GGBH"}],"key":"JEPw7naCCo"},{"type":"block","kind":"notebook-content","children":[],"key":"Hu04A8A4yc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2: Discovering and Filtering Indicators","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nw59Hh0pyM"}],"identifier":"step-2-discovering-and-filtering-indicators","label":"Step 2: Discovering and Filtering Indicators","html_id":"step-2-discovering-and-filtering-indicators","implicit":true,"key":"rbLjSCEAAP"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The STAC catalog contains over 100 indicators.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WeTQGlLybN"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KFSFcZbBY1"},{"type":"text","value":"In this step, we retrieve all indicators and filter them to include only those relevant to ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZU4Ia5CNiI"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Soil Moisture and Ocean Salinity satellite (SMOS)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"y8aAR4SKU7"}],"key":"NjoMrXBgwV"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"G9vk403ze1"}],"key":"wqJ5AJtbVV"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"We look for the keyword “SMOS” in the collection’s ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"UHjrWi9JEC"},{"type":"inlineCode","value":"satellite","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uw0W8rPviS"},{"type":"text","value":" metadata field.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aPRyCat6AF"},{"type":"break","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"G6YTSY38Md"},{"type":"text","value":"This helps us isolate datasets derived from or related to ESA’s SMOS mission.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"W5d3DrOHb6"}],"key":"S1hZClb2ql"}],"key":"noXz4NGN2b"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Step 2: Filter indicators related to SMOS\n\n# Filter indicators that mention 'SMOS' in satellite property\nsmos_indicators = [\n    ind for ind in indicators\n    if \"satellite\" in ind.extra_fields and \"SMOS\" in [s.upper() for s in ind.extra_fields[\"satellite\"]]\n]\n\n# Show results\nprint(f\"Found {len(smos_indicators)} SMOS-related collections (strict filter):\")\nfor ind in smos_indicators:\n    print(f\"{ind.id}: {ind.title}\")","key":"PqfAVmUxyx"},{"type":"outputs","id":"JoI1eyLugp29cl2T_fbqk","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Found 14 SMOS-related collections (strict filter):\nRECCAP2_1_AGC_LVOD_amazonia_methods_mean_crop: Methods mean aboveground carbon (CCI RECCAP2)\nRECCAP2_2_AGC_LVOD_amazonia_smooth_max_crop: Smooth max aboveground carbon (CCI RECCAP2)\nRECCAP2_3_AGC_LVOD_amazonia_smooth_mean_crop: Smooth mean aboveground carbon (CCI RECCAP2)\nRECCAP2_4_AGC_LVOD_amazonia_trend_mean_crop: Trend mean aboveground carbon (CCI RECCAP2)\nRECCAP2_5_SF_biomass_growth: Secondary forest growth (CCI RECCAP2)\nRECCAP2_6_deforested_biomass: Deforestation (CCI RECCAP2)\nRECCAP2_7_degraded_biomass: Degradation (CCI RECCAP2)\nRECCAP2_8_edge_biomass_change: Edge biomass change (CCI RECCAP2)\nRECCAP2_9_intact_biomass_change_methods_mean: Methods mean intact biomass change (CCI RECCAP2)\nRECCAP2_10_intact_biomass_change_smooth_max: Smooth max intact biomass change (CCI RECCAP2)\nRECCAP2_11_intact_biomass_change_smooth_mean: Smooth mean intact biomass change (CCI RECCAP2)\nRECCAP2_12_intact_biomass_change_trend_mean: Mean intact biomass change trend (CCI RECCAP2)\nsmos_ocean_salinity: SMOS Ocean Salinity\nsmos_soil_moisture: SMOS Soil Moisture\n"},"children":[],"key":"KUJGfprGds"}],"key":"KSz8q0A4fU"}],"key":"JDXqzZAR99"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: Checking Individual Metadata Fields","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vh82ZxyrJH"}],"identifier":"step-3-checking-individual-metadata-fields","label":"Step 3: Checking Individual Metadata Fields","html_id":"step-3-checking-individual-metadata-fields","implicit":true,"key":"FY8Fv1UgSo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Now that we’ve identified SMOS-related indicators, we’ll examine one specific indicator in detail:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QLnjwbeJbC"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"R1yRVWIsQu"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"smos_ocean_salinity","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"n027oq6MMn"}],"key":"ahfkpNsbUc"},{"type":"text","value":", which shows the sea surface salinity globally acquired by the SMOS mission.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tDNjHyKBtc"}],"key":"tLTsz7zfdt"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We’ll print out the main metadata fields, including:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"rVBQxbD4Rz"}],"key":"nAqXXARNAE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Basic identification (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Uv5wjqlgsh"},{"type":"inlineCode","value":"title","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JKNNMYnGMK"},{"type":"text","value":", ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JQ1dai4ZVP"},{"type":"inlineCode","value":"description","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uXtxoVJ1DO"},{"type":"text","value":")","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"HpI4ERtb7p"}],"key":"ZbzM8LBcM2"}],"key":"Es5fZ3l1bU"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Spatial and temporal extent","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"IycCZnxMIx"}],"key":"UYWb9NK4lw"}],"key":"NHlc5alE5H"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Licensing and providers","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IfRAmSzwUM"}],"key":"HfwbBB9N4a"}],"key":"xiG5zGlh7P"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Custom fields such as ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Myp9mmpVc7"},{"type":"inlineCode","value":"satellite","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"xpfc2Ae21e"},{"type":"text","value":", ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"z3XsrcAhHO"},{"type":"inlineCode","value":"region","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"cN7ST3xSax"},{"type":"text","value":", and ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"DXOK4adNoD"},{"type":"inlineCode","value":"data_source","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"k9zs78tiqa"},{"type":"text","value":" if available","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Jrnp4MsKTQ"}],"key":"KZJGCkJpxW"}],"key":"jUTjNnl0xP"}],"key":"YNncyVGV4D"}],"key":"LFuFm0nI8q"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"indicator = next(ind for ind in indicators if ind.id == \"smos_ocean_salinity\") \n# Print basic metadata\nprint(f\"Title: {indicator.title}\")\nprint(f\"License: {indicator.license}\")\nprint(f\"Temporal Extent: {indicator.extent.temporal.to_dict()}\")\nprint(f\"Spatial Extent (bbox): {indicator.extent.spatial.bboxes}\")\nprint(\"-----------------------------------------------\")\nprint(f\"Description: {indicator.description}\")","key":"n4FKablBRU"},{"type":"outputs","id":"5bHhpH5gaM6_WPmq4fWzJ","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Title: SMOS Ocean Salinity\nLicense: other\nTemporal Extent: {'interval': [['2023-01-04T00:00:00Z', '2023-12-27T00:00:00Z']]}\nSpatial Extent (bbox): [[-180.0, -88.59375, 180.0, 88.59375], [-180.0, -88.59375, 180.0, 88.59375]]\n-----------------------------------------------\nDescription: ## Ocean Salinity\n\nThis indicator shows the sea surface salinity globally acquired by the ESA Earth Explorer [Soil Moisture and Ocean Salinity (SMOS) mission](https://earth.esa.int/eogateway/missions/smos/description). Ocean currents are driven by temperature and salinity variations in the seawater and Understanding ocean salinity's annual and inter-annual variability are crucial in understanding the role of the ocean in the climate system. Ocean circulation is mainly driven by the water and heat flux through the atmosphere-ocean interface, but salinity is also fundamental in determining ocean density and hence thermohaline circulation. \n\nThis dataset is provided by the **Euro Data Cube**'s [SMOS Level-2C Datacube Service](https://collections.eurodatacube.com/smos-datacube/readme.html) offered by Brockmann Consult. The SMOS data cube service is implemented using the [xcube-smos datastore](https://github.com/xcube-dev/xcube-smos), which is available with the permissive MIT license.   \n\n### Dataset description\n-  Data is acquired by the sensor onboard SMOS, the [Microwave Imaging Radiometer with Aperture Synthesis (MIRAS)](https://earth.esa.int/eogateway/instruments/miras). MIRAS creates images of radiation emitted in the microwave L-band (1.4 GHz), by measuring changes in the salinity of seawater by observing variations in the natural microwave emission coming up off the surface of the ocean.\n-  The Level 2 Ocean Salinity (OS) product comprises sea surface salinity measurements geo-located in an equal-area (grid system ISEA 4H9).\n-  Spatial resolution: ~40 km (varies due to the SMOS interferometric imaging technique)\n\n### Applications\nOcean salinity can be used for various applications, including ocean circulation, climate monitoring and water management.\n\n### Read more\n\n* [SMOS L1 and L2 Science data](https://earth.esa.int/eogateway/catalog/smos-science-products)\n* [SMOS Datacube Service - Euro Data Cube](https://collections.eurodatacube.com/smos-datacube/)\n* [xcube SMOS Python Package](https://xcube-dev.github.io/xcube-smos/)\n* [Notebooks for xcube SMOS store](https://github.com/xcube-dev/xcube-smos/tree/main/notebooks)\n\n"},"children":[],"key":"LmcyrIUR87"}],"key":"HWR5p7rseE"}],"key":"NXMXj1v4Oi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4: Navigating the Indicator and Dataset Hierarchy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wR04mLq7tt"}],"identifier":"step-4-navigating-the-indicator-and-dataset-hierarchy","label":"Step 4: Navigating the Indicator and Dataset Hierarchy","html_id":"step-4-navigating-the-indicator-and-dataset-hierarchy","implicit":true,"key":"OIPXsCe1gI"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"So far, we’ve explored the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"AF26qWWC3A"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"indicator STAC Collection","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Ctq7Wn9KAY"}],"key":"hGhDQ7wdBL"},{"type":"text","value":" ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"zuDbHybi7b"},{"type":"inlineCode","value":"smos_ocean_salinity","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"jdOklH5lfA"},{"type":"text","value":" as explained in the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vsoA1QjJol"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Step 1","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PSEjD7AiM2"}],"key":"h9v6pXIkqW"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Qmns3LLmKa"}],"key":"MoNOhVXS5E"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"To access the actual data items on a ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ggzJT5ivZb"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"subcollection STAC Collection","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"M5VWgIKARL"}],"key":"gsNpjJwo5y"},{"type":"text","value":" we now need to look at its ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"NLO1I2mIms"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"child collections","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"j0Pu6GDub1"}],"key":"CkhZyaMyyh"},{"type":"text","value":", which contain the STAC Items and assets.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zaXV4xXBGG"}],"key":"KBUK9UVQZX"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In this step, we identify and load those child collections so we can continue our exploration at the data level.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ag7XUaipZr"}],"key":"aGR5ChmjFb"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"In our case, the indicator has just one collection - itself so it looks easy.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"o0dC5mK5l8"}],"key":"DcgP1R2Alz"}],"key":"ceM54heNe9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Get child links that are STAC collections\nchild_collections = []\nfor link in indicator.get_links(\"child\"):\n    if link.rel == \"child\":\n        child_collection = link.resolve_stac_object().target\n        child_collections.append(child_collection)\n\n# Show child collection IDs and titles\nprint(f\"{len(child_collections)} child collections found under 'smos_ocean_salinity':\")\nfor col in child_collections:\n    print(f\"- {col.id}: {col.title}\")","key":"wRUqAp5myj"},{"type":"outputs","id":"x-EjhOzs5JQ_lccM_oyNo","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"1 child collections found under 'smos_ocean_salinity':\n- smos_ocean_salinity: SMOS Ocean Salinity\n"},"children":[],"key":"JusiBkr1Rl"}],"key":"DWaiUyDG8z"}],"key":"ObqEvCzyR8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 5: Accessing and Browsing STAC Items via GeoParquet","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fSH87z3Ng4"}],"identifier":"step-5-accessing-and-browsing-stac-items-via-geoparquet","label":"Step 5: Accessing and Browsing STAC Items via GeoParquet","html_id":"step-5-accessing-and-browsing-stac-items-via-geoparquet","implicit":true,"key":"sG4kH2ZfKr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"In eodashboard, each child collection under an indicator may reference a bulk listing of STAC Items using a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"llwMARnKtA"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"GeoParquet","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RudVe7S8F0"}],"key":"i3RQ91Pr23"},{"type":"text","value":" file for performance reasons during the catalog creation.\nThis file acts as a storage for the STAC Items associated with that dataset and can be efficiently read and queried.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"C1bLXzT79q"}],"key":"QohMlLGF73"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"We identify this asset by checking for an ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"YlzDpkJN89"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Asset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"oQSZxLiiLE"}],"key":"FtBWFier1Z"},{"type":"text","value":" with a ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MZxlVer8vZ"},{"type":"inlineCode","value":"roles","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uuLSDT4FUA"},{"type":"text","value":" array containing ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uWPHCd9f99"},{"type":"inlineCode","value":"\"collection-mirror\"","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lWlcar8w8J"},{"type":"text","value":" which is eodash specific way of distinction of the GeoParquet.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AIESPopCtg"}],"key":"i1ymWl4bzM"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Once found, we load it and use ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qvK2vU2Br6"},{"type":"inlineCode","value":"pyarrow.parquet","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uAkCnOI0SU"},{"type":"text","value":" to load the GeoParquet file and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ssoU6knvrx"},{"type":"inlineCode","value":"stac_geoparquet","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"m4HKYkw1sz"},{"type":"text","value":" to convert it back to STAC Item structure and display their contents.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"EmetJx9sso"}],"key":"xKLH4Bu8Tq"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"This enables fast, local-style exploration of all STAC items in the dataset, including geometry, timestamp, and links to assets like XYZ tiles or statistics endpoints.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"uJNczmgI98"}],"key":"blWzZdon8O"}],"key":"lWB98nBuGV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nimport pyarrow.parquet as pq\nimport io\nimport stac_geoparquet\n\ngeoparquet_asset = None\nfor key, asset in child_collection.assets.items():\n    # specific way how eodash labels the asset with a geoparquet of items\n    if \"collection-mirror\" in asset.roles:\n        geoparquet_asset = asset\n        break\n\nif geoparquet_asset is None:\n    raise ValueError(\"No asset with role 'collection-mirror' found in the child collection.\")\n# eodash catalog links the asset href with relative path, we need to get absolute to retrieve it\nparquet_url = geoparquet_asset.get_absolute_href()\nprint(f\"Reading remote GeoParquet from: {parquet_url}\")\n\nresponse = requests.get(parquet_url)\nif response.status_code != 200:\n    print(f\"Failed to download parquet file from {parquet_url}\")\n# Read the table with pyarrow\ntable = pq.read_table(io.BytesIO(response.content))\n\n# Convert to a list of STAC dictionaries\nitems = list(stac_geoparquet.arrow.stac_table_to_items(table))\nprint(f\"In total {len(items)} items were retrieved.\")\nprint(f\"Submission {len(items)} items were retrieved.\")\n# show example of metadata of one item\nitem = items[0]\nprint(\"-------------------------------------\")\nprint(f\"Datetime: {item['properties'].get('datetime')}\")\nprint(f\"BBox: {item['bbox']}\")\nprint(f\"Number of service links: {len(item['links'])}\")\n","key":"ewy7imjGvY"},{"type":"outputs","id":"VBQTQxC-OzvBQ3eOg-oHt","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Reading remote GeoParquet from: https://ESA-eodashboards.github.io/eodashboard-catalog/trilateral/smos_ocean_salinity/smos_ocean_salinity/items.parquet\nIn total 52 items were retrieved.\nSubmission 52 items were retrieved.\n-------------------------------------\nDatetime: 2023-01-04T00:00:00.000000Z\nBBox: [-180.0, -88.59375, 180.0, 88.59375]\nNumber of service links: 1\n"},"children":[],"key":"u8DcNi1BjE"}],"key":"fc3eOjAoY9"}],"key":"zzfOHCtgYH"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 6. Visualize Linked XYZ Tile Layer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RgqrETrpDM"}],"identifier":"step-6-visualize-linked-xyz-tile-layer","label":"Step 6. Visualize Linked XYZ Tile Layer","html_id":"step-6-visualize-linked-xyz-tile-layer","implicit":true,"key":"yuBDTMHnII"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"For each item, eodash links the suggested rendering of the visualization layer, which we can display using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lG4iOt2I6X"},{"type":"inlineCode","value":"folium","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Nb26Dq7Iud"},{"type":"text","value":" on the map.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mNEAgbUdC8"}],"key":"riKEHstrdC"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We selected the first Item containing data for 1.4.2023 and add the tile layer with a eox cloudless background..","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Kdah5X1iQ0"}],"key":"x5gPxmIDk2"}],"key":"l3YdEMbJKM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import folium\n\n# Find the xyz tile link for 1.4.2023\nxyz_link = next((l for l in item[\"links\"] if l[\"rel\"] == \"xyz\"), None)\nprint(f\"Actual link is {xyz_link}\")\nm = folium.Map(location=[45, 10], zoom_start=4, tiles=None)\nif xyz_link:\n    folium.TileLayer(\n        tiles=xyz_link[\"href\"],\n        attr='Rendering of SMOS datacube provided by xcube-server operated by Brockmann Consult GmbH',\n        name=xyz_link.get(\"title\", \"Tile Layer\"),\n        overlay=True,\n        control=True\n    ).add_to(m)\n\n# Add EOxCloudless layer\nfolium.TileLayer(\n    tiles=\"https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2024_3857/default/GoogleMapsCompatible/{z}/{y}/{x}.jpg\",\n    attr='\u003ca href=\"https://maps.eox.at\"\u003eOverlay\u003c/a\u003e { Data \u0026copy; \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors, Rendering \u0026copy; \u003ca href=\"https://eox.at\"\u003eEOX\u003c/a\u003e and \u003ca href=\"https://github.com/mapserver/basemaps\"\u003eMapServer\u003c/a\u003e }',\n    name=\"EOxCloudless 2024\",\n    overlay=False,\n    control=True\n).add_to(m)\n\nfolium.LayerControl().add_to(m)\nm","key":"KAg9e64ewy"},{"type":"outputs","id":"TW-Jn_4f_BWgESwGyIkC5","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Actual link is {'href': 'https://api.earthsystemdatalab.net/api/tiles/smos-os/SSS_corr/{z}/{y}/{x}?crs=EPSG:3857\u0026time=2023-01-04T00:00:00Z\u0026vmin=0\u0026vmax=50\u0026cbar=jet', 'rel': 'xyz', 'title': 'xcube tiles', 'type': 'image/png'}\n"},"children":[],"key":"YKLiTnOCsA"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content":"\u003cdiv style=\"width:100%;\"\u003e\u003cdiv style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"\u003e\u003cspan style=\"color:#565656\"\u003eMake this Notebook Trusted to load map: File -\u003e Trust Notebook\u003c/span\u003e\u003ciframe srcdoc=\"\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html\u0026gt;\n\u0026lt;head\u0026gt;\n    \n    \u0026lt;meta http-equiv=\u0026quot;content-type\u0026quot; content=\u0026quot;text/html; charset=UTF-8\u0026quot; /\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://code.jquery.com/jquery-3.7.1.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;script src=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css\u0026quot;/\u0026gt;\n    \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css\u0026quot;/\u0026gt;\n    \n            \u0026lt;meta name=\u0026quot;viewport\u0026quot; content=\u0026quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no\u0026quot; /\u0026gt;\n            \u0026lt;style\u0026gt;\n                #map_a26eabbe1a83bd64022fbca20c853cf0 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            \u0026lt;/style\u0026gt;\n\n            \u0026lt;style\u0026gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            \u0026lt;/style\u0026gt;\n\n            \u0026lt;style\u0026gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            \u0026lt;/style\u0026gt;\n\n            \u0026lt;script\u0026gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            \u0026lt;/script\u0026gt;\n\n        \n\u0026lt;/head\u0026gt;\n\u0026lt;body\u0026gt;\n    \n    \n            \u0026lt;div class=\u0026quot;folium-map\u0026quot; id=\u0026quot;map_a26eabbe1a83bd64022fbca20c853cf0\u0026quot; \u0026gt;\u0026lt;/div\u0026gt;\n        \n\u0026lt;/body\u0026gt;\n\u0026lt;script\u0026gt;\n    \n    \n            var map_a26eabbe1a83bd64022fbca20c853cf0 = L.map(\n                \u0026quot;map_a26eabbe1a83bd64022fbca20c853cf0\u0026quot;,\n                {\n                    center: [45.0, 10.0],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  \u0026quot;zoom\u0026quot;: 4,\n  \u0026quot;zoomControl\u0026quot;: true,\n  \u0026quot;preferCanvas\u0026quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_40e61b0b1ef261965f21a673d12e7044 = L.tileLayer(\n                \u0026quot;https://api.earthsystemdatalab.net/api/tiles/smos-os/SSS_corr/{z}/{y}/{x}?crs=EPSG:3857\\u0026time=2023-01-04T00:00:00Z\\u0026vmin=0\\u0026vmax=50\\u0026cbar=jet\u0026quot;,\n                {\n  \u0026quot;minZoom\u0026quot;: 0,\n  \u0026quot;maxZoom\u0026quot;: 18,\n  \u0026quot;maxNativeZoom\u0026quot;: 18,\n  \u0026quot;noWrap\u0026quot;: false,\n  \u0026quot;attribution\u0026quot;: \u0026quot;Rendering of SMOS datacube provided by xcube-server operated by Brockmann Consult GmbH\u0026quot;,\n  \u0026quot;subdomains\u0026quot;: \u0026quot;abc\u0026quot;,\n  \u0026quot;detectRetina\u0026quot;: false,\n  \u0026quot;tms\u0026quot;: false,\n  \u0026quot;opacity\u0026quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_40e61b0b1ef261965f21a673d12e7044.addTo(map_a26eabbe1a83bd64022fbca20c853cf0);\n        \n    \n            var tile_layer_c99752973ac84b7941ee846fcef27e68 = L.tileLayer(\n                \u0026quot;https://tiles.maps.eox.at/wmts/1.0.0/s2cloudless-2024_3857/default/GoogleMapsCompatible/{z}/{y}/{x}.jpg\u0026quot;,\n                {\n  \u0026quot;minZoom\u0026quot;: 0,\n  \u0026quot;maxZoom\u0026quot;: 18,\n  \u0026quot;maxNativeZoom\u0026quot;: 18,\n  \u0026quot;noWrap\u0026quot;: false,\n  \u0026quot;attribution\u0026quot;: \u0026quot;\\u003ca href=\\\u0026quot;https://maps.eox.at\\\u0026quot;\\u003eOverlay\\u003c/a\\u003e { Data \\u0026copy; \\u003ca href=\\\u0026quot;http://www.openstreetmap.org/copyright\\\u0026quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors, Rendering \\u0026copy; \\u003ca href=\\\u0026quot;https://eox.at\\\u0026quot;\\u003eEOX\\u003c/a\\u003e and \\u003ca href=\\\u0026quot;https://github.com/mapserver/basemaps\\\u0026quot;\\u003eMapServer\\u003c/a\\u003e }\u0026quot;,\n  \u0026quot;subdomains\u0026quot;: \u0026quot;abc\u0026quot;,\n  \u0026quot;detectRetina\u0026quot;: false,\n  \u0026quot;tms\u0026quot;: false,\n  \u0026quot;opacity\u0026quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_c99752973ac84b7941ee846fcef27e68.addTo(map_a26eabbe1a83bd64022fbca20c853cf0);\n        \n    \n            var layer_control_e17e273b4763687b4674382cbf46aeac_layers = {\n                base_layers : {\n                    \u0026quot;EOxCloudless 2024\u0026quot; : tile_layer_c99752973ac84b7941ee846fcef27e68,\n                },\n                overlays :  {\n                    \u0026quot;xcube tiles\u0026quot; : tile_layer_40e61b0b1ef261965f21a673d12e7044,\n                },\n            };\n            let layer_control_e17e273b4763687b4674382cbf46aeac = L.control.layers(\n                layer_control_e17e273b4763687b4674382cbf46aeac_layers.base_layers,\n                layer_control_e17e273b4763687b4674382cbf46aeac_layers.overlays,\n                {\n  \u0026quot;position\u0026quot;: \u0026quot;topright\u0026quot;,\n  \u0026quot;collapsed\u0026quot;: true,\n  \u0026quot;autoZIndex\u0026quot;: true,\n}\n            ).addTo(map_a26eabbe1a83bd64022fbca20c853cf0);\n\n        \n\u0026lt;/script\u0026gt;\n\u0026lt;/html\u0026gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cfolium.folium.Map at 0x7e80a46a3380\u003e","content_type":"text/plain"}}},"children":[],"key":"F2yXd7VaPE"}],"key":"A5hiDT8NaH"}],"key":"vbl3Cf6o0i"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 7. Create the legend for the provided layer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vJWP3SL1tg"}],"identifier":"step-7-create-the-legend-for-the-provided-layer","label":"Step 7. Create the legend for the provided layer","html_id":"step-7-create-the-legend-for-the-provided-layer","implicit":true,"key":"p95phZ73Rx"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When viewing geospatial datasets, especially those using color mapped imagery such as the SMOS ocean salinity layer, the colors themselves have no meaning without a reference.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dxzvs8jwux"}],"key":"Fxage7y0oU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In our case, the SMOS layer visualization uses the jet colormap scaled from 0 to 50 as seen in the XYZ link from metadata, which corresponds to sea surface salinity in parts per 1000 (ppt).","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CgteEKf5q1"}],"key":"p8j16GywRm"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Including a legend ensures that viewers can correctly interpret the scientific meaning behind the visual patterns.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UJCuxEZX1j"}],"key":"bXgHceh3fE"}],"key":"VHf9UUwg9z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\nimport matplotlib.pyplot as plt\n\nfig, ax = plt.subplots(figsize=(6, 1))\nfig.subplots_adjust(bottom=0.5)\n\n# Create a colorbar image from the \"jet\" colormap\ncmap = plt.get_cmap('jet')\nnorm = plt.Normalize(vmin=0, vmax=50)\n\ncb = plt.colorbar(\n    plt.cm.ScalarMappable(norm=norm, cmap=cmap),\n    cax=ax,\n    orientation='horizontal'\n)\n\ncb.set_label(\"Sea Surface Salinity (ppt)\")\nplt.show()","key":"mV6kqx0jiY"},{"type":"outputs","id":"Ili-opPdrjC1P_pmOntnw","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"6d736eb524cb2beb50d4992620081ae2","path":"/eodashboard-notebooks/build/6d736eb524cb2beb50d4992620081ae2.png"},"text/plain":{"content":"\u003cFigure size 600x100 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"EWF2FxdUCD"}],"key":"ExctoOdF96"}],"key":"eiYgxnEyp7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 8. Fetching and Plotting Time Series Statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VlKWaFx6G4"}],"identifier":"step-8-fetching-and-plotting-time-series-statistics","label":"Step 8. Fetching and Plotting Time Series Statistics","html_id":"step-8-fetching-and-plotting-time-series-statistics","implicit":true,"key":"r6SKMoYmTY"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In this step, we access the statistics service linked from the indicator level STAC collection.\nWe sent a POST request with a specified geographic polygon to retrieve median values of the satellite data over time.\nThe response provides a time series which we then visualized using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wiHxr6TwKc"},{"type":"inlineCode","value":"Matplotlib","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MjibhlV7Iq"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kMmvzJIgDf"}],"key":"Peu8u3NYHu"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"To ensure the date labels on the x-axis are readable and well-formatted, we converted the time strings to datetime objects and used Matplotlib’s date locators and formatters.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aF38fFXveg"}],"key":"mMydUH3WQy"}],"key":"MCmMJSdm4I"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nimport json\nimport matplotlib.pyplot as plt\nfrom shapely.geometry import Polygon, mapping\nimport matplotlib.dates as mdates\nfrom datetime import datetime\n\n# Find the statistics link in the indicator-level STAC Collection\nstats_link = next(\n    link for link in indicator.links\n    if link.rel == \"service\" and link.media_type == \"application/json\"\n)\nprint(f\"Statistics link {stats_link.target}\")\n# Prepare the polygon geometry (example: small box in the Mediterranean sea south of France)\npolygon_geom = Polygon([\n    (4.35, 40.55),\n    (4.35, 42.35),\n    (7.2, 42.35),\n    (7.2, 40.55),\n    (4.35, 40.55)\n])\n\ngeometry_geojson = mapping(polygon_geom)\n\n# Load POST body template from linked JSON file and fill {{{geometry}}}\nbody_url = stats_link.extra_fields[\"body\"]\nbody_template_str = requests.get(body_url).text\n# Replace the placeholder with the actual JSON object text\nbody_filled_str = body_template_str.replace(\n    \"{{{polygon}}}\",\n    json.dumps(geometry_geojson)\n)\n\n# Now parse into a Python dict\nbody_filled = json.loads(body_filled_str)\n\n# Send the POST request\nresponse = requests.post(stats_link.target, json=body_filled)\nresponse.raise_for_status()\ndata = response.json()\n\n# Extract times and median values\ntimes = [entry[\"time\"] for entry in data[\"result\"]]\n# Convert to datetime\ntimes_dt = [datetime.fromisoformat(t.replace(\"Z\", \"+00:00\")) for t in times]\nmedians = [entry[\"median\"] for entry in data[\"result\"]]\n\n# Plot as a time series\nfig, ax = plt.subplots(figsize=(10, 5))\nax.plot(times_dt, medians, marker=\"o\")\n\nax.set_title(\"SMOS Ocean Salinity Median Values\")\nax.set_xlabel(\"Time\")\nax.set_ylabel(\"Median Value Salinity (ppt)\")\n\n# Format the x-axis dates\nax.xaxis.set_major_locator(mdates.MonthLocator(interval=1))  # one tick per month\nax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m'))\n\nplt.xticks(rotation=45, ha=\"right\")\nplt.tight_layout()\nplt.show()","key":"YcEEnkwpQk"},{"type":"outputs","id":"oBKJmOLrBRycEJTUziwFz","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Statistics link https://api.earthsystemdatalab.net/api/timeseries/smos-os/SSS_corr?aggMethods=median\n"},"children":[],"key":"bzWbaJOPUA"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"751002775fa2456776ee10981658b412","path":"/eodashboard-notebooks/build/751002775fa2456776ee10981658b412.png"},"text/plain":{"content":"\u003cFigure size 1000x500 with 1 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"ygtKXzaMKf"}],"key":"lwGCPmLSCb"}],"key":"QKuZoNKcVg"}],"key":"dkpvkbYFo0"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Using the NASA VEDA EOAPI","url":"/notebooks/veda-api-bids-2023","group":"Notebooks"},"next":{"title":"Monitoring socio-economic activities with nighttime light maps","url":"/notebooks/nightlights-notebook/night-lights-blending","group":"Nightlights Notebook"}}},"domain":"http://localhost:3000"},"project":{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Group1","level":2},{"title":"2025 Bi DS EO Dashboard","level":3},{"slug":"external-notebooks.group1.2025-bids-eodashboard.readme","title":"2025-BiDS-EODashboard","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebook","level":4},{"slug":"external-notebooks.group1.2025-bids-eodashboard.notebook.urban-health-and-megacities","title":"URBAN HEALTH AND MEGACITIES: THE CASE OF NEW DELHI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/header-efdd7d7042b27d54684a1811fc755d02.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.oceanographic-patterns-clustering","title":"K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallangenotebook-team-5-challenge-3-timeserie","title":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Eodashboard STAC Access","level":2},{"slug":"notebooks.eodashboard-stac-access.eodashboard-stac-access","title":"EODashboard STAC access examples","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/ff5b0d0faa9a9d99644d137afe5bbd92.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Monitoring socio-economic activities with nighttime light maps","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1d318eb5521a50ad6b7e4f73355e792b.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/eodashboard-notebooks/build/manifest-54BD5942.js";
import * as route0 from "/eodashboard-notebooks/build/root-PMP5BIHC.js";
import * as route1 from "/eodashboard-notebooks/build/routes/$-5ZLZ2O3Y.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/eodashboard-notebooks/build/entry.client-PCJPW7TK.js");</script></body></html>