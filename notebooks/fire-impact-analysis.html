<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Evaluation of Fire Impact on Populated Areas on a European Site - EO Dashboard Notebooks</title><meta property="og:title" content="Evaluation of Fire Impact on Populated Areas on a European Site - EO Dashboard Notebooks"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of examples relevant to the EO Dashboard project"/><meta property="og:description" content="Collection of examples relevant to the EO Dashboard project"/><meta name="keywords" content=""/><meta name="image" content="/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg"/><meta property="og:image" content="/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg"/><link rel="stylesheet" href="/eodashboard-notebooks/build/_assets/app-SP33RAUV.css"/><link rel="stylesheet" href="/eodashboard-notebooks/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/eodashboard-notebooks/favicon.ico"/><link rel="stylesheet" href="/eodashboard-notebooks/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/eodashboard-notebooks/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R74op:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-none pr-2 smallcaps">Notebook examples</div><div class="flex-grow"></div><a href="https://github.com/ESA-eodashboards/eodashboard-notebooks" title="GitHub Repository: ESA-eodashboards/eodashboard-notebooks" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><a href="https://github.com/ESA-eodashboards/eodashboard-notebooks/blob/main/notebooks/Fire_impact_analysis.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8top:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Evaluation of Fire Impact on Populated Areas on a European Site</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="aWNr2Uf4vT" class="relative group/block"><h1 id="evaluation-of-fire-impact-on-populated-areas-on-a-european-site" class="relative group"><span class="heading-text">Evaluation of Fire Impact on Populated Areas on a European Site</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#evaluation-of-fire-impact-on-populated-areas-on-a-european-site" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><h2 id="geo-storytelling-with-race-eo-dashboard-and-the-euro-data-cube" class="relative group"><span class="heading-text">Geo-storytelling with RACE, EO Dashboard and the Euro Data Cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#geo-storytelling-with-race-eo-dashboard-and-the-euro-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="XJhnBGV0Rw" class="relative group/block"><p>This notebook demonstates how to access and analyse data found on the <a target="_blank" rel="noreferrer" href="https://race.esa.int/" class="">Rapid Action for Citizens with Earth Observation</a> (RACE) and <a target="_blank" rel="noreferrer" href="https://eodashboard.org/explore" class="">Earth Observation</a> Dashboard. It uses the EC-JRC’s Global Human Settlement (GHS) Layer which contains global data about the total built-up surface from 1975 to 2030 and was derived from Sentinel2 composite and Landsat imagery. The data is openly available and can be downloaded <a target="_blank" rel="noreferrer" href="https://ghsl.jrc.ec.europa.eu/ghs_buS2023.php" class="">here</a>. It was ingested in EDC and provided as a layer, check out the documentation <a href="https://github.com/eurodatacube/public-collections/pull/309/commits/43388aadd9ace7d0cb1370f8053a37afed402b86" class="italic" target="_blank" rel="noreferrer" data-state="closed">here</a> for further information about the data properties in EDC.
The GHS indicator can be explored on the EO Dashboard by selecting the <a target="_blank" rel="noreferrer" href="https://eodashboard.org/explore?poi=World-GHSBUILT" class="">EXPLORE DATASETS</a> mode.</p></div><div id="y1qpfVf9t0" class="relative group/block"><h2 id="euro-data-cube-edc-platform-presentation" class="relative group"><span class="heading-text">Euro Data Cube - <a target="_blank" rel="noreferrer" href="https://eurodatacube.com/" class="">EDC</a> Platform presentation</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#euro-data-cube-edc-platform-presentation" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="cQxHDfjnqR" class="relative group/block"><img id="ovFb8RSxva" style="margin:0 auto" src="/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg" alt="EuroDataCube.JPG" data-canonical-url="data:image/jpeg;base64,/9j/4AAQSk...CiiigD/9k="/></div><div id="bYzYvh3yOb" class="relative group/block"><h2 id="edc-cloud-optimized-platform-offering" class="relative group"><span class="heading-text">EDC - cloud-optimized platform offering:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#edc-cloud-optimized-platform-offering" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li>Access to EO archives from main all open missions (e.g. Sentinel, Landsat, MODIS, etc.), commercial satellites (PlanetScope, Pleiades, SPOT, WorldView, etc.) as well as Level 3 products (Copernicus Land Monitoring Services, C3S, etc.)</li><li>Analyse, compare and correlate EO data through Xcube and operational tools (Sentinel Hub)</li><li>Manage different data formats and type in a transparent way (raster, vector, COGs, Zarr, etc.)</li><li>Bring and store your own data and algorithm for real-time and batch processing operations</li><li>Computational resources and storage to run Jupyter Notebooks and your deployed Applications within your Kubernetes-powered workspace</li><li>Expose your apps on the EDC marketplace to third-parties and provide easy access to your managed API service to customers</li></ul></div><div id="KZe5M0rSK0" class="relative group/block"><img id="SGigYqDftd" style="margin:0 auto" src="/eodashboard-notebooks/build/8e9d5b69267086b0c67e27f00ff42ad5.jpeg" alt="edc_workflows.JPG" data-canonical-url="data:image/jpeg;base64,/9j/4AAQSk...QAUUUUAf/Z"/></div><div id="yZFRZh5OAa" class="relative group/block"><h2 id="edc-market-place" class="relative group"><span class="heading-text">EDC - <a target="_blank" rel="noreferrer" href="https://eurodatacube.com/marketplace" class="">Market Place</a></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#edc-market-place" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="y5uOkL5bLm" class="relative group/block"><ul><li>Data Products: e.g. <a target="_blank" rel="noreferrer" href="https://www.sentinel-hub.com/" class="">Sentinel Hub</a></li></ul></div><div id="jGMCGX1DEF" class="relative group/block"><ul><li>Platform Services: e.g. <a target="_blank" rel="noreferrer" href="https://eurodatacube.com/marketplace/infra/edc_eoxhub_workspace" class="">EOxHub</a></li></ul></div><div id="GhEGRW5HNu" class="relative group/block"><ul><li>API Services: e.g. <a target="_blank" rel="noreferrer" href="https://eurodatacube.com/marketplace/services/edc_geodb" class="">GeoDB</a>, <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/statistical/" class="">SH-Statistical API</a></li></ul></div><div id="fHj14q7Kub" class="relative group/block"><h1 id="content-of-this-notebook" class="relative group"><span class="heading-text">Content of this notebook:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#content-of-this-notebook" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><ol start="1"><li>Visualizing wildfire events with Sentinel-2 imagery</li><li>Querying data via Statistical API for the chosen Area of Interest</li><li>Transforming the output of the API request into a geoJSON polygon that contains the extent of the built up area in the AOI</li><li>Accessing Sentinel-5p Carbon monoxide data from SentinelHub</li><li>Displaying the time series of the CO concentration over the populated area to evaluate the possible impact of the fire emissions</li></ol><p>This notebook runs with the python environment <code>users-edc-2023.07-01</code> and was prepared by Leah Sturm (University of Trier, Germany).</p></div><div id="XvkNjsoYys" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#import necessary libraries
import os
import numpy as np
import geopandas as gpd
import rasterio
from rasterio.features import shapes
import requests
import geojson
from shapely.geometry import shape
from rasterio.transform import from_origin
import matplotlib.pyplot as plt
from datetime import datetime


# Sentinel Hub requirements
from sentinelhub import (SHConfig, DataCollection, Geometry, BBox, Geometry,
                         SentinelHubRequest, filter_times, bbox_to_dimensions, MimeType, 
                         SentinelHubBYOC, ByocCollection, ByocTile, ByocCollectionAdditionalData,
                         DownloadFailedException, CRS, SentinelHubStatistical)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="W_sz653P8QKWm2gU6_7rj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="OSkWXW4Km9" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Pass Sentinel Hub credentials to SHConfig
config = SHConfig()
config.sh_client_id = os.environ[&quot;SH_CLIENT_ID&quot;]
config.sh_client_secret = os.environ[&quot;SH_CLIENT_SECRET&quot;]

client_id = os.environ[&quot;SH_CLIENT_ID&quot;]
client_secret = os.environ[&quot;SH_CLIENT_SECRET&quot;]


# config</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="us4zvXq8EFPI9bOInO0nG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="rXg5JrmjWU" class="relative group/block"><h2 id="create-a-folder-for-the-session-in-which-all-files-will-be-stored" class="relative group"><span class="heading-text">Create a folder for the session in which all files will be stored</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#create-a-folder-for-the-session-in-which-all-files-will-be-stored" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="p8cOPaO1hH" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get the current date and format it as a string
current_date = datetime.now().strftime(&quot;%Y-%m-%d&quot;)

# Define the folder name and path
folder_name = f&quot;folder_{current_date}&quot;
folder_path = os.path.join(os.getcwd(), folder_name)

# Check if the folder already exists, and create it if not
if not os.path.exists(folder_path):
    os.mkdir(folder_path)
    print(f&quot;Folder &#x27;{folder_name}&#x27; created at: {folder_path}&quot;)
else:
    print(f&quot;Folder &#x27;{folder_name}&#x27; already exists at: {folder_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="J09MDviWNw-QYKwys_hML" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Folder &#x27;folder_2023-10-25&#x27; already exists at: /home/3d76fe8a-ecd3-4736-b462-38f98f1f605e/folder_2023-10-25
</span></code></pre></div></div></div><div id="wSLGflJopg" class="relative group/block"><h1 id="wildfire-impacts-and-carbon-emissions" class="relative group"><span class="heading-text">Wildfire Impacts and Carbon Emissions</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#wildfire-impacts-and-carbon-emissions" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>The wildfire season during the summer of 2022 in Europe was exceptional, marked by a high number of observed fires, a large extent of burned area, and remarkably high atmospheric emissions linked to these fires. According to data from the European Forest Fire Information System (EFFIS), fires were reported in 26 out of the 27 European countries, collectively burning 837,212 hectares. A significant portion of these wildfires happened in July, with Spain, Portugal, France, and Italy experiencing the most damages.</p><p>The selected wildfire incident for this notebook occurred in the Gironde region of southwestern France, near the city of Bordeaux, in 2022. The significant fire event started on July 17, 2022, lasted for two weeks while burning approximately 7,000 hectares of land. Notably, the Copernicus Atmosphere Monitoring Service (CAMS) recorded exceptionally elevated levels of carbon monoxide emissions throughout the duration of this event.</p><p>Related articles about the event and the wildfire occurrence in 2022:</p><ul><li><a target="_blank" rel="noreferrer" href="https://www.esa.int/esearch?q=wildfire+france" class="">European Space Agency</a></li><li><a target="_blank" rel="noreferrer" href="https://joint-research-centre.ec.europa.eu/jrc-news-and-updates/eu-2022-wildfire-season-was-second-worst-record-2023-05-02_en" class="">EU ScienceHub</a></li><li><a target="_blank" rel="noreferrer" href="https://op.europa.eu/en/publication-detail/-/publication/500b8dfa-de5e-11ed-a05c-01aa75ed71a1/language-en" class="">EFFIS</a></li><li><a target="_blank" rel="noreferrer" href="https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years" class="">Copernicus Atmosphere Monitoring Service</a></li><li><a target="_blank" rel="noreferrer" href="https://www.eumetsat.int/summer-2022-exceptional-wildfire-season-europe" class="">EUMETSAT</a></li></ul></div><div id="Zcy0ybF8bV" class="relative group/block"><h1 id="id-1-visualize-wildfire-event-with-sentinel-2" class="relative group"><span class="heading-text">1. Visualize Wildfire Event with Sentinel-2</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-visualize-wildfire-event-with-sentinel-2" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>In this first part we are going to visualize the fire event to get an overview of the location and the occuring emissions. In the following cells we will access Sentinel-2 imagery from <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/" class="">Sentinel Hub</a>. Sentinel Hub is a multi-spectral and multi-temporal big data satellite imagery service, capable of fully automated archiving, real-time processing and distribution of remote sensing data and related EO products. Users can use APIs to retrieve satellite data over their AOI and specific time range from full archives in a matter of seconds. The following cells to access Sentinel-2 data are based on the example notebook “Australian Bushfires” which is available in the <a target="_blank" rel="noreferrer" href="https://eurodatacube.com/marketplace" class="">Euro Data Cube Marketplace</a>.</p><p>To get a first overview of the fire event we are going to look at the true colour image captured on the day of the start of the fire.</p></div><div id="APV0f5t8nO" class="relative group/block"><h2 id="define-area-of-interest" class="relative group"><span class="heading-text">Define Area of Interest</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-area-of-interest" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="K7eiCTm2zg" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">bbox_coords =[
  -1.006524,
  44.318762,
  -0.406214,
  44.586411
]

resolution = 20
Area_of_interest_bbox = BBox(bbox=bbox_coords, crs=CRS.WGS84)
Area_of_interest_size = bbox_to_dimensions(Area_of_interest_bbox, resolution=resolution)

# Bbox EPSG
bbox_epsg = 4326</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="UdNosYot4DpdVU5dCwbnm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="yH4y9d6u6a" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Utilities
import IPython.display
from IPython.display import display, GeoJSON

# Plot the bounding box on a map
IPython.display.GeoJSON(BBox(bbox_coords,crs=bbox_epsg).get_geojson())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="q-xzCALPPTAxP2HCMRJtr" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="U4tLWRskAK" class="relative group/block"><h2 id="access-sentinel-2-data" class="relative group"><span class="heading-text">Access Sentinel-2 data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#access-sentinel-2-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We build the request according to the <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/reference/" class="">API Reference</a>, using the <code>SentinelHubRequest</code> class. Each Process API request also needs an <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/#/Evalscript/V3/README" class="">evalscript</a>.</p><p>The information that we specify in the <code>SentinelHubRequest</code> object is:</p><ul><li>an evalscript,</li><li>a list of input data collections with time interval,</li><li>a format of the response,</li><li>a bounding box and it’s size (size or resolution).</li></ul><p>The evalscript is used to select the appropriate bands. We return the RGB (B04, B03, B02) Sentinel-2 L2A bands.</p></div><div id="iQkML4pmAa" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># define the evalscript 

evalscript_true_color = &quot;&quot;&quot;
    //VERSION=3

    function setup() {
        return {
            input: [{
                bands: [&quot;B02&quot;, &quot;B03&quot;, &quot;B04&quot;]
            }],
            output: {
                bands: 3
            }
        };
    }

    function evaluatePixel(sample) {
        return [sample.B04, sample.B03, sample.B02];
    }
&quot;&quot;&quot;

# we nned to specify the collection and the time interval
# for a list of collections available in the Sentinel Hub visit https://docs.sentinel-hub.com/api/latest/data/ 

request_true_color = SentinelHubRequest(
    evalscript=evalscript_true_color,
    input_data=[
        SentinelHubRequest.input_data(
            data_collection=DataCollection.SENTINEL2_L2A, 
            time_interval=(&#x27;2022-07-16&#x27;, &#x27;2022-07-18&#x27;),
        )
    ],
    responses=[
        SentinelHubRequest.output_response(&#x27;default&#x27;, MimeType.PNG)
    ],
    bbox=Area_of_interest_bbox,
    size=Area_of_interest_size,
    config=config
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jbmryNLMTM5F4gPiS5EL0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GmcT7XEZB2" class="relative group/block"><h2 id="visualize-the-requested-sentinel-image" class="relative group"><span class="heading-text">Visualize the requested Sentinel image</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualize-the-requested-sentinel-image" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="FsTmHZG9Dn" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># send the request to Sentinel Hub
#true_color_imgs = request_true_color.get_data()

max_retries = 3
retry_count = 0
while retry_count &lt; max_retries:
    try:
        true_color_imgs = request_true_color.get_data()
        break  # Image displayed successfully, exit the loop
    except Exception as e:
        print(f&quot;Failed to display image: {e}&quot;)
        retry_count += 1
        if retry_count &lt; max_retries:
            print(f&quot;Retrying (Attempt {retry_count})...&quot;)
 
if retry_count &gt;= max_retries:
    print(&quot;Maximum retries reached. Unable to retrieve the image.&quot;)
    
# Define the plot_image function

def plot_image(image, factor=1.0, clip_range = None, **kwargs):
    &quot;&quot;&quot;
    Utility function for plotting RGB images.
    &quot;&quot;&quot;
    fig, ax = plt.subplots(nrows=1, ncols=1, figsize=(15, 15))
    if clip_range is not None:
        ax.imshow(np.clip(image * factor, *clip_range), **kwargs)
    else:
        ax.imshow(image * factor, **kwargs)
    ax.set_xticks([])
    ax.set_yticks([])

image = true_color_imgs[0]
print(f&#x27;Image type: {image.dtype}&#x27;)
    
# plot function
# factor 1/255 to scale between 0-1
# factor 3.5 to increase brightness

# Maximum number of retry attempts

plot_image(image, factor=3.5/255, clip_range=(0,1))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="nV37OceUr4BRxdnWCa-XN" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Image type: uint8
</span></code></pre></div><img src="/eodashboard-notebooks/build/474488085dc663cca46c3d008f50f8a6.png" alt="&lt;Figure size 1500x1500 with 1 Axes&gt;"/></div></div><div id="PMc9txCJiy" class="relative group/block"><p>The visualized image captures the start of the  wildfire event which is prominently visible in the top right corner. The plume and emissions from the fire event extend westwards. Consequently, the analysis within this notebook will center around urban areas within those western regions.</p></div><div id="c67yW1mS0E" class="relative group/block"><h2 id="define-and-visualize-aoi-for-the-analysis" class="relative group"><span class="heading-text">Define and visualize AOI for the analysis</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-and-visualize-aoi-for-the-analysis" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="zsImqeYFTq" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># define the coordinates
top_left_x =  -1.26747
top_left_y = 44.674299
bottom_right_x = -0.962647
bottom_right_y = 44.508045

bbox = [   
  top_left_x,
  bottom_right_y,
  bottom_right_x,
  top_left_y
        ]

# Bbox EPSG
bbox_epsg = 4326</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="HGn1Oz4_QwfeACnPWUFR_" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="t2gbbry32o" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot the bounding box on a map
IPython.display.GeoJSON(BBox(bbox,crs=bbox_epsg).get_geojson())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="I4-SbE2yL7A4kg6eWQoyb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="yqDUCf6kQm" class="relative group/block"><h2 id="check-the-resolution-and-size-of-the-aoi" class="relative group"><span class="heading-text">Check the resolution and size of the AOI</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#check-the-resolution-and-size-of-the-aoi" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="kAFD2mCHWr" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Check the resolution and pixels constrains (they have to be maximal 2500x2500)
resolution = 10
aoi = BBox(bbox=bbox, crs=CRS.WGS84)
aoi_size = bbox_to_dimensions(aoi, resolution=resolution)

# These values are needed to set the right dimensions for saving the request as tiff file later
width = aoi_size[0]  
height = aoi_size[1] 

print(f&quot;Image shape at {resolution} m resolution: {aoi_size} pixels&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="MlGycEWAzvn5RT1W4WgA8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Image shape at 10 m resolution: (2377, 1903) pixels
</span></code></pre></div></div></div><div id="faUU4xwMr3" class="relative group/block"><h1 id="id-2-query-ghs-population-density-layer-with-sentinelhub-api-request" class="relative group"><span class="heading-text">2. Query GHS population density layer with SentinelHub API request</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-query-ghs-population-density-layer-with-sentinelhub-api-request" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>The <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/statistical/" class="">Statistical API</a> empowers users to derive insightful statistics from satellite imagery, eliminating the need to download large image files. When making a Statistical API request,it is possible to define an AOI, time frame, evalscript, and the specific statistical measures you wish to compute. The resulting statistics are conveniently included in the API response. With the Statistical API, the user can compute statistics such as cloud pixel percentages within a defined area and timeframe or calculate metrics like mean, standard deviation, and histogram of band values for a specific parcel over a given time frame.</p><p>To access the population density layer, we need to use the designated BYOC ID: 0c7aa265-50f9-4947-9980-2ee5ae204803 found on EDC. To query the GHS layer effectively, we need to provide the BYOC ID, the coordinates from the created GeoJSON file as AOI, the desired timeframe, and the necessary user credentials as inputs. The GHS layer contains data from 1975 to 2030 in 5 years intervals. We are going to query the data for 2020 because it is temporally closest to the chosen wildfire event in 2022.</p><p>Source for EC-JRC’s GHS layer: Pesaresi, Martino; Politis, Panagiotis (2023): GHS-BUILT-S R2023A - GHS built-up surface grid, derived from Sentinel2 composite and Landsat, multitemporal (1975-2030). European Commission, Joint Research Centre (JRC) [Dataset] doi: 10.2905/9F06F36F-4B11-47EC-ABB0-4F8B7B1D72EA</p><p>The evalscript in this request creates a new output image where the “dataMask” band is modified based on the values in the GHS layer. If the GHS value is 0, it masks the pixel in the “dataMask” band by setting it to zero. Otherwise, it retains the original GHS value.</p></div><div id="uwxED2bVUv" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">population_dens = &quot;&quot;&quot;
//VERSION=3
function setup() {
  return {
    input: [{
      bands: [&quot;BUILT&quot;, &quot;dataMask&quot;], // this sets which bands to use
    }],
    output: { // this defines the output image type
      bands: 1,
      sampleType: &quot;UINT8&quot;
    }
  };
}
 
function evaluatePixel(sample) {
    let pixelMask = 1
    
    if (sample.BUILT == 0){
        pixelMask = 0
    }
  return {
    default: [sample.BUILT],
    dataMask: [sample.dataMask * pixelMask]
  };
}
&quot;&quot;&quot;

request_data = SentinelHubRequest(
    evalscript=population_dens,
    input_data=[
        SentinelHubRequest.input_data(
            data_collection=DataCollection.define_byoc(&#x27;0c7aa265-50f9-4947-9980-2ee5ae204803&#x27;),
            time_interval=(&quot;2020-01-01&quot;, &quot;2020-01-01&quot;),
        )
    ],
    responses=[SentinelHubRequest.output_response(&quot;default&quot;, MimeType.PNG)],
    bbox=aoi,
    size=aoi_size,
    config=config,
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wYT61pHI4qCWF6Cm5modc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="XUj31c9Jmd" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">population_density = request_data.get_data()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="P-cbV0x9g-X_9Z5MjIIIv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mzAFkWlpxZ" class="relative group/block"><h2 id="extract-the-population-density-extent-as-geotiff-file" class="relative group"><span class="heading-text">Extract the population density extent as GeoTiff file</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#extract-the-population-density-extent-as-geotiff-file" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The GHS layer contains <a target="_blank" rel="noreferrer" href="https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2023.pdf?t=1683540422" class="">values ranging</a> from 0 to 10,000, where higher values indicate greater population density. In this notebook, we only exclude pixels with zero values, but I would be possible to add a threshold to the script below to pinpoint areas of exceptionally high population density.</p></div><div id="pO19gQY9Dz" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># the final geotiff is a binary mask with values of 1 representing built-up pixels
image_data_list = population_density

# Calculate pixel width and height based on image shape
pixel_width = (bottom_right_x - top_left_x) /  width 
pixel_height = (top_left_y - bottom_right_y) / height

# Specify the path to the directory where GeoTIFF files will be saved
output_directory = f&quot;./{folder_name}&quot;
# Loop through the list of image arrays
for i, image_data in enumerate(image_data_list):
    # Extract the pixel values (assuming single-band data)
    pixel_values = image_data[:, :]

    # Set values equal to zero to zero, and all other values to 1
    pixel_values = np.where(pixel_values == 0, 0, 1)

    # Specify the output path for each GeoTIFF file with the current time
    output_path = os.path.join(output_directory, f&quot;output_{current_date}.tif&quot;)

    # Create a transformation for the GeoTIFF
    transform = from_origin(top_left_x, top_left_y, pixel_width, pixel_height)

    # Open a new GeoTIFF file for writing with NoData value set to NaN
    with rasterio.open(
        output_path,
        &#x27;w&#x27;,
        driver=&#x27;GTiff&#x27;,
        height=pixel_values.shape[0],
        width=pixel_values.shape[1],
        count=1,  # Only one band for pixel values
        dtype=rasterio.float32,  # Use float32 for NaN values
        crs=&#x27;EPSG:4326&#x27;,
        transform=transform,
        nodata=np.nan  # Set NoData value to NaN
    ) as dst:
        # Write the pixel values to the GeoTIFF
        dst.write(pixel_values, 1)  # Use band 1
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4OBi41pMIpdh6Ov832xBM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kLUYYL65JL" class="relative group/block"><h2 id="visualize-the-extent-of-the-population-density-layer" class="relative group"><span class="heading-text">Visualize the extent of the population density layer</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualize-the-extent-of-the-population-density-layer" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="o7J1XYIMSU" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Specify the path to the GeoTIFF file
geotiff_path = f&quot;./{folder_name}/output_{current_date}.tif&quot;

# Open the GeoTIFF file using rasterio
with rasterio.open(geotiff_path) as src:
    # Read the raster data
    raster_data = src.read(1)  # Assuming you have a single band GeoTIFF

    # Get the spatial transformation information
    transform = src.transform

# Calculate the bounds based on the width and height of the raster
left, bottom, right, top = src.bounds

# Plot the GeoTIFF data using matplotlib
plt.figure(figsize=(8, 8))
plt.imshow(raster_data, cmap=&#x27;gray&#x27;, extent=(left, right, bottom, top), origin=&#x27;upper&#x27;)
plt.title(&#x27;Population density in AOI&#x27;)
plt.xlabel(&#x27;Longitude&#x27;)
plt.ylabel(&#x27;Latitude&#x27;)
plt.grid(True)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="EQWMohAyOgCyvMMyVR3wE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/eodashboard-notebooks/build/76264a28aafc4f715953ad3c519238dd.png" alt="&lt;Figure size 800x800 with 1 Axes&gt;"/></div></div><div id="K7SN7ou92I" class="relative group/block"><p>All non populated areas are displayed in black in the plot while the populated areas are colored white. From this binary mask we can now create a GeoJSON file that contains only the populated areas.</p></div><div id="WoF2mTlFwk" class="relative group/block"><h2 id="id-3-convert-the-binary-raster-mask-into-a-geojson-file" class="relative group"><span class="heading-text">3. Convert the binary raster mask into a GeoJSON file</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-convert-the-binary-raster-mask-into-a-geojson-file" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The resulting GeoJSON will only contain polygons for built up areas and will be used as spatial extend to query the Sentinel-5p data later.</p></div><div id="hqJWQ6OUah" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Specify the path to the GeoTIFF file
geotiff_path = f&quot;./{folder_name}/output_{current_date}.tif&quot;

# Open the GeoTIFF file
with rasterio.open(geotiff_path) as src:
    # Read the binary mask data
    mask = src.read(1)

# Convert the binary mask to vector polygons
geoms = list(shapes(mask, transform=src.transform, connectivity=4))  # Specify connectivity=4 for 4-connected pixels

# Filter the polygons to include only those corresponding to pixels with a value of 1
filtered_geoms = [geom for geom, value in geoms if value == 1]

# Create a GeoDataFrame from the filtered polygons
gdf = gpd.GeoDataFrame({&#x27;geometry&#x27;: [shape(geom) for geom in filtered_geoms]})

# Merge all the geometries into a single MultiPolygon
multi_polygon = gdf.unary_union

# Create a GeoDataFrame with the MultiPolygon geometry
multi_polygon_gdf = gpd.GeoDataFrame(geometry=[multi_polygon], crs=gdf.crs)

# Specify the path to save the MultiPolygon GeoJSON file
output_geojson_file = f&quot;./{folder_name}/multi_polygon_{current_date}.geojson&quot;

# Save the GeoDataFrame with the MultiPolygon to a GeoJSON file
multi_polygon_gdf.to_file(output_geojson_file, driver=&#x27;GeoJSON&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jInPMsU4mkCDewPFVZrjc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="DWSctA8hUA" class="relative group/block"><h2 id="plot-the-geojson-file" class="relative group"><span class="heading-text">Plot the GeoJSON file</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-the-geojson-file" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="X8Bff5wacQ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">display(GeoJSON(data=f&quot;./{folder_name}/multi_polygon_{current_date}.geojson&quot;, crs=bbox_epsg))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="CoWx5eIyROMyUNoKqpZSa" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="l0hzuGOZHM" class="relative group/block"><p>We can see that now only the built-up areas are stored in the GeoJSON file and we can extract the coordinates from this and use them as an input for the Sentinel-5p data</p></div><div id="RjyjuT3EUa" class="relative group/block"><h2 id="extract-the-coordinates-of-the-created-geojson-file" class="relative group"><span class="heading-text">Extract the coordinates of the created GeoJSON file</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#extract-the-coordinates-of-the-created-geojson-file" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="fYbSlKZiZ1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">with open(f&quot;./{folder_name}/multi_polygon_{current_date}.geojson&quot;) as f:
    gj = geojson.load(f)
data_coordinates = gj[&#x27;features&#x27;][0][&#x27;geometry&#x27;][&#x27;coordinates&#x27;]

#print(data_coordinates)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zB-lx-hdsak28peCmWRV8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="D3dLVBaxYq" class="relative group/block"><h1 id="id-4-use-statistical-api-request-to-access-sentinel-5p-co-data-for-the-extracted-populated-areas" class="relative group"><span class="heading-text">4. Use Statistical API request to access Sentinel-5p CO data for the extracted populated areas</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-4-use-statistical-api-request-to-access-sentinel-5p-co-data-for-the-extracted-populated-areas" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="BVfqf94Xtu" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from oauthlib.oauth2 import BackendApplicationClient
from requests_oauthlib import OAuth2Session</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Bi6ys-6AZEzgDghJQXHAl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="vXSHFzaXsH" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Create a session
client = BackendApplicationClient(client_id=client_id)
oauth = OAuth2Session(client=client)

# Get token for the session
token = oauth.fetch_token(token_url=&#x27;https://services.sentinel-hub.com/oauth/token&#x27;,
                          client_secret=client_secret)

# All requests using this session will have an access token automatically added
resp = oauth.get(&quot;https://services.sentinel-hub.com/oauth/tokeninfo&quot;)

url = &quot;https://creodias.sentinel-hub.com/api/v1/statistics&quot;
headers = {
  &quot;Accept&quot;: &quot;application/json&quot;,
  &quot;Content-Type&quot;: &quot;application/json&quot;
}
data = {
  &quot;input&quot;: {
    &quot;bounds&quot;: {
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;MultiPolygon&quot;,
        &quot;coordinates&quot;: data_coordinates
                 }
              },
    &quot;data&quot;: [
      {
        &quot;dataFilter&quot;: {},
        &quot;type&quot;: &quot;sentinel-5p-l2&quot;
      }
    ]
  },
  &quot;aggregation&quot;: {
    &quot;timeRange&quot;: {
      &quot;from&quot;: &quot;2022-07-01T00:00:00Z&quot;,
      &quot;to&quot;: &quot;2022-08-09T23:59:59Z&quot;
    },
    &quot;aggregationInterval&quot;: {
      &quot;of&quot;: &quot;P1D&quot;
    },
    &quot;width&quot;: 512,
    &quot;height&quot;: 402.581,
    &quot;evalscript&quot;: &quot;//VERSION=3\nfunction setup() {\n  return {\n    input: [{\n      bands: [\&quot;CO\&quot;, \&quot;dataMask\&quot;], // this sets which bands to use\n    }],\n    output: [\n      { id:\&quot;default\&quot;, bands: 1, sampleType: \&quot;FLOAT32\&quot; },\n      { id: \&quot;dataMask\&quot;, bands: 1 }\n    ]\n  };\n}\n \n\n\nfunction evaluatePixel(sample) {\n  return {\n    default: [sample.CO],\n    dataMask: [sample.dataMask]\n  };\n}&quot;
  },
  &quot;calculations&quot;: {
    &quot;default&quot;: {}
  }
}

response = oauth.post(url, headers=headers, json=data)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="KF97mpChPgunz-DG4OWNk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="FTXvumDmEu" class="relative group/block"><h2 id="save-the-extracted-statistics" class="relative group"><span class="heading-text">Save the extracted statistics</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#save-the-extracted-statistics" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="DB2b4wGKoY" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">response_data = response.json()
#print(response_data)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="UUc7NKWgrgSgM2if4chN2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="WEmMQWb2Mj" class="relative group/block"><h1 id="id-5-plot-the-statistics-for-the-s5p-co-data" class="relative group"><span class="heading-text">5. Plot the statistics for the S5p CO data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-5-plot-the-statistics-for-the-s5p-co-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="CBWls61LmU" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">time_axis = [datetime.strptime(entry[&quot;interval&quot;][&quot;from&quot;], &quot;%Y-%m-%dT%H:%M:%SZ&quot;).strftime(&quot;%Y/%m/%d&quot;) for entry in response_data[&quot;data&quot;]]
means = [float(entry[&#x27;outputs&#x27;][&#x27;default&#x27;][&#x27;bands&#x27;][&#x27;B0&#x27;][&#x27;stats&#x27;][&#x27;mean&#x27;]) for entry in response_data[&quot;data&quot;]]
std_devs = [float(entry[&#x27;outputs&#x27;][&#x27;default&#x27;][&#x27;bands&#x27;][&#x27;B0&#x27;][&#x27;stats&#x27;][&#x27;stDev&#x27;]) for entry in response_data[&quot;data&quot;]]
std_upper = [m+s for (m,s) in zip(means, std_devs)]
std_lower = [m-s for (m,s) in zip(means, std_devs)]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="bFOQUQRQsBbEUCVPacDAB" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Paa3J9ZNZA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig = plt.figure(figsize=(20,10))
# plot mean values 
plt.plot_date(time_axis, means, linestyle=&#x27;solid&#x27;, linewidth=2, color=&quot;black&quot;, label=&quot;Mean CO values [mol/ m^2]&quot;)

# plot standard deviation error bars
plt.errorbar(time_axis, means, yerr=std_devs, linestyle=&quot;-&quot;)

plt.title(&#x27;CO Values over the AOI (07/2022 - 08/2022)&#x27;)
plt.legend()
fig.autofmt_xdate()
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="0WBfDVcgFtFs_AEbZzN8W" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/eodashboard-notebooks/build/1f60d282fc802a294fa01f3bff68deff.png" alt="&lt;Figure size 2000x1000 with 1 Axes&gt;"/></div></div><div id="crGXtKN8Zc" class="relative group/block"><p>The graph illustrates a noticeable increase in CO concentration across populated areas on July 17th, when the fire event started. Additionally, the Standard Deviation on this day and the following days is increased in comparison to the days before the fire. The highest <a target="_blank" rel="noreferrer" href="https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years" class="">carbon emissions</a> in France were recorded from June to August in 2022 which aligns well with the result of this analysis. To learn more about the carbon emissions resulting from wildfires check out this <a target="_blank" rel="noreferrer" href="https://eodashboard.org/story?id=australian-bushfires" class="">story on the EO Dashboard</a> that also incorporates further indicators to analyse wildfires.</p></div><div></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/eodashboard-notebooks/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-TMJFFFM7.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/root-LMCDRB6W.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/_shared/chunk-GOFUXLLW.js"/><link rel="modulepreload" href="/eodashboard-notebooks/build/routes/$-SJYMRUNJ.js"/><script>window.__remixContext = {"url":"/notebooks/fire-impact-analysis","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true,"style":"/eodashboard-notebooks/build/custom-3e7d2be4cb822c37e75cb3b58f2ef8c4.css"},"nav":[],"actions":[],"projects":[{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Case study: Creating nighttime light maps with color blending","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1362f319c70d3cdb422a17d0ec7dbdf9.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/eodashboard-notebooks"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true,"style":"/eodashboard-notebooks/build/custom-3e7d2be4cb822c37e75cb3b58f2ef8c4.css"},"nav":[],"actions":[],"projects":[{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Case study: Creating nighttime light maps with color blending","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1362f319c70d3cdb422a17d0ec7dbdf9.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}]},"page":{"version":1,"kind":"Notebook","sha256":"a66f70bc1d618931182010bdbe6236c38b0146ee6adfc690cc417dc2d87edb24","slug":"notebooks.fire-impact-analysis","location":"/notebooks/Fire_impact_analysis.ipynb","dependencies":[],"frontmatter":{"title":"Evaluation of Fire Impact on Populated Areas on a European Site","content_includes_title":true,"kernelspec":{"name":"conda-env-users-edc-2023.07-01-py","display_name":"users-edc-2023.07-01","language":"python"},"github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","subject":"Notebook examples","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/blob/main/notebooks/Fire_impact_analysis.ipynb","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","exports":[{"format":"ipynb","filename":"Fire_impact_analysis.ipynb","url":"/eodashboard-notebooks/build/Fire_impact_analysis-9cc156ff5b6f1ed1a00be0a5615673cc.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Evaluation of Fire Impact on Populated Areas on a European Site","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZB812ecRXQ"}],"identifier":"evaluation-of-fire-impact-on-populated-areas-on-a-european-site","label":"Evaluation of Fire Impact on Populated Areas on a European Site","html_id":"evaluation-of-fire-impact-on-populated-areas-on-a-european-site","implicit":true,"key":"BTEbc7OXGS"},{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Geo-storytelling with RACE, EO Dashboard and the Euro Data Cube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"t0EJNgVEmp"}],"identifier":"geo-storytelling-with-race-eo-dashboard-and-the-euro-data-cube","label":"Geo-storytelling with RACE, EO Dashboard and the Euro Data Cube","html_id":"geo-storytelling-with-race-eo-dashboard-and-the-euro-data-cube","implicit":true,"key":"DgLzrWWlGz"}],"key":"aWNr2Uf4vT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook demonstates how to access and analyse data found on the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WagpoeKPOt"},{"type":"link","url":"https://race.esa.int/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Rapid Action for Citizens with Earth Observation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"siA8UVwAYR"}],"urlSource":"https://race.esa.int/","key":"ctvWGXiUz4"},{"type":"text","value":" (RACE) and ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Adu1HTZxsa"},{"type":"link","url":"https://eodashboard.org/explore","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Earth Observation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MJsWzU85J9"}],"urlSource":"https://eodashboard.org/explore","key":"tKbbRxRJ0t"},{"type":"text","value":" Dashboard. It uses the EC-JRC’s Global Human Settlement (GHS) Layer which contains global data about the total built-up surface from 1975 to 2030 and was derived from Sentinel2 composite and Landsat imagery. The data is openly available and can be downloaded ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c0KaNw4oLj"},{"type":"link","url":"https://ghsl.jrc.ec.europa.eu/ghs_buS2023.php","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GKp287Gxcv"}],"urlSource":"https://ghsl.jrc.ec.europa.eu/ghs_buS2023.php","key":"AnLgVRT8fG"},{"type":"text","value":". It was ingested in EDC and provided as a layer, check out the documentation ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JYlVisdeR6"},{"type":"link","url":"https://github.com/eurodatacube/public-collections/pull/309/commits/43388aadd9ace7d0cb1370f8053a37afed402b86","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oB7TT5odzP"}],"urlSource":"https://github.com/eurodatacube/public-collections/pull/309/commits/43388aadd9ace7d0cb1370f8053a37afed402b86","data":{"kind":"issue","org":"eurodatacube","repo":"public-collections","issue_number":"309"},"internal":false,"protocol":"github","key":"YONdHqaT2m"},{"type":"text","value":" for further information about the data properties in EDC.\nThe GHS indicator can be explored on the EO Dashboard by selecting the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mkb3Wvkyqn"},{"type":"link","url":"https://eodashboard.org/explore?poi=World-GHSBUILT","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EXPLORE DATASETS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jPlbD2qQWP"}],"urlSource":"https://eodashboard.org/explore?poi=World-GHSBUILT","key":"ShQTeu8xbW"},{"type":"text","value":" mode.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hssvB4sbaw"}],"key":"whvDh0WuxI"}],"key":"XJhnBGV0Rw"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Euro Data Cube - ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KoTiSZyMnL"},{"type":"link","url":"https://eurodatacube.com/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EDC","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PkYh66Ho2J"}],"urlSource":"https://eurodatacube.com/","key":"r3NCpOwYX2"},{"type":"text","value":" Platform presentation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J74eimT0nm"}],"identifier":"euro-data-cube-edc-platform-presentation","label":"Euro Data Cube - EDC Platform presentation","html_id":"euro-data-cube-edc-platform-presentation","implicit":true,"key":"OpYOngnuYf"}],"key":"y1qpfVf9t0"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"image","url":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","alt":"EuroDataCube.JPG","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ovFb8RSxva","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...CiiigD/9k="}],"key":"cQxHDfjnqR"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EDC - cloud-optimized platform offering:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uHOJd2TRFy"}],"identifier":"edc-cloud-optimized-platform-offering","label":"EDC - cloud-optimized platform offering:","html_id":"edc-cloud-optimized-platform-offering","implicit":true,"key":"p9eg5EPBoy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Access to EO archives from main all open missions (e.g. Sentinel, Landsat, MODIS, etc.), commercial satellites (PlanetScope, Pleiades, SPOT, WorldView, etc.) as well as Level 3 products (Copernicus Land Monitoring Services, C3S, etc.)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"J816icuQle"}],"key":"CU9BRzqvNU"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Analyse, compare and correlate EO data through Xcube and operational tools (Sentinel Hub)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"K2Dwj4Dg5s"}],"key":"J2xYOyIBiX"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Manage different data formats and type in a transparent way (raster, vector, COGs, Zarr, etc.)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xjvRNVano6"}],"key":"wGIoIjFAId"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Bring and store your own data and algorithm for real-time and batch processing operations","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uKVbvAgkDX"}],"key":"ehx5uKXxU7"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Computational resources and storage to run Jupyter Notebooks and your deployed Applications within your Kubernetes-powered workspace","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AcJ55d6e8N"}],"key":"AvJAhj7gdK"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Expose your apps on the EDC marketplace to third-parties and provide easy access to your managed API service to customers","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"pXy8dMsQc5"}],"key":"oC2oDannNT"}],"key":"FmrspkTcQ3"}],"key":"bYzYvh3yOb"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"image","url":"/eodashboard-notebooks/build/8e9d5b69267086b0c67e27f00ff42ad5.jpeg","alt":"edc_workflows.JPG","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SGigYqDftd","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...QAUUUUAf/Z"}],"key":"KZe5M0rSK0"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EDC - ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lfdkr64f4W"},{"type":"link","url":"https://eurodatacube.com/marketplace","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Market Place","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mYEQg9g9dy"}],"urlSource":"https://eurodatacube.com/marketplace","key":"n0KoD8Q4Q3"}],"identifier":"edc-market-place","label":"EDC - Market Place","html_id":"edc-market-place","implicit":true,"key":"WjbIfEVaYN"}],"key":"yZFRZh5OAa"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Data Products: e.g. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zinHOKqx2l"},{"type":"link","url":"https://www.sentinel-hub.com/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sentinel Hub","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iA1RyL1tjV"}],"urlSource":"https://www.sentinel-hub.com/","key":"u34vd3oCuy"}],"key":"ZyzSf6voFx"}],"key":"FGrYcDp6FM"}],"key":"y5uOkL5bLm"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Platform Services: e.g. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RrQWcLYlhR"},{"type":"link","url":"https://eurodatacube.com/marketplace/infra/edc_eoxhub_workspace","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EOxHub","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"odsOACYYWM"}],"urlSource":"https://eurodatacube.com/marketplace/infra/edc_eoxhub_workspace","key":"qCpjBaKigf"}],"key":"I6jheou8DC"}],"key":"df3OqRYI0H"}],"key":"jGMCGX1DEF"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"API Services: e.g. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"F3sxfK9pts"},{"type":"link","url":"https://eurodatacube.com/marketplace/services/edc_geodb","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GeoDB","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YwifKmBlh4"}],"urlSource":"https://eurodatacube.com/marketplace/services/edc_geodb","key":"fxa3y47AU9"},{"type":"text","value":", ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MHAR4lK4cc"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/statistical/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SH-Statistical API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AGRzFZMocI"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/statistical/","key":"mD2WG6fQM6"}],"key":"TIXt1j6As2"}],"key":"pUZUmi4RTC"}],"key":"GhEGRW5HNu"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Content of this notebook:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pJIrAg5kmf"}],"identifier":"content-of-this-notebook","label":"Content of this notebook:","html_id":"content-of-this-notebook","implicit":true,"key":"NFDJ74z9TG"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Visualizing wildfire events with Sentinel-2 imagery","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lDjSSge73f"}],"key":"nEHqmYxdNv"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Querying data via Statistical API for the chosen Area of Interest","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"SoGoYYV001"}],"key":"ukUCJCrDgb"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Transforming the output of the API request into a geoJSON polygon that contains the extent of the built up area in the AOI","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Do5mtuWXtn"}],"key":"cBAdYnqzZq"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Accessing Sentinel-5p Carbon monoxide data from SentinelHub","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BdgTP2q3UR"}],"key":"zYsjPQxS3G"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Displaying the time series of the CO concentration over the populated area to evaluate the possible impact of the fire emissions","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OmIdDv7oX8"}],"key":"v72hWe1ptD"}],"key":"Yop4L8MFyA"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"This notebook runs with the python environment ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"GhQjxtAZ8U"},{"type":"inlineCode","value":"users-edc-2023.07-01","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jSJqyYI0zp"},{"type":"text","value":" and was prepared by Leah Sturm (University of Trier, Germany).","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"tcaXjajH4R"}],"key":"V85CfYrHP8"}],"key":"fHj14q7Kub"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"#import necessary libraries\nimport os\nimport numpy as np\nimport geopandas as gpd\nimport rasterio\nfrom rasterio.features import shapes\nimport requests\nimport geojson\nfrom shapely.geometry import shape\nfrom rasterio.transform import from_origin\nimport matplotlib.pyplot as plt\nfrom datetime import datetime\n\n\n# Sentinel Hub requirements\nfrom sentinelhub import (SHConfig, DataCollection, Geometry, BBox, Geometry,\n                         SentinelHubRequest, filter_times, bbox_to_dimensions, MimeType, \n                         SentinelHubBYOC, ByocCollection, ByocTile, ByocCollectionAdditionalData,\n                         DownloadFailedException, CRS, SentinelHubStatistical)","key":"nhaENs2OIS"},{"type":"output","id":"W_sz653P8QKWm2gU6_7rj","data":[],"key":"veuiUmBSr6"}],"key":"XvkNjsoYys"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Pass Sentinel Hub credentials to SHConfig\nconfig = SHConfig()\nconfig.sh_client_id = os.environ[\"SH_CLIENT_ID\"]\nconfig.sh_client_secret = os.environ[\"SH_CLIENT_SECRET\"]\n\nclient_id = os.environ[\"SH_CLIENT_ID\"]\nclient_secret = os.environ[\"SH_CLIENT_SECRET\"]\n\n\n# config","key":"yd3r4XqoyG"},{"type":"output","id":"us4zvXq8EFPI9bOInO0nG","data":[],"key":"SSvJXViaaS"}],"key":"OSkWXW4Km9"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a folder for the session in which all files will be stored","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Jp5P5JS436"}],"identifier":"create-a-folder-for-the-session-in-which-all-files-will-be-stored","label":"Create a folder for the session in which all files will be stored","html_id":"create-a-folder-for-the-session-in-which-all-files-will-be-stored","implicit":true,"key":"nN9jJYDa1g"}],"visibility":"show","key":"rXg5JrmjWU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get the current date and format it as a string\ncurrent_date = datetime.now().strftime(\"%Y-%m-%d\")\n\n# Define the folder name and path\nfolder_name = f\"folder_{current_date}\"\nfolder_path = os.path.join(os.getcwd(), folder_name)\n\n# Check if the folder already exists, and create it if not\nif not os.path.exists(folder_path):\n    os.mkdir(folder_path)\n    print(f\"Folder '{folder_name}' created at: {folder_path}\")\nelse:\n    print(f\"Folder '{folder_name}' already exists at: {folder_path}\")","visibility":"show","key":"XbKxc2fJQe"},{"type":"output","id":"J09MDviWNw-QYKwys_hML","data":[{"name":"stdout","output_type":"stream","text":"Folder 'folder_2023-10-25' already exists at: /home/3d76fe8a-ecd3-4736-b462-38f98f1f605e/folder_2023-10-25\n"}],"visibility":"show","key":"GoHqwMvHvI"}],"visibility":"show","key":"p8cOPaO1hH"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wildfire Impacts and Carbon Emissions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FtxBWyi9vp"}],"identifier":"wildfire-impacts-and-carbon-emissions","label":"Wildfire Impacts and Carbon Emissions","html_id":"wildfire-impacts-and-carbon-emissions","implicit":true,"key":"J2XCmqQpZj"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The wildfire season during the summer of 2022 in Europe was exceptional, marked by a high number of observed fires, a large extent of burned area, and remarkably high atmospheric emissions linked to these fires. According to data from the European Forest Fire Information System (EFFIS), fires were reported in 26 out of the 27 European countries, collectively burning 837,212 hectares. A significant portion of these wildfires happened in July, with Spain, Portugal, France, and Italy experiencing the most damages.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uaKOakFl8o"}],"key":"tiT4AnbxKt"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The selected wildfire incident for this notebook occurred in the Gironde region of southwestern France, near the city of Bordeaux, in 2022. The significant fire event started on July 17, 2022, lasted for two weeks while burning approximately 7,000 hectares of land. Notably, the Copernicus Atmosphere Monitoring Service (CAMS) recorded exceptionally elevated levels of carbon monoxide emissions throughout the duration of this event.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"WAautS5ahK"}],"key":"RMUUvoRoRM"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Related articles about the event and the wildfire occurrence in 2022:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zxecV75C0V"}],"key":"QvVgh9C1FZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://www.esa.int/esearch?q=wildfire+france","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"European Space Agency","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sxcdKW0SAR"}],"urlSource":"https://www.esa.int/esearch?q=wildfire+france","key":"Lzk6mMJVYP"}],"key":"KNqbUscouk"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"link","url":"https://joint-research-centre.ec.europa.eu/jrc-news-and-updates/eu-2022-wildfire-season-was-second-worst-record-2023-05-02_en","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"EU ScienceHub","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"tG7uPfHFQG"}],"urlSource":"https://joint-research-centre.ec.europa.eu/jrc-news-and-updates/eu-2022-wildfire-season-was-second-worst-record-2023-05-02_en","key":"el7lAalsJn"}],"key":"omk4Nuk1M2"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://op.europa.eu/en/publication-detail/-/publication/500b8dfa-de5e-11ed-a05c-01aa75ed71a1/language-en","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"EFFIS","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ZAHUTlMiZY"}],"urlSource":"https://op.europa.eu/en/publication-detail/-/publication/500b8dfa-de5e-11ed-a05c-01aa75ed71a1/language-en","key":"SYwPYft4GH"}],"key":"uUUBvL0aBY"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"link","url":"https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Copernicus Atmosphere Monitoring Service","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"hZAYOVeDQs"}],"urlSource":"https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years","key":"wFa4qrxXVc"}],"key":"KysNpKdoz2"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"https://www.eumetsat.int/summer-2022-exceptional-wildfire-season-europe","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"EUMETSAT","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"xGr2gZ5APo"}],"urlSource":"https://www.eumetsat.int/summer-2022-exceptional-wildfire-season-europe","key":"VqiaXZPTyt"}],"key":"xPtAPDuPvn"}],"key":"VWEIBoZzXM"}],"key":"wSLGflJopg"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1. Visualize Wildfire Event with Sentinel-2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YxHZegE0En"}],"identifier":"id-1-visualize-wildfire-event-with-sentinel-2","label":"1. Visualize Wildfire Event with Sentinel-2","html_id":"id-1-visualize-wildfire-event-with-sentinel-2","implicit":true,"key":"DKROU504Ji"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"In this first part we are going to visualize the fire event to get an overview of the location and the occuring emissions. In the following cells we will access Sentinel-2 imagery from ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yViFg3UQOw"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Sentinel Hub","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yRV96KlSUL"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/","key":"Y8YX8KbCNy"},{"type":"text","value":". Sentinel Hub is a multi-spectral and multi-temporal big data satellite imagery service, capable of fully automated archiving, real-time processing and distribution of remote sensing data and related EO products. Users can use APIs to retrieve satellite data over their AOI and specific time range from full archives in a matter of seconds. The following cells to access Sentinel-2 data are based on the example notebook “Australian Bushfires” which is available in the ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UjCh2ZAfZY"},{"type":"link","url":"https://eurodatacube.com/marketplace","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Euro Data Cube Marketplace","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"SXcwtOlTh3"}],"urlSource":"https://eurodatacube.com/marketplace","key":"nf6Ym6r9WH"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oHa862p3LP"}],"key":"FBAPU3tRts"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"To get a first overview of the fire event we are going to look at the true colour image captured on the day of the start of the fire.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"kso8qXwpPD"}],"key":"v2NIDRCN67"}],"key":"Zcy0ybF8bV"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define Area of Interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Shn6fGBB5K"}],"identifier":"define-area-of-interest","label":"Define Area of Interest","html_id":"define-area-of-interest","implicit":true,"key":"ptjjme29z1"}],"key":"APV0f5t8nO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"bbox_coords =[\n  -1.006524,\n  44.318762,\n  -0.406214,\n  44.586411\n]\n\nresolution = 20\nArea_of_interest_bbox = BBox(bbox=bbox_coords, crs=CRS.WGS84)\nArea_of_interest_size = bbox_to_dimensions(Area_of_interest_bbox, resolution=resolution)\n\n# Bbox EPSG\nbbox_epsg = 4326","visibility":"show","key":"wuAT9eGj0S"},{"type":"output","id":"UdNosYot4DpdVU5dCwbnm","data":[],"visibility":"show","key":"s0VPfSHR7K"}],"visibility":"show","key":"K7eiCTm2zg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Utilities\nimport IPython.display\nfrom IPython.display import display, GeoJSON\n\n# Plot the bounding box on a map\nIPython.display.GeoJSON(BBox(bbox_coords,crs=bbox_epsg).get_geojson())","visibility":"show","key":"XXH5WRcsVE"},{"type":"output","id":"q-xzCALPPTAxP2HCMRJtr","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content":"{\"coordinates\":[[[-1.006524,44.318762],[-1.006524,44.586411],[-0.406214,44.586411],[-0.406214,44.318762],[-1.006524,44.318762]]],\"crs\":{\"properties\":{\"name\":\"urn:ogc:def:crs:EPSG::4326\"},\"type\":\"name\"},\"type\":\"Polygon\"}","content_type":"application/geo+json"},"text/plain":{"content":"\u003cIPython.display.GeoJSON object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"wyCsmSw9qa"}],"visibility":"show","key":"yH4y9d6u6a"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Access Sentinel-2 data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PXD01VwLdy"}],"identifier":"access-sentinel-2-data","label":"Access Sentinel-2 data","html_id":"access-sentinel-2-data","implicit":true,"key":"zqWLud0oTs"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We build the request according to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"brLumKOgou"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/reference/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"API Reference","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AFtktLBZII"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/reference/","key":"RR0goWX9ue"},{"type":"text","value":", using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UPkB5QKA8z"},{"type":"inlineCode","value":"SentinelHubRequest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RyQuFpZBoq"},{"type":"text","value":" class. Each Process API request also needs an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eslObK724N"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/#/Evalscript/V3/README","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"evalscript","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"d46k0tKCeV"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/#/Evalscript/V3/README","key":"Xs2JSQMLFs"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"d9RUvEUiVg"}],"key":"Lzz2egMVtk"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The information that we specify in the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"itLUq1AlkD"},{"type":"inlineCode","value":"SentinelHubRequest","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eEdZTp8tcB"},{"type":"text","value":" object is:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tmFcdxAPBy"}],"key":"hNq6z3C87i"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"an evalscript,","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sgxL2h3UsJ"}],"key":"IXPbS6ExoJ"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"a list of input data collections with time interval,","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"N85JqXqOEe"}],"key":"SnYEajNfVY"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"a format of the response,","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"thJCZKf3Q2"}],"key":"oKo9nuZfDZ"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"a bounding box and it’s size (size or resolution).","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Wat3PZSyXM"}],"key":"kWB1UYMPXU"}],"key":"in0qI78Stz"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"The evalscript is used to select the appropriate bands. We return the RGB (B04, B03, B02) Sentinel-2 L2A bands.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"DKKb2mctX9"}],"key":"skzF9w0aA0"}],"key":"U4tLWRskAK"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# define the evalscript \n\nevalscript_true_color = \"\"\"\n    //VERSION=3\n\n    function setup() {\n        return {\n            input: [{\n                bands: [\"B02\", \"B03\", \"B04\"]\n            }],\n            output: {\n                bands: 3\n            }\n        };\n    }\n\n    function evaluatePixel(sample) {\n        return [sample.B04, sample.B03, sample.B02];\n    }\n\"\"\"\n\n# we nned to specify the collection and the time interval\n# for a list of collections available in the Sentinel Hub visit https://docs.sentinel-hub.com/api/latest/data/ \n\nrequest_true_color = SentinelHubRequest(\n    evalscript=evalscript_true_color,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.SENTINEL2_L2A, \n            time_interval=('2022-07-16', '2022-07-18'),\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response('default', MimeType.PNG)\n    ],\n    bbox=Area_of_interest_bbox,\n    size=Area_of_interest_size,\n    config=config\n)","visibility":"show","key":"XWOucxoDm1"},{"type":"output","id":"jbmryNLMTM5F4gPiS5EL0","data":[],"visibility":"show","key":"QEK8P3Twnh"}],"visibility":"show","key":"iQkML4pmAa"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize the requested Sentinel image","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xJd2AB3nFO"}],"identifier":"visualize-the-requested-sentinel-image","label":"Visualize the requested Sentinel image","html_id":"visualize-the-requested-sentinel-image","implicit":true,"key":"VgbmcShdP3"}],"key":"GmcT7XEZB2"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# send the request to Sentinel Hub\n#true_color_imgs = request_true_color.get_data()\n\nmax_retries = 3\nretry_count = 0\nwhile retry_count \u003c max_retries:\n    try:\n        true_color_imgs = request_true_color.get_data()\n        break  # Image displayed successfully, exit the loop\n    except Exception as e:\n        print(f\"Failed to display image: {e}\")\n        retry_count += 1\n        if retry_count \u003c max_retries:\n            print(f\"Retrying (Attempt {retry_count})...\")\n \nif retry_count \u003e= max_retries:\n    print(\"Maximum retries reached. Unable to retrieve the image.\")\n    \n# Define the plot_image function\n\ndef plot_image(image, factor=1.0, clip_range = None, **kwargs):\n    \"\"\"\n    Utility function for plotting RGB images.\n    \"\"\"\n    fig, ax = plt.subplots(nrows=1, ncols=1, figsize=(15, 15))\n    if clip_range is not None:\n        ax.imshow(np.clip(image * factor, *clip_range), **kwargs)\n    else:\n        ax.imshow(image * factor, **kwargs)\n    ax.set_xticks([])\n    ax.set_yticks([])\n\nimage = true_color_imgs[0]\nprint(f'Image type: {image.dtype}')\n    \n# plot function\n# factor 1/255 to scale between 0-1\n# factor 3.5 to increase brightness\n\n# Maximum number of retry attempts\n\nplot_image(image, factor=3.5/255, clip_range=(0,1))","visibility":"show","key":"R3bLFQnV0j"},{"type":"output","id":"nV37OceUr4BRxdnWCa-XN","data":[{"name":"stdout","output_type":"stream","text":"Image type: uint8\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"474488085dc663cca46c3d008f50f8a6","path":"/eodashboard-notebooks/build/474488085dc663cca46c3d008f50f8a6.png"},"text/plain":{"content":"\u003cFigure size 1500x1500 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"nEVbi2zPKy"}],"visibility":"show","key":"FsTmHZG9Dn"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The visualized image captures the start of the  wildfire event which is prominently visible in the top right corner. The plume and emissions from the fire event extend westwards. Consequently, the analysis within this notebook will center around urban areas within those western regions.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mloRsMMC6a"}],"key":"cmHuCBEGGH"}],"key":"PMc9txCJiy"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define and visualize AOI for the analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RxZcB4hgfh"}],"identifier":"define-and-visualize-aoi-for-the-analysis","label":"Define and visualize AOI for the analysis","html_id":"define-and-visualize-aoi-for-the-analysis","implicit":true,"key":"RwwPS9ROJd"}],"key":"c67yW1mS0E"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# define the coordinates\ntop_left_x =  -1.26747\ntop_left_y = 44.674299\nbottom_right_x = -0.962647\nbottom_right_y = 44.508045\n\nbbox = [   \n  top_left_x,\n  bottom_right_y,\n  bottom_right_x,\n  top_left_y\n        ]\n\n# Bbox EPSG\nbbox_epsg = 4326","key":"x0oBMLjOqB"},{"type":"output","id":"HGn1Oz4_QwfeACnPWUFR_","data":[],"key":"ejPyPaojlp"}],"key":"zsImqeYFTq"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot the bounding box on a map\nIPython.display.GeoJSON(BBox(bbox,crs=bbox_epsg).get_geojson())","key":"fn1SUkzQiW"},{"type":"output","id":"I4-SbE2yL7A4kg6eWQoyb","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content":"{\"coordinates\":[[[-1.26747,44.508045],[-1.26747,44.674299],[-0.962647,44.674299],[-0.962647,44.508045],[-1.26747,44.508045]]],\"crs\":{\"properties\":{\"name\":\"urn:ogc:def:crs:EPSG::4326\"},\"type\":\"name\"},\"type\":\"Polygon\"}","content_type":"application/geo+json"},"text/plain":{"content":"\u003cIPython.display.GeoJSON object\u003e","content_type":"text/plain"}}}],"key":"VS0CUG45fh"}],"key":"t2gbbry32o"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check the resolution and size of the AOI","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HJtgyVpYFu"}],"identifier":"check-the-resolution-and-size-of-the-aoi","label":"Check the resolution and size of the AOI","html_id":"check-the-resolution-and-size-of-the-aoi","implicit":true,"key":"Ep4LN3hP3j"}],"key":"yqDUCf6kQm"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Check the resolution and pixels constrains (they have to be maximal 2500x2500)\nresolution = 10\naoi = BBox(bbox=bbox, crs=CRS.WGS84)\naoi_size = bbox_to_dimensions(aoi, resolution=resolution)\n\n# These values are needed to set the right dimensions for saving the request as tiff file later\nwidth = aoi_size[0]  \nheight = aoi_size[1] \n\nprint(f\"Image shape at {resolution} m resolution: {aoi_size} pixels\")","visibility":"show","key":"fft4OndX7M"},{"type":"output","id":"MlGycEWAzvn5RT1W4WgA8","data":[{"name":"stdout","output_type":"stream","text":"Image shape at 10 m resolution: (2377, 1903) pixels\n"}],"visibility":"show","key":"xti3cwvuKi"}],"visibility":"show","key":"kAFD2mCHWr"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2. Query GHS population density layer with SentinelHub API request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gRwX8VifyJ"}],"identifier":"id-2-query-ghs-population-density-layer-with-sentinelhub-api-request","label":"2. Query GHS population density layer with SentinelHub API request","html_id":"id-2-query-ghs-population-density-layer-with-sentinelhub-api-request","implicit":true,"key":"u8BlTrZW79"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"aFyW2bIEP9"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/statistical/","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Statistical API","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"r3HhvteTP6"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/statistical/","key":"sUj4pUUg12"},{"type":"text","value":" empowers users to derive insightful statistics from satellite imagery, eliminating the need to download large image files. When making a Statistical API request,it is possible to define an AOI, time frame, evalscript, and the specific statistical measures you wish to compute. The resulting statistics are conveniently included in the API response. With the Statistical API, the user can compute statistics such as cloud pixel percentages within a defined area and timeframe or calculate metrics like mean, standard deviation, and histogram of band values for a specific parcel over a given time frame.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TKd4uM6Q9U"}],"key":"sOPaSfqumA"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"To access the population density layer, we need to use the designated BYOC ID: 0c7aa265-50f9-4947-9980-2ee5ae204803 found on EDC. To query the GHS layer effectively, we need to provide the BYOC ID, the coordinates from the created GeoJSON file as AOI, the desired timeframe, and the necessary user credentials as inputs. The GHS layer contains data from 1975 to 2030 in 5 years intervals. We are going to query the data for 2020 because it is temporally closest to the chosen wildfire event in 2022.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Ruq3QKBcIg"}],"key":"pgmICogjuq"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Source for EC-JRC’s GHS layer: Pesaresi, Martino; Politis, Panagiotis (2023): GHS-BUILT-S R2023A - GHS built-up surface grid, derived from Sentinel2 composite and Landsat, multitemporal (1975-2030). European Commission, Joint Research Centre (JRC) [Dataset] doi: 10.2905/9F06F36F-4B11-47EC-ABB0-4F8B7B1D72EA","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gNnHvRLkdE"}],"key":"sX3IzX6Hbm"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The evalscript in this request creates a new output image where the “dataMask” band is modified based on the values in the GHS layer. If the GHS value is 0, it masks the pixel in the “dataMask” band by setting it to zero. Otherwise, it retains the original GHS value.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"M0x4NAx9sr"}],"key":"F9YlIgrV5U"}],"key":"faUU4xwMr3"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"population_dens = \"\"\"\n//VERSION=3\nfunction setup() {\n  return {\n    input: [{\n      bands: [\"BUILT\", \"dataMask\"], // this sets which bands to use\n    }],\n    output: { // this defines the output image type\n      bands: 1,\n      sampleType: \"UINT8\"\n    }\n  };\n}\n \nfunction evaluatePixel(sample) {\n    let pixelMask = 1\n    \n    if (sample.BUILT == 0){\n        pixelMask = 0\n    }\n  return {\n    default: [sample.BUILT],\n    dataMask: [sample.dataMask * pixelMask]\n  };\n}\n\"\"\"\n\nrequest_data = SentinelHubRequest(\n    evalscript=population_dens,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=DataCollection.define_byoc('0c7aa265-50f9-4947-9980-2ee5ae204803'),\n            time_interval=(\"2020-01-01\", \"2020-01-01\"),\n        )\n    ],\n    responses=[SentinelHubRequest.output_response(\"default\", MimeType.PNG)],\n    bbox=aoi,\n    size=aoi_size,\n    config=config,\n)","key":"Zoc7NeEpR3"},{"type":"output","id":"wYT61pHI4qCWF6Cm5modc","data":[],"key":"N2ijdhR0pN"}],"key":"uwxED2bVUv"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"population_density = request_data.get_data()","key":"VdT64fkSA5"},{"type":"output","id":"P-cbV0x9g-X_9Z5MjIIIv","data":[],"key":"dpzMoJODBX"}],"key":"XUj31c9Jmd"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extract the population density extent as GeoTiff file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"voKec77ppK"}],"identifier":"extract-the-population-density-extent-as-geotiff-file","label":"Extract the population density extent as GeoTiff file","html_id":"extract-the-population-density-extent-as-geotiff-file","implicit":true,"key":"eGRrCwKbGh"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The GHS layer contains ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"DpteWxDNyo"},{"type":"link","url":"https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2023.pdf?t=1683540422","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"values ranging","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bQltYtotzA"}],"urlSource":"https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2023.pdf?t=1683540422","key":"LVDXJ8H9zU"},{"type":"text","value":" from 0 to 10,000, where higher values indicate greater population density. In this notebook, we only exclude pixels with zero values, but I would be possible to add a threshold to the script below to pinpoint areas of exceptionally high population density.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"NQvehvbkwc"}],"key":"Pg4Y7LXcOd"}],"key":"mzAFkWlpxZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# the final geotiff is a binary mask with values of 1 representing built-up pixels\nimage_data_list = population_density\n\n# Calculate pixel width and height based on image shape\npixel_width = (bottom_right_x - top_left_x) /  width \npixel_height = (top_left_y - bottom_right_y) / height\n\n# Specify the path to the directory where GeoTIFF files will be saved\noutput_directory = f\"./{folder_name}\"\n# Loop through the list of image arrays\nfor i, image_data in enumerate(image_data_list):\n    # Extract the pixel values (assuming single-band data)\n    pixel_values = image_data[:, :]\n\n    # Set values equal to zero to zero, and all other values to 1\n    pixel_values = np.where(pixel_values == 0, 0, 1)\n\n    # Specify the output path for each GeoTIFF file with the current time\n    output_path = os.path.join(output_directory, f\"output_{current_date}.tif\")\n\n    # Create a transformation for the GeoTIFF\n    transform = from_origin(top_left_x, top_left_y, pixel_width, pixel_height)\n\n    # Open a new GeoTIFF file for writing with NoData value set to NaN\n    with rasterio.open(\n        output_path,\n        'w',\n        driver='GTiff',\n        height=pixel_values.shape[0],\n        width=pixel_values.shape[1],\n        count=1,  # Only one band for pixel values\n        dtype=rasterio.float32,  # Use float32 for NaN values\n        crs='EPSG:4326',\n        transform=transform,\n        nodata=np.nan  # Set NoData value to NaN\n    ) as dst:\n        # Write the pixel values to the GeoTIFF\n        dst.write(pixel_values, 1)  # Use band 1\n","visibility":"show","key":"mugI9g89YF"},{"type":"output","id":"4OBi41pMIpdh6Ov832xBM","data":[],"visibility":"show","key":"Ab1BteKb4w"}],"visibility":"show","key":"pO19gQY9Dz"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualize the extent of the population density layer","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"b3IFt5t43L"}],"identifier":"visualize-the-extent-of-the-population-density-layer","label":"Visualize the extent of the population density layer","html_id":"visualize-the-extent-of-the-population-density-layer","implicit":true,"key":"EQn9nz8W0E"}],"key":"kLUYYL65JL"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Specify the path to the GeoTIFF file\ngeotiff_path = f\"./{folder_name}/output_{current_date}.tif\"\n\n# Open the GeoTIFF file using rasterio\nwith rasterio.open(geotiff_path) as src:\n    # Read the raster data\n    raster_data = src.read(1)  # Assuming you have a single band GeoTIFF\n\n    # Get the spatial transformation information\n    transform = src.transform\n\n# Calculate the bounds based on the width and height of the raster\nleft, bottom, right, top = src.bounds\n\n# Plot the GeoTIFF data using matplotlib\nplt.figure(figsize=(8, 8))\nplt.imshow(raster_data, cmap='gray', extent=(left, right, bottom, top), origin='upper')\nplt.title('Population density in AOI')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')\nplt.grid(True)\nplt.show()","visibility":"show","key":"jcOVvitkJS"},{"type":"output","id":"EQWMohAyOgCyvMMyVR3wE","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"76264a28aafc4f715953ad3c519238dd","path":"/eodashboard-notebooks/build/76264a28aafc4f715953ad3c519238dd.png"},"text/plain":{"content":"\u003cFigure size 800x800 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"gsyIzI1HjP"}],"visibility":"show","key":"o7J1XYIMSU"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"All non populated areas are displayed in black in the plot while the populated areas are colored white. From this binary mask we can now create a GeoJSON file that contains only the populated areas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Al5wDxvQh1"}],"key":"UzOYl6TuPN"}],"key":"K7SN7ou92I"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3. Convert the binary raster mask into a GeoJSON file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"s2lDli6zHU"}],"identifier":"id-3-convert-the-binary-raster-mask-into-a-geojson-file","label":"3. Convert the binary raster mask into a GeoJSON file","html_id":"id-3-convert-the-binary-raster-mask-into-a-geojson-file","implicit":true,"key":"uGobFtO5XK"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The resulting GeoJSON will only contain polygons for built up areas and will be used as spatial extend to query the Sentinel-5p data later.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pDBI9YANWE"}],"key":"cJfzokdDGP"}],"key":"WoF2mTlFwk"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Specify the path to the GeoTIFF file\ngeotiff_path = f\"./{folder_name}/output_{current_date}.tif\"\n\n# Open the GeoTIFF file\nwith rasterio.open(geotiff_path) as src:\n    # Read the binary mask data\n    mask = src.read(1)\n\n# Convert the binary mask to vector polygons\ngeoms = list(shapes(mask, transform=src.transform, connectivity=4))  # Specify connectivity=4 for 4-connected pixels\n\n# Filter the polygons to include only those corresponding to pixels with a value of 1\nfiltered_geoms = [geom for geom, value in geoms if value == 1]\n\n# Create a GeoDataFrame from the filtered polygons\ngdf = gpd.GeoDataFrame({'geometry': [shape(geom) for geom in filtered_geoms]})\n\n# Merge all the geometries into a single MultiPolygon\nmulti_polygon = gdf.unary_union\n\n# Create a GeoDataFrame with the MultiPolygon geometry\nmulti_polygon_gdf = gpd.GeoDataFrame(geometry=[multi_polygon], crs=gdf.crs)\n\n# Specify the path to save the MultiPolygon GeoJSON file\noutput_geojson_file = f\"./{folder_name}/multi_polygon_{current_date}.geojson\"\n\n# Save the GeoDataFrame with the MultiPolygon to a GeoJSON file\nmulti_polygon_gdf.to_file(output_geojson_file, driver='GeoJSON')","visibility":"show","key":"pBum6vIYQh"},{"type":"output","id":"jInPMsU4mkCDewPFVZrjc","data":[],"visibility":"show","key":"P95Gy8LBCt"}],"visibility":"show","key":"hqJWQ6OUah"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the GeoJSON file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NQVyWWwZGx"}],"identifier":"plot-the-geojson-file","label":"Plot the GeoJSON file","html_id":"plot-the-geojson-file","implicit":true,"key":"nmhf2tP5Zg"}],"key":"DWSctA8hUA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"display(GeoJSON(data=f\"./{folder_name}/multi_polygon_{current_date}.geojson\", crs=bbox_epsg))","visibility":"show","key":"RfexfQ7bro"},{"type":"output","id":"CoWx5eIyROMyUNoKqpZSa","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"crs":4326,"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content_type":"application/geo+json","hash":"56b70bb93244469422b076fe4e1e5f6a","path":"/eodashboard-notebooks/build/56b70bb93244469422b076fe4e1e5f6a.json"},"text/plain":{"content":"\u003cIPython.display.GeoJSON object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"aJZ2wYfT6Y"}],"visibility":"show","key":"X8Bff5wacQ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We can see that now only the built-up areas are stored in the GeoJSON file and we can extract the coordinates from this and use them as an input for the Sentinel-5p data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fCfNbC9VrP"}],"key":"HvVrSP1Nxp"}],"key":"l0hzuGOZHM"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extract the coordinates of the created GeoJSON file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R5ElBEpkUM"}],"identifier":"extract-the-coordinates-of-the-created-geojson-file","label":"Extract the coordinates of the created GeoJSON file","html_id":"extract-the-coordinates-of-the-created-geojson-file","implicit":true,"key":"PNiTOQDChB"}],"key":"RjyjuT3EUa"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"with open(f\"./{folder_name}/multi_polygon_{current_date}.geojson\") as f:\n    gj = geojson.load(f)\ndata_coordinates = gj['features'][0]['geometry']['coordinates']\n\n#print(data_coordinates)","visibility":"show","key":"cvNkyTp8Pq"},{"type":"output","id":"zB-lx-hdsak28peCmWRV8","data":[],"visibility":"show","key":"dRbrcBZccw"}],"visibility":"show","key":"fYbSlKZiZ1"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"4. Use Statistical API request to access Sentinel-5p CO data for the extracted populated areas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aXqKRChI0M"}],"identifier":"id-4-use-statistical-api-request-to-access-sentinel-5p-co-data-for-the-extracted-populated-areas","label":"4. Use Statistical API request to access Sentinel-5p CO data for the extracted populated areas","html_id":"id-4-use-statistical-api-request-to-access-sentinel-5p-co-data-for-the-extracted-populated-areas","implicit":true,"key":"U8l1kRCZfm"}],"key":"D3dLVBaxYq"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from oauthlib.oauth2 import BackendApplicationClient\nfrom requests_oauthlib import OAuth2Session","visibility":"show","key":"VAyPvBFmT7"},{"type":"output","id":"Bi6ys-6AZEzgDghJQXHAl","data":[],"visibility":"show","key":"AxwEuGatNb"}],"visibility":"show","key":"BVfqf94Xtu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create a session\nclient = BackendApplicationClient(client_id=client_id)\noauth = OAuth2Session(client=client)\n\n# Get token for the session\ntoken = oauth.fetch_token(token_url='https://services.sentinel-hub.com/oauth/token',\n                          client_secret=client_secret)\n\n# All requests using this session will have an access token automatically added\nresp = oauth.get(\"https://services.sentinel-hub.com/oauth/tokeninfo\")\n\nurl = \"https://creodias.sentinel-hub.com/api/v1/statistics\"\nheaders = {\n  \"Accept\": \"application/json\",\n  \"Content-Type\": \"application/json\"\n}\ndata = {\n  \"input\": {\n    \"bounds\": {\n      \"geometry\": {\n        \"type\": \"MultiPolygon\",\n        \"coordinates\": data_coordinates\n                 }\n              },\n    \"data\": [\n      {\n        \"dataFilter\": {},\n        \"type\": \"sentinel-5p-l2\"\n      }\n    ]\n  },\n  \"aggregation\": {\n    \"timeRange\": {\n      \"from\": \"2022-07-01T00:00:00Z\",\n      \"to\": \"2022-08-09T23:59:59Z\"\n    },\n    \"aggregationInterval\": {\n      \"of\": \"P1D\"\n    },\n    \"width\": 512,\n    \"height\": 402.581,\n    \"evalscript\": \"//VERSION=3\\nfunction setup() {\\n  return {\\n    input: [{\\n      bands: [\\\"CO\\\", \\\"dataMask\\\"], // this sets which bands to use\\n    }],\\n    output: [\\n      { id:\\\"default\\\", bands: 1, sampleType: \\\"FLOAT32\\\" },\\n      { id: \\\"dataMask\\\", bands: 1 }\\n    ]\\n  };\\n}\\n \\n\\n\\nfunction evaluatePixel(sample) {\\n  return {\\n    default: [sample.CO],\\n    dataMask: [sample.dataMask]\\n  };\\n}\"\n  },\n  \"calculations\": {\n    \"default\": {}\n  }\n}\n\nresponse = oauth.post(url, headers=headers, json=data)","visibility":"show","key":"dLyg2BVP8S"},{"type":"output","id":"KF97mpChPgunz-DG4OWNk","data":[],"visibility":"show","key":"sfwo0gctqQ"}],"visibility":"show","key":"vXSHFzaXsH"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Save the extracted statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cMFChYp7lw"}],"identifier":"save-the-extracted-statistics","label":"Save the extracted statistics","html_id":"save-the-extracted-statistics","implicit":true,"key":"QHt10JehZX"}],"key":"FTXvumDmEu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"response_data = response.json()\n#print(response_data)","visibility":"show","key":"HQRSlBB4hQ"},{"type":"output","id":"UUc7NKWgrgSgM2if4chN2","data":[],"visibility":"show","key":"XDkhLjPvaF"}],"visibility":"show","key":"DB2b4wGKoY"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"5. Plot the statistics for the S5p CO data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xe9CXFl9tj"}],"identifier":"id-5-plot-the-statistics-for-the-s5p-co-data","label":"5. Plot the statistics for the S5p CO data","html_id":"id-5-plot-the-statistics-for-the-s5p-co-data","implicit":true,"key":"LwRpn15d9w"}],"key":"WEmMQWb2Mj"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"time_axis = [datetime.strptime(entry[\"interval\"][\"from\"], \"%Y-%m-%dT%H:%M:%SZ\").strftime(\"%Y/%m/%d\") for entry in response_data[\"data\"]]\nmeans = [float(entry['outputs']['default']['bands']['B0']['stats']['mean']) for entry in response_data[\"data\"]]\nstd_devs = [float(entry['outputs']['default']['bands']['B0']['stats']['stDev']) for entry in response_data[\"data\"]]\nstd_upper = [m+s for (m,s) in zip(means, std_devs)]\nstd_lower = [m-s for (m,s) in zip(means, std_devs)]","visibility":"show","key":"q12xqWSjqT"},{"type":"output","id":"bFOQUQRQsBbEUCVPacDAB","data":[],"visibility":"show","key":"CBIk0bhUTU"}],"visibility":"show","key":"CBWls61LmU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=(20,10))\n# plot mean values \nplt.plot_date(time_axis, means, linestyle='solid', linewidth=2, color=\"black\", label=\"Mean CO values [mol/ m^2]\")\n\n# plot standard deviation error bars\nplt.errorbar(time_axis, means, yerr=std_devs, linestyle=\"-\")\n\nplt.title('CO Values over the AOI (07/2022 - 08/2022)')\nplt.legend()\nfig.autofmt_xdate()\nplt.show()","visibility":"show","key":"OgZYTFFe61"},{"type":"output","id":"0WBfDVcgFtFs_AEbZzN8W","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1f60d282fc802a294fa01f3bff68deff","path":"/eodashboard-notebooks/build/1f60d282fc802a294fa01f3bff68deff.png"},"text/plain":{"content":"\u003cFigure size 2000x1000 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"DvvxN8e6Tk"}],"visibility":"show","key":"Paa3J9ZNZA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The graph illustrates a noticeable increase in CO concentration across populated areas on July 17th, when the fire event started. Additionally, the Standard Deviation on this day and the following days is increased in comparison to the days before the fire. The highest ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JU0AvDr8aV"},{"type":"link","url":"https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"carbon emissions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HYldNxjzpH"}],"urlSource":"https://atmosphere.copernicus.eu/europes-summer-wildfire-emissions-highest-15-years","key":"ajwuMSQnBa"},{"type":"text","value":" in France were recorded from June to August in 2022 which aligns well with the result of this analysis. To learn more about the carbon emissions resulting from wildfires check out this ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R8azq7hsms"},{"type":"link","url":"https://eodashboard.org/story?id=australian-bushfires","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"story on the EO Dashboard","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nbkphntY3r"}],"urlSource":"https://eodashboard.org/story?id=australian-bushfires","key":"orTwIkGM5L"},{"type":"text","value":" that also incorporates further indicators to analyse wildfires.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hM3h5YD5dV"}],"key":"gQZpQTdWpT"}],"key":"crGXtKN8Zc"}],"key":"xevyn2EZMV"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"EO Dashboard Notebooks","url":"/","group":"EO Dashboard Notebooks"},"next":{"title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","url":"/notebooks/inland-water-with-edc","group":"Notebooks"}}},"domain":"http://localhost:3000"},"project":{"subject":"Notebook examples","title":"EO Dashboard Notebooks","description":"Collection of examples relevant to the EO Dashboard project","github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"Notebooks","level":1},{"slug":"notebooks.fire-impact-analysis","title":"Evaluation of Fire Impact on Populated Areas on a European Site","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/22a5ee1ff975cb9c3eb3b1e899bb858e.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.inland-water-with-edc","title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.openchallengenotebook-c1-jessel-hezzi-roussel","title":"Earth System Science Open Challenge 1: L. Jessel, S. Hezzi, M. Roussel","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/49e045ccedfe842015ba44cc25ccb377.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.veda-api-bids-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/5d71b8fb32fb3d611031d0ea697e5422.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"title":"Nightlights Notebook","level":2},{"slug":"notebooks.nightlights-notebook.night-lights-blending","title":"Case study: Creating nighttime light maps with color blending","description":"","date":"","thumbnail":"/eodashboard-notebooks/build/nighttime_northeaste-1362f319c70d3cdb422a17d0ec7dbdf9.jpg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":3}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/eodashboard-notebooks/build/manifest-2671EB98.js";
import * as route0 from "/eodashboard-notebooks/build/root-LMCDRB6W.js";
import * as route1 from "/eodashboard-notebooks/build/routes/$-SJYMRUNJ.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/eodashboard-notebooks/build/entry.client-UNPC4GT3.js");</script></body></html>