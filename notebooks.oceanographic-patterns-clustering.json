{"version":2,"kind":"Notebook","sha256":"64690791c468d8fb47ac01dac91bc4617ee425af4cbca934e2d80cb5d44478b3","slug":"notebooks.oceanographic-patterns-clustering","location":"/notebooks/Oceanographic patterns clustering.ipynb","dependencies":[],"frontmatter":{"title":"K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","content_includes_title":false,"kernelspec":{"name":"conda-env-users-deepesdl-xcube-1.11.0-py","display_name":"users-deepesdl-xcube-1.11.0","language":"python"},"github":"https://github.com/ESA-eodashboards/eodashboard-notebooks","subject":"Notebook examples","numbering":{"title":{"offset":1}},"source_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/blob/main/notebooks/Oceanographic patterns clustering.ipynb","edit_url":"https://github.com/ESA-eodashboards/eodashboard-notebooks/edit/main/notebooks/Oceanographic patterns clustering.ipynb","thumbnail":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","exports":[{"format":"ipynb","filename":"Oceanographic patterns clustering.ipynb","url":"/eodashboard-notebooks/build/Oceanographic patter-327a1114d3940a1ed83ab60c3616a915.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/eodashboard-notebooks/build/a737ae6d2b7cf4511053168c9e99be3b.jpeg","alt":"Sept-2025-Venice-Edinburgh-Leeds.jpg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IP6CLwI0PW","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...KKAP/2Q==\n"}],"key":"M0aqafmCrY"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FkSw2bNqJ0"}],"key":"jXpul5qLT5"},{"type":"break","key":"UGDqBwpPof"},{"type":"text","value":"\nThis notebook has been developed and validated on the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z2fjAtImxO"},{"type":"link","url":"https://deepesdl.readthedocs.io/en/latest/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DeepESDL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DRPOEEWMRH"}],"key":"ejRmzVKt10"}],"urlSource":"https://deepesdl.readthedocs.io/en/latest/","key":"qOBuQ3pgzy"},{"type":"text","value":" environment, where the necessary data, tools, and execution kernels are available. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UTQe6Ou05D"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DeepESDL","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T2UGFNfJmW"}],"key":"qtNPDZT5Eg"},{"type":"text","value":" is part of ESA’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QeB9xsCAfV"},{"type":"link","url":"https://earthcode.esa.int","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EarthCODE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JPQXY5pgvY"}],"key":"gu2LhW8Z3A"},{"type":"text","value":" initiative","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bHKbGsjkyG"}],"urlSource":"https://earthcode.esa.int","key":"DnzMemMKXY"},{"type":"text","value":", enabling open and reproducible Earth Science. Sponsored access can be requested through ESA’s ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JcrdoYB8Nu"},{"type":"link","url":"https://nor-discover.org/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Network of Resources","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eReqillUrC"}],"key":"Sww3qZn0Ti"}],"urlSource":"https://nor-discover.org/","key":"GOS681K99y"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"insAttslpJ"}],"key":"Ye92PhkeDK"}],"key":"Wu1va7gUZu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"ntXPbl7Gc0"}],"key":"A55uji5SOb"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Table of Contents","key":"VIzcbXSc0k"}],"key":"rPTR1d62SL"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"czXbWNbRVV"}],"identifier":"table-of-contents","label":"Table of Contents ","html_id":"table-of-contents","implicit":true,"key":"GKYsWPSx2w"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Title","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"rnTbRD1jfB"}],"identifier":"title","label":"title","kind":"heading","template":"{name}","resolved":true,"html_id":"title","key":"z2xM66N9me"}],"key":"YjOEtcuK7R"}],"key":"iC84l3DSba"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Description","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lpu4QLuptD"}],"identifier":"description","label":"description","kind":"heading","template":"{name}","resolved":true,"html_id":"description","key":"XjEEyQmoa6"}],"key":"zouZjcgICO"}],"key":"EwVwVIzu7S"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"skLI19WJ6I"}],"identifier":"references","label":"references","kind":"heading","template":"{name}","resolved":true,"html_id":"references","key":"WvaqgitS5a"}],"key":"BRpH7RL4WE"}],"key":"Q0TUtOEwnT"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#conclusions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Key Conclusions","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"R8ZIM3Gcbg"}],"urlSource":"#conclusions","key":"kZR7B5F3gO"}],"key":"clk6cEKM7e"}],"key":"hsBjBeVtDU"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#context","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Societal Context","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sn2UQasG23"}],"urlSource":"#context","key":"Nsousr76HP"}],"key":"hZ0RNZ2NHb"}],"key":"aeAyjlUPbU"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#libraries","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Python Libraries","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NVCRPvenOa"}],"urlSource":"#libraries","key":"hSbCVfOdtV"}],"key":"bYmPEf0BuX"}],"key":"lVDa93uAUA"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#inputs","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Data Sources","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"I8usiWBKNn"}],"urlSource":"#inputs","key":"MuiRlNReYO"}],"key":"xw4uAkuV0A"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#combo","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Combining input data","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"odqFkULI7r"}],"urlSource":"#combo","key":"f0hCXKzJqi"}],"key":"WGBP91MaOU"}],"key":"LyYuvOkCO2"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#visuals","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Visualizing input data","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"mreDRqLzF2"}],"urlSource":"#visuals","key":"E2KR2D1RM9"}],"key":"VtI28fnxa4"}],"key":"ewo4oz43CW"}],"key":"lFj1WiMqNt"}],"key":"dK2xB5nzL2"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"crossReference","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Analysis","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"NXnTBzG0wt"}],"identifier":"analysis","label":"analysis","kind":"heading","template":"{name}","resolved":true,"html_id":"analysis","key":"dcvtLO5ZHY"}],"key":"WQTzrJxiEF"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#utility","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Utility functions","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"kNsg1hFYXj"}],"urlSource":"#utility","key":"sKyw9k2ufL"}],"key":"lgTSCvnS5W"}],"key":"JGCPz8qluk"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#kmeans","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"K-means implementation","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"LpFI2qAqE7"}],"urlSource":"#kmeans","key":"CpzEfZdNGk"}],"key":"zLpGB5rk8o"}],"key":"jbmkBw4eMm"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#monthly","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Monthly clustering","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"xPQg9qt1ic"}],"urlSource":"#monthly","key":"jOA4OYX2eM"}],"key":"j1og3Jly34"}],"key":"H7auFd9PV9"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"#seasonal","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Seasonal clustering","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"IDBfboafX7"}],"urlSource":"#seasonal","key":"lLtQSaqmH9"}],"key":"JWD61GCjbw"}],"key":"vVG0G4BXQA"}],"key":"LeFAGMB65s"}],"key":"MZfpIbzNKy"}],"key":"xjh4S0RKzg"}],"key":"ZLInFVBLoF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"FVxOgKeZuR"}],"key":"IgTM8ZiNQP"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Title","key":"DN48jrmaF4"}],"key":"txq9xJ5fhk"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O6HzbRmXB9"}],"identifier":"title","label":"Title ","html_id":"title","implicit":true,"key":"BieFymQGI8"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Challenge: ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WolPVcPo4r"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IQvhegwEml"}],"key":"JA7Gm1sYlv"}],"identifier":"challenge-k-means-clustering-analysis-of-oceanographic-patterns-in-the-mediterranean-sea","label":"Challenge: K-means clustering analysis of oceanographic patterns in the Mediterranean Sea","html_id":"challenge-k-means-clustering-analysis-of-oceanographic-patterns-in-the-mediterranean-sea","implicit":true,"key":"apgCOnMPQU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Authors:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ffl1flQos6"}],"key":"b1ZhvW2iO4"}],"key":"uRYXoCaDBe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Katie Lowery","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"f3SEm7fxSt"}],"key":"wesOuxuKR3"},{"type":"text","value":", British Antarctic Survey (BAS), Cambridge, United Kingdom of Great Britain","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"SUc5sCLOQa"}],"key":"rkjuEQpLIn"}],"key":"NprQn7Qhpp"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"William Luty","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"KX3tQURFWp"}],"key":"h1WZ6Rlqvv"},{"type":"text","value":" , University of Leeds, Leeds, United Kingdom of Great Britain - England, Scotland, Wales","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wpxrqC4LZw"}],"key":"G3VuWy7cJY"}],"key":"k2I54Nvon1"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Enrico Biscaro","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"mb6AcuRBW2"}],"key":"XDdzhthRK1"},{"type":"text","value":", Ca’ Foscari University of Venice, Italy ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ykYMRt3tsT"},{"type":"break","key":"t1ZKZqLwn3"}],"key":"Z9CHi6bKr8"}],"key":"SHaonGx7ml"}],"key":"hrL6QiATd1"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"WALPEdQB4x"}],"urlSource":"#toc","key":"CImlcPuZoY"}],"key":"j8oirvFyWz"}],"key":"S4k0mXrQhb"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"txrJyanEH4"}],"key":"icV3fTcSm1"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Description","key":"VNogStJpmt"}],"key":"ufwYeQKTJq"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qu4HsksyR8"}],"identifier":"description","label":"Description ","html_id":"description","implicit":true,"key":"f6utCLCUVV"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Scientific problem","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YjTD0S7B5t"}],"identifier":"scientific-problem","label":"Scientific problem","html_id":"scientific-problem","implicit":true,"key":"sLRNSI0O1C"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Ocean water types - such as coastal, upwelling, oligotrophic, and eutrophic  waters - exhibit distinct spectral and biogeochemical characteristics. Classifying  these types is essential for understanding marine ecosystems, monitoring water  quality, and supporting climate and fisheries research. This challenge leverages ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"hzRcdsZcPN"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"EO data","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"mCITvrFqOj"}],"key":"O2zJLTyne2"},{"type":"text","value":" and ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"BQaqjrvNnu"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"unsupervised learning","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"qjKNvOY3Wi"}],"key":"ngx5rQj8S0"},{"type":"text","value":" to classify ocean water types based on spectral reflectance and derived indices.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MNrUkavetQ"}],"key":"u9KAkB5n4l"},{"type":"heading","depth":3,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Objective","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"urIhGs45zi"}],"identifier":"objective","label":"Objective","html_id":"objective","implicit":true,"key":"rZLUgQKT5P"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"zdf7TsmVTp"},{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"clustering algorithms","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"s469Z8ArXd"}],"key":"PAbEIu02XN"},{"type":"text","value":" to classify ocean water types from EO spectral  bands and indices. Validate clusters against known oceanographic features or water classifications and produce a map of water types for a selected region.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"QrxmVVJdPC"}],"key":"gnBeoeVIwZ"},{"type":"heading","depth":3,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Method","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"m1x9VOzKiO"}],"identifier":"method","label":"Method","html_id":"method","implicit":true,"key":"Osz25pEc78"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"K-means clustering.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"wgF5bxHcZq"}],"key":"M0oAQ2zFAZ"},{"type":"heading","depth":4,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Clustering optimization technique","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"PMsnzaeXQ8"}],"identifier":"clustering-optimization-technique","label":"Clustering optimization technique","html_id":"clustering-optimization-technique","implicit":true,"key":"tnRGbLDVi9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Elbow method: to determine the optimal number of clusters to use.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Igfopv4CpM"}],"key":"NiI5ta0imj"}],"key":"kECwgVwwHL"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optimization metric: Inertia (Sum of Squared Errors)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"khCTHT8NOE"}],"key":"PcmBvvT2Jv"}],"key":"wL5Z1FnzCr"}],"key":"S11gbqj4hS"},{"type":"heading","depth":3,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Service used","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Ypd3PeHElz"}],"identifier":"service-used","label":"Service used","html_id":"service-used","implicit":true,"key":"QPwiHmWDg3"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"link","url":"https://marine.copernicus.eu/","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Copernicus Marine Service","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"lsxkYoFYbt"}],"urlSource":"https://marine.copernicus.eu/","key":"wiofOQU7N1"},{"type":"text","value":".","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"EEL3Fp25Fu"}],"key":"z8m9idb6Fr"},{"type":"heading","depth":3,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Use case: Mediterranean Sea","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"hcJCwDtNLP"}],"identifier":"use-case-mediterranean-sea","label":"Use case: Mediterranean Sea","html_id":"use-case-mediterranean-sea","implicit":true,"key":"kKu2y7tRkP"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optimizing fish harvesting while preserving fish populations and  marine biodiversity in the Mediterranean","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"w2HYKzn2bY"}],"key":"TxUCJev81K"}],"key":"EtjwkvTYX4"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Monitoring physico-chemical parameters of the Mediterranean Sea in a climate change scenario also considering its contribution to the Atlantic Meridional Overturning Circulation (AMOC)","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"y6rXmdr1Aa"}],"key":"KbeOaPQVfL"}],"key":"V1SDqLpUlf"}],"key":"R3dm81pl7v"},{"type":"image","url":"/eodashboard-notebooks/build/5eae0210320dbf26b5e6545ec68c0514.jpeg","alt":"Clustering_use-case.JPG","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"hZrLl9wwDC","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...AooooA/9k="},{"type":"heading","depth":3,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Processing workflow","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"z4F9XFgi1G"}],"identifier":"processing-workflow","label":"Processing workflow","html_id":"processing-workflow","implicit":true,"key":"xn76eibffT"},{"type":"image","url":"/eodashboard-notebooks/build/f46649713c7cc868512dd6ec1895727f.jpeg","alt":"kmeans-clustering_cmems.JPG","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"OTNwUCCvMb","urlSource":"data:image/jpeg;base64,/9j/4AAQSk...ooooA//9k="},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"MFTdWfkK1B"}],"urlSource":"#toc","key":"XT98rXnisG"}],"key":"pyTVi74qvo"}],"visibility":"show","key":"UDJ8gJy95F"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"r4RcvCw051"}],"key":"XRuNg65G9W"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"References","key":"O02ZCqN3gz"}],"key":"uYyjwRMgQd"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ykc8rXjOoc"}],"identifier":"references","label":"References ","html_id":"references","implicit":true,"key":"xR4ANebYmx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Berthon, J.-F., Zibordi, G.: Bio-optical relationships for the northern Adriatic Sea. Int. J. Remote Sens., 25, 1527-1532, 2004","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Dr9g2KX8TL"}],"key":"wzzfTXPpsh"}],"key":"uF8CPl3cG4"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Buongiorno Nardelli, B., R. Droghei, and R. Santoleri, (2016): Multi-dimensional interpolation of SMOS sea\nsurface salinity with surface temperature and in situ salinity data. Rem. Sens. Environ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xEl9qh6064"}],"key":"BXM7aJE3ot"}],"key":"Lwo2PIbHGY"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Droghei, R., B. Buongiorno Nardelli, and R. Santoleri, 2016: Combining in-situ and satellite observations to\nretrieve salinity and density at the ocean surface. J. Atmos. Oceanic Technol.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vQNl9KXXJy"}],"key":"FVlyR5UmFS"}],"key":"CIVk3BzTJp"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Embury, O., Merchant, C.J., Good, S.A., Rayner, N.A., Høyer, J.L., Atkinson, C., Block, T., Alerskans, E.,\nPearson, K.J., Worsfold, M., McCarroll, N., Donlon, C., (2024). Satellite-based time-series of sea-surface\ntemperature since 1980 for climate applications. Sci Data 11, 326","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"VABKxFEZN6"}],"key":"F0Zlv15gQP"}],"key":"iDPpvGtC9j"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pisano, A., Nardelli, B. B., Tronconi, C., & Santoleri, R. (2016). The new Mediterranean optimally interpolated pathfinder AVHRR SST Dataset (1982–2012). Remote Sensing of Environment, 176, 107-116","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"DS02XPvoa5"}],"key":"X7wzQQ91CB"}],"key":"VLmSBfuddm"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Sammartino, Michela, Salvatore Aronica, Rosalia Santoleri, and Bruno Buongiorno Nardelli. (2022). Retrieving\nMediterranean Sea Surface Salinity Distribution and Interannual Trends from Multi-Sensor Satellite and In Situ\nData, Remote Sensing 14, 250","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"BeKlOYsDYV"}],"key":"qMZ7aFROUX"}],"key":"o3ft5SoXkq"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Volpe, G., Buongiorno Nardelli, B., Colella, S., Pisano, A. and Santoleri, R. (2018). An Operational\nInterpolated Ocean Colour Product in the Mediterranean Sea, in New Frontiers in Operational Oceanography,\nedited by E. P. Chassignet, A. Pascual, J. Tintorè, and J. Verron, pp. 227–244z","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"HK42XFvsu3"}],"key":"ANUDzM423N"}],"key":"uQzNGnTJVc"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Volpe, G., Colella, S., Brando, V. E., Forneris, V., Padula, F. L., Cicco, A. D., ... & Santoleri, R. (2019). Mediterranean ocean colour Level 3 operational multi-sensor processing. Ocean Science, 15(1), 127-146","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"bX4EliY1GO"}],"key":"aUHzzVXSRH"}],"key":"bVBiluDDK8"}],"key":"ifddtjXdRj"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"UpLccvVTUP"}],"urlSource":"#toc","key":"K3jHMr9IED"}],"key":"AXBIo0BXD4"}],"key":"e4s7qVXm3d"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"njIRSm0HAR"}],"key":"rs2InZ7y8G"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Key Conclusions","key":"kKCiNPlP0w"}],"key":"iJt0P1H8uI"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WKCrUrADuz"}],"identifier":"key-conclusions","label":"Key Conclusions ","html_id":"key-conclusions","implicit":true,"key":"QDZEW77800"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This study demonstrates the effectiveness of unsupervised clustering for identifying and mapping ocean water types from multi-parameter satellite observations. Key findings include:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QQ9pkQEMn3"}],"key":"AY2Azg3cR6"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Three distinct water types identified","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aBzxN9eEj3"}],"key":"CIou3oE34f"},{"type":"text","value":": Coastal (high productivity), eutrophic (moderate productivity), and oligotrophic (low productivity) waters distinguished by combined biological, physical, and atmospheric characteristics","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DpdSTyLNb6"}],"key":"f1xW2WVHXn"}],"key":"jybSTPqdV0"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Geographic coherence","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"m4VYAP1D7C"}],"key":"f95Ll0E5mj"},{"type":"text","value":": Spatial patterns align with known Mediterranean oceanography, validating the clustering approach against established understanding","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OhmEhNuj9H"}],"key":"H2IlZKZGsD"}],"key":"VWFcvUdL61"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Seasonal dynamics captured","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JDgj3QsgxC"}],"key":"D5OU7EKGLj"},{"type":"text","value":": Temporal analysis reveals expansion/contraction of water types consistent with seasonal stratification and mixing cycles","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"v30jFcikZe"}],"key":"iSIIjd7v8Z"}],"key":"xUsf3L4PxK"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Multi-parameter synergy","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FvnVsFMnhb"}],"key":"pIR7CSJ3rN"},{"type":"text","value":": Integration of chlorophyll-a, SST, sea level height, and wind components provides richer characterization than single-parameter approaches","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MENQEW3fnP"}],"key":"YM6yvCDPhm"}],"key":"xsJq1M72IG"}],"key":"NiUexWPxpS"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Study limitations and future directions:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"VILXwr4Jt1"}],"key":"mixRzN8NLS"}],"key":"GQSkyC5sg6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Cluster number selection","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"EsgePb70fs"}],"key":"WzwZCBJQ5s"},{"type":"text","value":": Statistical optimum (5 clusters) provided insufficient detail, while chosen number (8) resulted in only 3 active clusters—suggesting need for adaptive cluster selection methods","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Pey2jXnfZ6"}],"key":"bnLMia6nZ2"}],"key":"uaI87RFdMY"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Coastal water stability","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"akRgMzDK4a"}],"key":"g1uxp6b47g"},{"type":"text","value":": Lack of seasonal variation in Cluster 2 (coastal waters) may indicate need for higher temporal resolution or separate coastal-specific analysis","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"oahIPDoWqI"}],"key":"A1qbXonnoJ"}],"key":"VU7K2JK8qJ"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Validation needed","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"BXuj4MnDIZ"}],"key":"wHFDUcEZk3"},{"type":"text","value":": No quantitative validation against in-situ measurements or existing water type classifications was performed","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"NuXe5dfQdt"}],"key":"YBH37MXAgJ"}],"key":"G5bnsXLK3S"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Algorithm exploration","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"Yt8QfmvaeX"}],"key":"pBGerAUugp"},{"type":"text","value":": Testing alternative clustering methods (hierarchical, DBSCAN, Gaussian mixture models) could improve classification","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"wFNsbtOfmF"}],"key":"wYeuHzu7cE"}],"key":"hMM3flsTO3"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Additional parameters","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"A5FTV16hNh"}],"key":"sZdJe8MBOp"},{"type":"text","value":": Including sea surface salinity, turbidity, or fluorescence line height could enhance water type discrimination","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"lE2CW6Zyw4"}],"key":"E70tg626Bd"}],"key":"xXqLDnfzfB"}],"key":"Y0Tas7HtIr"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Future work priorities:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ROEv3FDELq"}],"key":"y43cnJLjDW"}],"key":"aC76WLC9Bn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Extend analysis to other ocean basins for method generalization","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"LEix402RlX"}],"key":"NA0Tz3JtN3"}],"key":"Qoaf8Vg6nj"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Incorporate in-situ validation data from research cruises and Argo floats","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"XiDJQL1cdl"}],"key":"UdrN3fwtl2"}],"key":"dvzJJXsFyZ"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Develop operational products for near-real-time water type mapping","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"IumEq7tVTh"}],"key":"TiJpGT2VFC"}],"key":"bpYnuy5VwP"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Investigate machine learning approaches for temporal prediction of water type transitions","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"x9ZFkLvH9K"}],"key":"xKzqHAAUNv"}],"key":"x1gmu3xwo1"}],"key":"XCSECpZ1an"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"The framework established here provides a foundation for automated ocean water type classification from Earth observation data, with potential applications in operational oceanography, ecosystem monitoring, and climate change impact assessment.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"xlvGWUe97O"}],"key":"XfuQTOOq3H"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"ZentSmrMxt"}],"urlSource":"#toc","key":"v34QVrqzVN"}],"key":"lWtJAKmaky"}],"key":"ScWVdHTB3C"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"TOdNZTOYkt"}],"key":"audt80rC6e"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Societal Context","key":"MjWpvAhoJp"}],"key":"FsdjI8YGuu"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vquGjwa00l"}],"identifier":"societal-context","label":"Societal Context ","html_id":"societal-context","implicit":true,"key":"mxysZIzNI3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Understanding marine ecosystems","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yZJcE2DDnO"}],"key":"pAv392it9p"}],"key":"D1dZq6NZN2"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Monitoring water quality","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"JhHxMhI3Sq"}],"key":"Szw9fNss7s"}],"key":"pEDdbu3IjS"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Supporting climate and fisheries research by mapping productive zones","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"y2VVLleCBc"}],"key":"HOG01qqsNN"}],"key":"GPvzQhS572"}],"key":"RjpSqAtKUz"}],"key":"mi0VT7qwSK"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"zqLIquAUIK"}],"key":"w19vBcrXgd"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Import Libraries","key":"DoekqzbXXg"}],"key":"dh5uHR9TnG"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WKFvBCWJjt"}],"identifier":"import-libraries","label":"Import Libraries ","html_id":"import-libraries","implicit":true,"key":"qxrOYy9pWt"}],"key":"QJS148sIYO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np\nimport matplotlib.pyplot as plt\nfrom datetime import datetime\nimport os\nimport shapely.geometry\nimport xarray as xr\nfrom sklearn.cluster import KMeans\nfrom sklearn.preprocessing import StandardScaler\nfrom IPython.display import JSON, display, HTML\nimport joblib\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nfrom cartopy.mpl.gridliner import LONGITUDE_FORMATTER, LATITUDE_FORMATTER\nimport xcube_cmems\nfrom xcube.core.store import (\n    find_data_store_extensions,\n    get_data_store_params_schema,\n    new_data_store,\n)\nimport pandas as pd","visibility":"show","key":"mTfO5mjunw"},{"type":"output","id":"MTfIC5O2NZ69o04Rbavfi","data":[],"visibility":"show","key":"CcVPdTXAnG"}],"visibility":"show","key":"IuqY24cmg5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aBrI2ek2Lm"}],"urlSource":"#toc","key":"d7CfOoSfkj"}],"key":"ngdT8Z0JCx"}],"key":"O3nBFIus4T"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"vflA8poJQa"}],"key":"X9boHQ2ExY"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Data sources","key":"WQGduwC97w"}],"key":"nugkbCvzQi"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xfrier2Int"}],"identifier":"data-sources","label":"Data sources ","html_id":"data-sources","implicit":true,"key":"YiwvWuny5n"}],"visibility":"show","key":"DfjwVHIuOf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The table below shows the data products used with links to description, access source and classification attributes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ifPdghtWUD"}],"key":"RgQQjlLVaj"}],"key":"nLel4gI3W5"},{"type":"block","kind":"notebook-code","data":{"jupyter":{"source_hidden":true},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"df = pd.DataFrame({\n    \"Datacube name\": ['CMEMS', 'CMEMS', 'CMEMS', 'CMEMS', 'CMEMS'],\n    \"Variable description\": [\n        '<a href=\"https://data.marine.copernicus.eu/product/OCEANCOLOUR_MED_BGC_L4_MY_009_144/description\">CHL</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/MULTIOBS_GLO_PHY_S_SURFACE_MYNRT_015_013/description\">SOS</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/SEALEVEL_EUR_PHY_L4_MY_008_068/description\">SLA</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/SST_MED_SST_L4_REP_OBSERVATIONS_010_021/description\">SST</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/WIND_GLO_PHY_CLIMATE_L4_MY_012_003/description\">Wind</a>',\n    ],\n    \"Data access\": [\n        '<a href=\"https://data.marine.copernicus.eu/product/OCEANCOLOUR_MED_BGC_L4_MY_009_144/services\">source</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/MULTIOBS_GLO_PHY_S_SURFACE_MYNRT_015_013/services\">source</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/SEALEVEL_EUR_PHY_L4_MY_008_068/services\">source</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/SST_MED_SST_L4_REP_OBSERVATIONS_010_021/services\">source</a>',\n        '<a href=\"https://data.marine.copernicus.eu/product/WIND_GLO_PHY_CLIMATE_L4_MY_012_003/services\">source</a>',\n    ],\n    \"Temporal extent\": ['Multi-year', 'Multi-year', 'Multi-year', 'Multi-year', 'Multi-year'],\n    \"Temporal resolution\": ['Daily,Monthly', 'Daily,Monthly', 'Daily,Monthly', 'Daily', 'Monthly'],\n    \"Spatial extent\": ['Mediterranean Sea','Global','Global','Mediterranean Sea','Global'],\n    \"Spatial resolution\": ['1 × 1 km','0.125° × 0.125°','0.0625° × 0.0625°','0.05° × 0.05°','0.25° × 0.25°'],\n})\n\ndisplay(HTML(df.to_html(escape=False, index=False)))","visibility":"show","key":"dhuScCEvJ7"},{"type":"output","id":"UZRUbl6Kj5naJxkixZxOW","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th>Datacube name</th>\n      <th>Variable description</th>\n      <th>Data access</th>\n      <th>Temporal extent</th>\n      <th>Temporal resolution</th>\n      <th>Spatial extent</th>\n      <th>Spatial resolution</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>CMEMS</td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/OCEANCOLOUR_MED_BGC_L4_MY_009_144/description\">CHL</a></td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/OCEANCOLOUR_MED_BGC_L4_MY_009_144/services\">source</a></td>\n      <td>Multi-year</td>\n      <td>Daily,Monthly</td>\n      <td>Mediterranean Sea</td>\n      <td>1 × 1 km</td>\n    </tr>\n    <tr>\n      <td>CMEMS</td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/MULTIOBS_GLO_PHY_S_SURFACE_MYNRT_015_013/description\">SOS</a></td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/MULTIOBS_GLO_PHY_S_SURFACE_MYNRT_015_013/services\">source</a></td>\n      <td>Multi-year</td>\n      <td>Daily,Monthly</td>\n      <td>Global</td>\n      <td>0.125° × 0.125°</td>\n    </tr>\n    <tr>\n      <td>CMEMS</td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/SEALEVEL_EUR_PHY_L4_MY_008_068/description\">SLA</a></td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/SEALEVEL_EUR_PHY_L4_MY_008_068/services\">source</a></td>\n      <td>Multi-year</td>\n      <td>Daily,Monthly</td>\n      <td>Global</td>\n      <td>0.0625° × 0.0625°</td>\n    </tr>\n    <tr>\n      <td>CMEMS</td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/SST_MED_SST_L4_REP_OBSERVATIONS_010_021/description\">SST</a></td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/SST_MED_SST_L4_REP_OBSERVATIONS_010_021/services\">source</a></td>\n      <td>Multi-year</td>\n      <td>Daily</td>\n      <td>Mediterranean Sea</td>\n      <td>0.05° × 0.05°</td>\n    </tr>\n    <tr>\n      <td>CMEMS</td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/WIND_GLO_PHY_CLIMATE_L4_MY_012_003/description\">Wind</a></td>\n      <td><a href=\"https://data.marine.copernicus.eu/product/WIND_GLO_PHY_CLIMATE_L4_MY_012_003/services\">source</a></td>\n      <td>Multi-year</td>\n      <td>Monthly</td>\n      <td>Global</td>\n      <td>0.25° × 0.25°</td>\n    </tr>\n  </tbody>\n</table>","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}}],"visibility":"show","key":"t7SKpvTn8R"}],"visibility":"show","key":"HHPOrwpWip"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Copernicus Marine Service data cubes ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oMTG46r8R3"},{"type":"link","url":"https://data.marine.copernicus.eu/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"CMEMS","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"z1cRbnlTMB"}],"urlSource":"https://data.marine.copernicus.eu/","key":"Z2jDtaijY3"},{"type":"text","value":" products have been accessed via xcube plugin from the CMEMS API. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BP7B9VHZtL"},{"type":"break","key":"lHPc3pyGfU"},{"type":"text","value":"Further information on the available data sources on DeepESDL with data access example notebooks can be found ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zu5hHwBYGM"},{"type":"link","url":"https://earthsystemdatalab.net/data/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OqdZ59tfjW"}],"urlSource":"https://earthsystemdatalab.net/data/","key":"h6vIcqeeGe"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"naqPg3TVQE"}],"key":"wBNkhC8RRC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IyRr1YFO7L"}],"urlSource":"#toc","key":"MfPXNeQREV"}],"key":"TK6TcuYEhX"}],"key":"fuSZF7Ezrj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"JfJWwxsZK4"}],"key":"gJQYjiB7An"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Combining input data","key":"sXi1PGQzQi"}],"key":"uSWTgSRfc1"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PZE89XAVMc"}],"identifier":"combining-input-data","label":"Combining input data ","html_id":"combining-input-data","implicit":true,"key":"rNrstUaXR2"}],"key":"rKiMwTb0IR"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Loading and combining CMEMS oceanographic datasets","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xFT5n2BKqY"}],"identifier":"loading-and-combining-cmems-oceanographic-datasets","label":"Loading and combining CMEMS oceanographic datasets","html_id":"loading-and-combining-cmems-oceanographic-datasets","implicit":true,"key":"N1oF0qfjrc"}],"visibility":"show","key":"hJghnGbfAy"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def make_combined_dataset(time_selected = ['1998-01-01', '2023-11-01'], bounds = [-6,30,36.5,46], fill_nan_value = -9999, opt=False):\n    \n    cmems_store = new_data_store(\"cmems\")\n    ds_bgc = cmems_store.open_data('cmems_obs-oc_med_bgc-plankton_my_l4-multi-1km_P1M',\n                               variable_names = ['CHL'],\n                               time_range = time_selected,\n                               bbox = bounds)\n\n    ds_sal = cmems_store.open_data('cmems_obs-mob_glo_phy-sss_my_multi_P1M',\n                               variable_names = ['sos'],\n                               time_range = time_selected,\n                               bbox = bounds)\n\n    ds_ssh = cmems_store.open_data('cmems_obs-sl_eur_phy-ssh_my_allsat-l4-duacs-0.0625deg_P1M-m',\n                               variable_names = ['sla'],\n                               time_range = time_selected,\n                               bbox = bounds)\n\n    ds_sst = cmems_store.open_data('cmems_SST_MED_SST_L4_REP_OBSERVATIONS_010_021',\n                               variable_names = ['analysed_sst'],\n                               time_range = time_selected,\n                               bbox = bounds)\n    ds_sst = ds_sst.resample(time=\"MS\").mean()\n\n    ds_wind = cmems_store.open_data('cmems_obs-wind_glo_phy_my_l4_P1M',\n                               variable_names = ['eastward_wind', 'northward_wind', 'eastward_stress', 'northward_stress'],\n                               time_range = time_selected,\n                               bbox = bounds)\n    \n    ds_ssh = ds_ssh.interp(latitude = ds_sal['latitude'], longitude = ds_sal['longitude'])\n    ds_sst = ds_sst.interp(latitude = ds_sal['latitude'], longitude = ds_sal['longitude'])\n    ds_bgc = ds_bgc.interp(latitude = ds_sal['latitude'], longitude = ds_sal['longitude'])\n    ds_wind = ds_wind.interp(latitude = ds_sal['latitude'], longitude = ds_sal['longitude'])\n    \n    if opt:\n        ds_combined = xr.merge([ds_bgc, ds_ssh, ds_sst, ds_wind])\n    else:\n        ds_combined = xr.merge([ds_bgc, ds_ssh, ds_sal, ds_sst, ds_wind])\n    \n    return ds_combined","visibility":"show","key":"D0QWrbUbi5"},{"type":"output","id":"17-pAoJCxE8MM5W1DFiRB","data":[],"visibility":"show","key":"mZhhv5wP52"}],"visibility":"show","key":"plZNig7VW5"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Defining input parameters for the combined dataset\ntime_selected = ['1998-01-01', '2023-11-01']\nbounds = [-6,30,36.5,46]\nfill_nan_value = -9999\nopt=True\n\nds_combined = make_combined_dataset(time_selected, bounds, fill_nan_value, opt)\nds_combined_m = ds_combined.where(~ds_combined['CHL'].isnull())","key":"cso1AMM6wT"},{"type":"output","id":"KMH04wckjJNmqmSFCzrBT","data":[{"name":"stderr","output_type":"stream","text":"INFO - 2025-11-13T21:53:44Z - Selected dataset version: \"202311\"\nINFO - 2025-11-13T21:53:44Z - Selected dataset part: \"default\"\nWARNING - 2025-11-13T21:53:45Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.005064010620117, 45.994937896728516]\nWARNING - 2025-11-13T21:53:45Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-5.9935760498046875, 36.49357604980469]\nWARNING - 2025-11-13T21:53:45Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.005064010620117, 45.994937896728516]\nWARNING - 2025-11-13T21:53:45Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-5.9935760498046875, 36.49357604980469]\nINFO - 2025-11-13T21:53:46Z - Selected dataset version: \"202311\"\nINFO - 2025-11-13T21:53:46Z - Selected dataset part: \"default\"\nINFO - 2025-11-13T21:53:47Z - Selected dataset version: \"202411\"\nINFO - 2025-11-13T21:53:47Z - Selected dataset part: \"default\"\nINFO - 2025-11-13T21:53:48Z - Selected dataset version: \"202411\"\nINFO - 2025-11-13T21:53:48Z - Selected dataset part: \"default\"\nWARNING - 2025-11-13T21:53:48Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.125, 46.025001525878906]\nWARNING - 2025-11-13T21:53:48Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-18.125, 36.32500076293945]\nWARNING - 2025-11-13T21:53:48Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.125, 46.025001525878906]\nWARNING - 2025-11-13T21:53:48Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-18.125, 36.32500076293945]\nINFO - 2025-11-13T21:53:50Z - Selected dataset version: \"202411\"\nINFO - 2025-11-13T21:53:50Z - Selected dataset part: \"default\"\n"}],"key":"BKgtRgmj2a"}],"key":"chWiMaN7bA"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kZSHJi9B6J"}],"urlSource":"#toc","key":"Fb0LHQCxWm"}],"key":"W4u2YsrfWD"}],"key":"QI4OscvdcO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"RSYkdWY7qw"}],"key":"O2C4jrlUZh"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Visualizing input data","key":"d59PAUXZkr"}],"key":"d2rxdIEBNI"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uaBnIyaMAF"}],"identifier":"visualizing-input-data","label":"Visualizing input data ","html_id":"visualizing-input-data","implicit":true,"key":"vInBTNEbVV"}],"key":"ck3EhEDFzB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizing oceanographic input variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kOUGqnL42u"}],"identifier":"visualizing-oceanographic-input-variables","label":"Visualizing oceanographic input variables","html_id":"visualizing-oceanographic-input-variables","implicit":true,"key":"MPeq6tJznA"}],"key":"rmsEhmF0Q0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def plot_geo_input(\n    ax, lon, lat, data,\n    *,\n    projection=ccrs.PlateCarree(),\n    cmap=\"viridis\",\n    shading=\"auto\",\n    add_gridlines=True,\n    gridlines_kwargs=None,\n    coastline_kwargs=None,\n    colorbar=True,\n    cbar_label=\"\",\n    title=\"\",\n    vmin=None,\n    vmax=None,\n):\n    \n    # colormesh plot\n    pcm = ax.pcolormesh(\n        lon,\n        lat,\n        data,\n        transform=projection,\n        cmap=cmap,\n        shading=shading,\n        vmin=vmin,\n        vmax=vmax,\n    )\n\n    # coastlines\n    if coastline_kwargs is None:\n        ax.add_feature(cfeature.LAND)\n        ax.add_feature(cfeature.RIVERS)\n        ax.add_feature(cfeature.LAKES)\n        ax.coastlines()\n    else: \n        extra = coastline_kwargs.get(\"extra_features\", [])\n        for item in extra:\n            if isinstance(item, tuple):\n                feature, feat_kwargs = item\n            else:\n                feature, feat_kwargs = item, {}\n            ax.add_feature(feature, **feat_kwargs)\n            ax.coastlines(linewidth=0.7)\n\n    # gridlines\n    if add_gridlines:\n        if gridlines_kwargs is None:\n            gridlines_kwargs = dict(draw_labels=True, linestyle=\"--\", linewidth=0.5)\n        gl = ax.gridlines(crs=projection, **gridlines_kwargs)\n        gl.top_labels = False\n        gl.right_labels = False\n\n    # colorbar\n    cbar = None\n    if colorbar:\n        cbar = plt.colorbar(pcm, ax=ax, orientation=\"horizontal\", pad=0.1, aspect=50)\n        if cbar_label:\n            cbar.set_label(cbar_label)\n\n    # title\n    if title:\n        dt_ = datetime.strptime(title, \"%Y-%m-%d\")\n        ax.set_title(dt_.strftime(\"%B - %Y\"), weight='bold')\n\n    return pcm, cbar","visibility":"show","key":"wCex0Kqr6V"},{"type":"output","id":"9gL9Ycpj6M4kw1MAuGafu","data":[],"visibility":"show","key":"DtW7dKQ1yT"}],"visibility":"show","key":"HFS2FvNvuM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# --- Inputs ---\nlon_ = ds_combined.longitude\nlat_ = ds_combined.latitude\ntime_1 = '2000-01-01' # January\ntime_2 = '2000-08-01' # August","key":"KNnsga8bB6"},{"type":"output","id":"iXYYRqLiigvMwClpAUTcB","data":[],"key":"n4GAVrGbRz"}],"key":"m3XHoINdMS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Chlorophyll-a concentrations","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ft1jZj5nbm"}],"identifier":"chlorophyll-a-concentrations","label":"Chlorophyll-a concentrations","html_id":"chlorophyll-a-concentrations","implicit":true,"key":"Y8CKgOrZZO"}],"key":"IHPwe9nIs3"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(15, 8),subplot_kw=dict(projection=ccrs.Mercator()))\n\n# Inputs\nvar_ = ds_combined['CHL']\nvmax = .5\ncbar_label = r\"Concentration of Chlorophyll-a [$\\mathrm{mg}\\,\\cdot\\,\\mathrm{m}^{-3}$]\"\n# ---\n\nplot_geo_input(axes[0],lon_, lat_,var_.sel(time=time_1), title=time_1,cbar_label=cbar_label,vmax=vmax)\nplot_geo_input(axes[1],lon_, lat_,var_.sel(time=time_2), title=time_2,cbar_label=cbar_label,vmax=vmax)\n\nplt.savefig('Chl-a_concentrations.png', dpi=300, bbox_inches=\"tight\")\nplt.show()","visibility":"show","key":"NpYs6qebis"},{"type":"output","id":"_Ehrphb5p7rfCxqja4X-Q","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"acc0f55d084b42e81e0b7a0c290f8652","path":"/eodashboard-notebooks/build/acc0f55d084b42e81e0b7a0c290f8652.png"},"text/plain":{"content":"<Figure size 1500x800 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"T6isY5IWYa"}],"visibility":"show","key":"BNkDOh6aM2"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sea Surface Height (SSH)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Rh33RDRkEg"}],"identifier":"sea-surface-height-ssh","label":"Sea Surface Height (SSH)","html_id":"sea-surface-height-ssh","implicit":true,"key":"dQrC5q6sRT"}],"key":"teKtg82iXZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(15, 8),subplot_kw=dict(projection=ccrs.Mercator()))\n\n# Inputs\nvar_ = ds_combined['sla']\nvmin = min(var_.sel(time=time_1).min().compute().item(), var_.sel(time=time_2).min().compute().item())\nvmax = max(var_.sel(time=time_1).max().compute().item(), var_.sel(time=time_2).max().compute().item())\ncmap='magma'\ncbar_label = r\"Sea Surface Height [m]\"\n# ---\n\nplot_geo_input(axes[0],lon_, lat_,var_.sel(time=time_1),cmap=cmap,title=time_1,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\nplot_geo_input(axes[1],lon_, lat_,var_.sel(time=time_2), cmap=cmap,title=time_2,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\n\nplt.savefig('Sea_Surface_Height.png', dpi=300, bbox_inches=\"tight\")\nplt.show()","visibility":"show","key":"IxU0TaX3gJ"},{"type":"output","id":"AFZ-Bb4gAnAjw651GujB_","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ea6f917654993a2d25e2a2032a7aa1d2","path":"/eodashboard-notebooks/build/ea6f917654993a2d25e2a2032a7aa1d2.png"},"text/plain":{"content":"<Figure size 1500x800 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Ol7RrGAvHm"}],"visibility":"show","key":"Dtf3S5uBoW"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sea Surface Temperature (SST)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aDYRcejXRB"}],"identifier":"sea-surface-temperature-sst","label":"Sea Surface Temperature (SST)","html_id":"sea-surface-temperature-sst","implicit":true,"key":"yJx3AmQsZs"}],"key":"r473ENhykH"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(15, 8),subplot_kw=dict(projection=ccrs.Mercator()))\n\n# Inputs\nvar_ = ds_combined['analysed_sst']\nvmin = min(var_.sel(time=time_1).min().compute().item(), var_.sel(time=time_2).min().compute().item())\nvmax = max(var_.sel(time=time_1).max().compute().item(), var_.sel(time=time_2).max().compute().item())\ncmap='coolwarm'\ncbar_label = r\"Sea Surface Temperature [K]\"\n# ---\n\nplot_geo_input(axes[0],lon_, lat_,var_.sel(time=time_1),cmap=cmap,title=time_1,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\nplot_geo_input(axes[1],lon_, lat_,var_.sel(time=time_2), cmap=cmap,title=time_2,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\n\nplt.savefig('Sea_Surface_Temperature.png', dpi=300, bbox_inches=\"tight\")\nplt.show()","visibility":"show","key":"npAW2zwUbR"},{"type":"output","id":"-XpEKUUNLJfc1-8unCTxt","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"21cd8b9d533725aed35042bce3bd9a47","path":"/eodashboard-notebooks/build/21cd8b9d533725aed35042bce3bd9a47.png"},"text/plain":{"content":"<Figure size 1500x800 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ffOTIBwegu"}],"visibility":"show","key":"ESgLM6drMc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Eastward Wind component","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nu1sv216YO"}],"identifier":"eastward-wind-component","label":"Eastward Wind component","html_id":"eastward-wind-component","implicit":true,"key":"Sp7TvfV6H3"}],"key":"nEMhBSGcL9"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(15, 8),subplot_kw=dict(projection=ccrs.Mercator()))\n\n# Inputs\nvar_ = ds_combined['eastward_wind']\nfeat_ = {\"extra_features\": [(cfeature.LAND, {\"zorder\": 1}),(cfeature.RIVERS),(cfeature.LAKES)]}\nvmin = min(var_.sel(time=time_1).min().compute().item(), var_.sel(time=time_2).min().compute().item())\nvmax = max(var_.sel(time=time_1).max().compute().item(), var_.sel(time=time_2).max().compute().item())\ncmap='PiYG'\ncbar_label = r\"Eastward wind at 10 m [$\\mathrm{m}\\,\\cdot\\,\\mathrm{s}^{-1}$]\"\n# ---\n\nplot_geo_input(axes[0],lon_, lat_,var_.sel(time=time_1),cmap=cmap,coastline_kwargs=feat_,title=time_1,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\nplot_geo_input(axes[1],lon_, lat_,var_.sel(time=time_2),cmap=cmap,coastline_kwargs=feat_,title=time_2,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\n\nplt.savefig('EastwardWind.png', dpi=300, bbox_inches=\"tight\")\nplt.show()","visibility":"show","key":"oauNUjYXGC"},{"type":"output","id":"kndtkvuOPGz_XDONVN3g5","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9bc08f5cb315bc6b0692c914610ac232","path":"/eodashboard-notebooks/build/9bc08f5cb315bc6b0692c914610ac232.png"},"text/plain":{"content":"<Figure size 1500x800 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"DEezJsDDrs"}],"visibility":"show","key":"ww9Xxln0e9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Northward Wind component","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xTwNRYArax"}],"identifier":"northward-wind-component","label":"Northward Wind component","html_id":"northward-wind-component","implicit":true,"key":"kApGT2TmhJ"}],"key":"UCLznzrvk3"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, figsize=(15, 8),subplot_kw=dict(projection=ccrs.Mercator()))\n\n# Inputs\nvar_ = ds_combined['northward_wind']\nfeat_ = {\"extra_features\": [(cfeature.LAND, {\"zorder\": 1}),(cfeature.RIVERS),(cfeature.LAKES)]}\nvmin = min(var_.sel(time=time_1).min().compute().item(), var_.sel(time=time_2).min().compute().item())\nvmax = max(var_.sel(time=time_1).max().compute().item(), var_.sel(time=time_2).max().compute().item())\ncmap='PiYG'\ncbar_label = r\"Northward wind at 10 m [$\\mathrm{m}\\,\\cdot\\,\\mathrm{s}^{-1}$]\"\n# ---\n\nplot_geo_input(axes[0],lon_, lat_,var_.sel(time=time_1),cmap=cmap,coastline_kwargs=feat_,title=time_1,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\nplot_geo_input(axes[1],lon_, lat_,var_.sel(time=time_2),cmap=cmap,coastline_kwargs=feat_,title=time_2,cbar_label=cbar_label,vmin=vmin,vmax=vmax)\n\nplt.savefig('NorthwardWind.png', dpi=300, bbox_inches=\"tight\")\nplt.show()","visibility":"show","key":"mdk8mp09xY"},{"type":"output","id":"eikzYEZ8XRhBoM9LHPegg","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3444e72cf2a73d28f4abe960931406ec","path":"/eodashboard-notebooks/build/3444e72cf2a73d28f4abe960931406ec.png"},"text/plain":{"content":"<Figure size 1500x800 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"SZ80t0vJH0"}],"visibility":"show","key":"JNIFlidorM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bAVDLSXT2h"}],"urlSource":"#toc","key":"Vf31TPtE6o"}],"key":"hUWs6rPzZ2"}],"key":"ZVVVfC9r5P"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"qpB4qC09mK"}],"key":"dFyrcLVgIZ"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Analysis","key":"usBqHDeTWy"}],"key":"dkdsgjb806"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"omuRex0icy"}],"identifier":"analysis","label":"Analysis ","html_id":"analysis","implicit":true,"key":"Q0XTUl8kSy"}],"visibility":"show","key":"IbBuy6PhF5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"U8LWqWkvoY"}],"key":"E9m19hGrJn"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Utility functions","key":"HTo2fi1D6Y"}],"key":"k4rabNDEVO"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sFG70reD11"}],"identifier":"utility-functions","label":"Utility functions ","html_id":"utility-functions","implicit":true,"key":"Gbk2NuXlOy"}],"key":"JXAgEcKHvW"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Normalizing input variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gizII6XCnB"}],"identifier":"normalizing-input-variables","label":"Normalizing input variables","html_id":"normalizing-input-variables","implicit":true,"key":"pcsI1qpdvE"}],"key":"UUSl4MkORA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def normalise(variable_array):\n    \n    scaler = StandardScaler()\n    scaler.fit(variable_array)\n    norm_data = scaler.transform(variable_array)\n    \n    return norm_data","visibility":"show","key":"ySPr9Ut8Rk"},{"type":"output","id":"Fr99RJF5XycTfC5HgwVJB","data":[],"visibility":"show","key":"qsT5ZTmNrR"}],"visibility":"show","key":"D6ruICZ9ev"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extracting and normalizing monthly oceanographic variable","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MJ5bOAUQQY"}],"identifier":"extracting-and-normalizing-monthly-oceanographic-variable","label":"Extracting and normalizing monthly oceanographic variable","html_id":"extracting-and-normalizing-monthly-oceanographic-variable","implicit":true,"key":"xXoDXv7olE"}],"visibility":"show","key":"SJY07XJyvP"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def get_month_variables(ds_combined, mth, fill_nan_value = -9999):\n    \n    #ds_combined= ds_combined.sel(depth=0)\n    ds_months = ds_combined.groupby('time.month').mean()\n    ds_m = ds_months.sel(month=mth)\n    ds_vars = [i for i in ds_months.data_vars] \n\n    for i,var in enumerate(ds_vars):\n        var_2d = ds_m[f'{var}'].values\n        var_2d_n = normalise(var_2d)\n        var_f = var_2d_n[5:-5,5:-5].flatten()\n\n        if i ==0:\n            var_all = var_f\n        else:\n            var_all = np.vstack((var_all, var_f))\n        \n    var_all_t = np.transpose(var_all)\n    var_all_t_mask = np.where(np.isfinite(var_all_t), var_all_t, fill_nan_value)\n    \n    return var_all_t_mask","visibility":"show","key":"yuV1eqg8pO"},{"type":"output","id":"lT32wd58bZcgsylrPn72A","data":[],"visibility":"show","key":"X2r1zqh8uz"}],"visibility":"show","key":"mvGrmdu736"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Averaging and normalizing oceanographic variable","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bMY1RbpDRu"}],"identifier":"averaging-and-normalizing-oceanographic-variable","label":"Averaging and normalizing oceanographic variable","html_id":"averaging-and-normalizing-oceanographic-variable","implicit":true,"key":"XPr4wacMFD"}],"visibility":"show","key":"irIot574JT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def get_average_variables(ds_combined, fill_nan_value = -9999, opt = False):\n    \n    if opt:\n        ds_av = ds_combined.groupby('time.day').mean()\n        ds_av = ds_av.sel(day=1)\n    else:\n        ds_combined= ds_combined.sel(depth=0)\n        ds_av = ds_combined.mean()\n        \n    ds_vars = [i for i in ds_av.data_vars] \n\n    for i,var in enumerate(ds_vars):\n        var_2d = ds_av[f'{var}'].values\n        var_2d_n = normalise(var_2d)\n        var_f = var_2d_n[5:-5,5:-5].flatten()\n\n        if i ==0:\n            var_all = var_f\n        else:\n            var_all = np.vstack((var_all, var_f))\n        \n    var_all_t = np.transpose(var_all)\n    var_all_t_mask = np.where(np.isfinite(var_all_t), var_all_t, fill_nan_value)\n    \n    return var_all_t_mask","visibility":"show","key":"n5RnTA6fBj"},{"type":"output","id":"mrmtBsV8GvQgq2Y5Rrw9r","data":[],"visibility":"show","key":"kcaI3lWL52"}],"visibility":"show","key":"hNVhTCHJF7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finding the optimal number of clusters (optimization technique: Elbow Method)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BWihTsC1KE"}],"identifier":"finding-the-optimal-number-of-clusters-optimization-technique-elbow-method","label":"Finding the optimal number of clusters (optimization technique: Elbow Method)","html_id":"finding-the-optimal-number-of-clusters-optimization-technique-elbow-method","implicit":true,"key":"F7NSq7qVHe"}],"key":"PbLsYyh0dB"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def test_number_of_clusters(variables, n_max, random_state):\n    out = []\n    \n    for i in range(3,n_max):\n        kmeans = KMeans(n_clusters=i, random_state=random_state)\n        labels = kmeans.fit_predict(variables)\n        out.append(kmeans.inertia_)\n        \n    plt.plot(np.arange(3, n_max), out)\n    plt.xlabel('Number of clusters')\n    plt.ylabel('Inertia')\n    plt.title('Optimal number of clusters\\nElbow method')\n    \n    return out","visibility":"show","key":"w7ntWGXb4y"},{"type":"output","id":"V9sXod02oWWBXDhBp8Wvt","data":[],"visibility":"show","key":"YlliAIcP7I"}],"visibility":"show","key":"bxaUDkYd32"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Converting cluster assignments to Geo-DataArray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PmIbmDLQg1"}],"identifier":"converting-cluster-assignments-to-geo-dataarray","label":"Converting cluster assignments to Geo-DataArray","html_id":"converting-cluster-assignments-to-geo-dataarray","implicit":true,"key":"TfDMeb9iff"}],"key":"Rqfi4pRej0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def masking_labels(labels):\n\n    cluster_map = labels\n    cluster_map = cluster_map.reshape(len(ds_combined_m.latitude[5:-5]), len(ds_combined_m.longitude[5:-5]))\n    da_clusters = xr.DataArray(\n        cluster_map,\n        coords={\"latitude\": ds_combined_m.latitude[5:-5], \"longitude\": ds_combined_m.longitude[5:-5]},\n        dims=(\"latitude\", \"longitude\")\n    )\n    \n    return da_clusters","visibility":"show","key":"fIAApVVxG2"},{"type":"output","id":"x6rMadYot6kdMqJoRV1Pr","data":[],"visibility":"show","key":"eLrlqRqSaL"}],"visibility":"show","key":"r45N2J1c4U"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Processing seasonal climatology variables by month","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zsIkysIbIx"}],"identifier":"processing-seasonal-climatology-variables-by-month","label":"Processing seasonal climatology variables by month","html_id":"processing-seasonal-climatology-variables-by-month","implicit":true,"key":"omG34G3viV"}],"key":"PwhrfRowk7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def get_month_variables_seasonal_avg(ds_combined_seasonally_all_yrs_avg, mth, fill_nan_value = -9999):\n    \n    ds_combined_seasonally_all_yrs_avg = ds_combined_seasonally_all_yrs_avg.sel(depth=0)\n    ds_months = ds_combined_seasonally_all_yrs_avg\n    ds_m = ds_months.sel(month=mth)\n    ds_vars = [i for i in ds_months.data_vars] \n\n    for i,var in enumerate(ds_vars):\n        \n        var_2d = ds_m[f'{var}'].values\n        var_2d_n = normalise(var_2d)\n        var_f = var_2d_n[5:-5,5:-5].flatten() # remove the border because getting weird edge effects, then flatten\n        \n        if i ==0:\n            var_all = var_f\n        else:\n            var_all = np.vstack((var_all, var_f))\n        \n    var_all_t = np.transpose(var_all)\n    var_all_t_mask = np.where(np.isfinite(var_all_t), var_all_t, fill_nan_value)\n    \n    return var_all_t_mask","visibility":"show","key":"ZHvyksBy4P"},{"type":"output","id":"2NdShLPTg6hn6GJtw4B4D","data":[],"visibility":"show","key":"zzuu9sVHPu"}],"visibility":"show","key":"N8UlG2Z0Jo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Converting Geo-DataArray to csv","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nbSE7hrfNk"}],"identifier":"converting-geo-dataarray-to-csv","label":"Converting Geo-DataArray to csv","html_id":"converting-geo-dataarray-to-csv","implicit":true,"key":"C8XT0CrVN4"}],"key":"ezSIX1chdO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def xarr_to_csv(xarray_name, xarray_ds):\n    df_ = xarray_ds.to_dataframe(name=xarray_name).reset_index()\n    csv_path = f\"{xarray_name}.csv\"\n    df_.to_csv(csv_path, index=False)\n    return csv_path\n\ndef csv_to_xarray(csv_path, xarray_name):\n    df_ = pd.read_csv(csv_path)\n    xarray_ = (df_.set_index([\"latitude\", \"longitude\"]).to_xarray()[xarray_name])\n    return xarray_","visibility":"show","key":"DSWk4a2Kal"},{"type":"output","id":"6ILQkbsq7AsyVIUN980qE","data":[],"visibility":"show","key":"llgMbCxhFK"}],"visibility":"show","key":"K9K5p09Db6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GIuQTXklcM"}],"urlSource":"#toc","key":"w7S2nlBxqV"}],"key":"X1QaLx3DNr"}],"key":"AZptKCQzYt"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"tP5CUzpgFV"}],"key":"XSUvhBLxt7"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"K-means implementation","key":"nEeH1sNyzY"}],"key":"MqojRr99zU"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qRUesmJTsG"}],"identifier":"k-means-implementation","label":"K-means implementation ","html_id":"k-means-implementation","implicit":true,"key":"nTXwLbPSkh"}],"key":"jfI6N2vW1V"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finding the optimal number of clusters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HD0LQIxEvd"}],"identifier":"finding-the-optimal-number-of-clusters","label":"Finding the optimal number of clusters","html_id":"finding-the-optimal-number-of-clusters","implicit":true,"key":"B3tv6ObzpG"}],"key":"ClLQPlJJgQ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"variables_av = get_average_variables(ds_combined_m, fill_nan_value, opt)\nnp.savetxt('variables_all_masked.txt', variables_av)\nvariables_av = np.loadtxt('variables_all_masked.txt')\n\n# Plotting Inertia against the number of clusters to find the optimal value\nmax_clusters = 15 # maximum number of clusters to be tested\nrandom_state = 10 # setting <random state> for results reproducibility\nelbow = test_number_of_clusters(variables_av, max_clusters, random_state)","visibility":"show","key":"zUDDJlycjz"},{"type":"output","id":"VmQFCR1aHi3yB7JboyxTV","data":[{"name":"stderr","output_type":"stream","text":"/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9f51ce903a6d19994a58a116b7e88599","path":"/eodashboard-notebooks/build/9f51ce903a6d19994a58a116b7e88599.png"},"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Jt3qZbByqK"}],"visibility":"show","key":"pt8GMA96ZV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"By looking at the graph, the Elbow point is at 5. However, 8 has been chosen since 5, 6 and 7 clusters led to only two water types (coastal and open).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DVQynZkwJr"}],"key":"lf5SwyWUiU"}],"key":"YcllCwjsIR"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"opt_clusters = 8 # optimal number of clusters \nrandom_state = 10 # setting <random state> for results reproducibility\nkmeans = KMeans(n_clusters=opt_clusters, random_state=random_state) \nlabels = kmeans.fit_predict(variables_av)\n\njoblib.dump(kmeans, 'kmeans.joblib')\njoblib.dump(labels, 'labels.joblib')","visibility":"show","key":"ZqoSm1k5qm"},{"type":"output","id":"kNTz3SuGES6jB4cJOv8K1","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/plain":{"content":"['labels.joblib']","content_type":"text/plain"}}}],"visibility":"show","key":"OnZW5z7lDE"}],"visibility":"show","key":"LdClbVP9vm"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vj7acsjJlH"}],"urlSource":"#toc","key":"tvobpuSixn"}],"key":"Jwq0PgyCZF"}],"key":"rzsf4qS5Bi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"EkvvrlcYlC"}],"key":"tdv9OOuw3V"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Monthly clustering","key":"nThCTEqTye"}],"key":"RsDE3Nqbxy"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xShANmKONs"}],"identifier":"monthly-clustering","label":"Monthly clustering ","html_id":"monthly-clustering","implicit":true,"key":"Om1gCg5RyJ"}],"key":"a4VN9coBdM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extracting monthly variables from the combined dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uXBhLf7SeT"}],"identifier":"extracting-monthly-variables-from-the-combined-dataset","label":"Extracting monthly variables from the combined dataset","html_id":"extracting-monthly-variables-from-the-combined-dataset","implicit":true,"key":"yJ5q80XSo8"}],"key":"N2VemOWgx7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"variables_8 = get_month_variables(ds_combined_m, 8) # August\nvariables_1 = get_month_variables(ds_combined_m, 1) # January","visibility":"show","key":"e3MDLc1Nud"},{"type":"output","id":"fkZT6Fnu57VtkXfGRw-W9","data":[{"name":"stderr","output_type":"stream","text":"/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n"}],"visibility":"show","key":"iXEovQkni3"}],"visibility":"show","key":"aoz0aRhiXv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Applying K-means clustering to monthly variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mSCRkyXqmK"}],"identifier":"applying-k-means-clustering-to-monthly-variables","label":"Applying K-means clustering to monthly variables","html_id":"applying-k-means-clustering-to-monthly-variables","implicit":true,"key":"NJEqeZwUab"}],"key":"RR8MX4x27j"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Loading clusters centroids and labels\nkmeans = joblib.load('kmeans.joblib')\nlabels = joblib.load('labels.joblib')\n\nlabels_8 = kmeans.predict(variables_8)\nlabels_1 = kmeans.predict(variables_1)\n\nda_8 = masking_labels(labels_8)\nda_1 = masking_labels(labels_1)\n\njan = da_1.values\naug = da_8.values","key":"vZh3Ie1gBg"},{"type":"output","id":"HqjctScC_voo1kJQ6nJEe","data":[],"key":"k4vQ1XFaSM"}],"key":"h05vGOKOif"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualization of monthly clusters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Di3a9RPF4s"}],"identifier":"visualization-of-monthly-clusters","label":"Visualization of monthly clusters","html_id":"visualization-of-monthly-clusters","implicit":true,"key":"muuy6pDxsh"}],"key":"cDEepPOqfK"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=(15, 17))\nax = fig.add_subplot(121, projection=ccrs.PlateCarree())\nax.coastlines(zorder=4)\nax.add_feature(cfeature.LAKES, zorder=3)\nax.add_feature(cfeature.RIVERS, zorder=3)\npc = ax.pcolormesh(da_1.longitude,da_1.latitude, da_1, cmap='Accent')\ngl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc, ax=ax, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax.set_title('January', fontsize=16, weight='bold')\n\nax = fig.add_subplot(122, projection=ccrs.PlateCarree())\npc2 = ax.pcolormesh(da_8.longitude,da_8.latitude,da_8, cmap='Accent', zorder=2)\nax.coastlines(zorder=4)\nax.add_feature(cfeature.LAKES, zorder=3)\nax.add_feature(cfeature.RIVERS, zorder=3)\ngl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc2, ax=ax, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax.set_title('August', fontsize=16, weight='bold')\nplt.tight_layout()\nplt.savefig('JanuaryAugust_clustering.png',bbox_inches='tight')\nplt.show()\n\nfig = plt.figure(figsize=(15,6))\nax = plt.axes(projection = ccrs.PlateCarree())\nax.coastlines(zorder=4)\nax.add_feature(cfeature.LAND, zorder=2)\nax.add_feature(cfeature.LAKES, zorder=3)\nax.add_feature(cfeature.RIVERS, zorder=3)\nax.add_feature(cfeature.OCEAN)\npc3 = ax.pcolormesh(da_8.longitude, da_8.latitude, da_8 - da_1, cmap='bwr', zorder=1)\ngl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--', zorder=5)\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\nplt.colorbar(pc3, ax=ax, label = 'Cluster Difference', pad=0.10, shrink=0.8, )\nax.set_title('Cluster differences', fontsize=16, weight='bold')\nplt.tight_layout()\nplt.savefig('JanuaryAugust_ClusterDifferences.png',bbox_inches='tight')\nplt.show()","visibility":"show","key":"vawlk6j6Jm"},{"type":"output","id":"aL8ZEl_DlYU4XxaQKcIDX","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bcf72160332e60beb964ca027c00511b","path":"/eodashboard-notebooks/build/bcf72160332e60beb964ca027c00511b.png"},"text/plain":{"content":"<Figure size 1500x1700 with 4 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c135a217b1504c636c6092d998f51024","path":"/eodashboard-notebooks/build/c135a217b1504c636c6092d998f51024.png"},"text/plain":{"content":"<Figure size 1500x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"EmV0DBd1wN"}],"visibility":"show","key":"yVOSmGGgwd"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aGYL6cJEXw"}],"urlSource":"#toc","key":"NKte6NDndB"}],"key":"RtPZViyU9d"}],"key":"NBXEglz10d"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"","children":[],"urlSource":"","key":"F0tQwg1au7"}],"key":"vKRP65T5i7"},{"type":"span","style":{"color":"DarkCyan"},"children":[{"type":"text","value":"Seasonal clustering","key":"PN1C0GKPDN"}],"key":"amJNNblzOC"},{"type":"text","value":" ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LpjXxRzH3I"}],"identifier":"seasonal-clustering","label":"Seasonal clustering ","html_id":"seasonal-clustering","implicit":true,"key":"rt1TWFO1gv"}],"key":"tpcRiDUq1y"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extracting seasonal variables from the combined dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bDjrerspoU"}],"identifier":"extracting-seasonal-variables-from-the-combined-dataset","label":"Extracting seasonal variables from the combined dataset","html_id":"extracting-seasonal-variables-from-the-combined-dataset","implicit":true,"key":"tJxYxtGQUt"}],"visibility":"show","key":"OKM774XZy8"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Input parameters\ntime_selected = ['1998-01-01', '2023-11-01']\nbounds = [-6,30,36.5,46]\nfill_nan_value = -9999\nopt = False\n\n# Extracting seasonal values from the combined dataset\nds_combined = make_combined_dataset(time_selected, bounds, fill_nan_value, opt)\nds_combined_m = ds_combined.where(~ds_combined['CHL'].isnull())\nds_combined_seasonally = ds_combined_m.resample(time=\"QS-DEC\").mean() \nds_combined_seasonally_all_yrs_avg = ds_combined_seasonally.groupby('time.month').mean()\n\nds_combined_seasonally_all_yrs_avg = ds_combined_seasonally_all_yrs_avg.drop_vars('sos')\n\nvariables_DJF = get_month_variables_seasonal_avg(ds_combined_seasonally_all_yrs_avg, 12)\nvariables_MAM = get_month_variables_seasonal_avg(ds_combined_seasonally_all_yrs_avg, 3)\nvariables_JJA = get_month_variables_seasonal_avg(ds_combined_seasonally_all_yrs_avg, 6)\nvariables_SON = get_month_variables_seasonal_avg(ds_combined_seasonally_all_yrs_avg, 9)","visibility":"show","key":"h8JKKkHrZ7"},{"type":"output","id":"7ynSyD2rF-cywO9TNxvsi","data":[{"name":"stderr","output_type":"stream","text":"INFO - 2025-11-11T14:49:33Z - Selected dataset version: \"202311\"\nINFO - 2025-11-11T14:49:33Z - Selected dataset part: \"default\"\nWARNING - 2025-11-11T14:49:34Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.005064010620117, 45.994937896728516]\nWARNING - 2025-11-11T14:49:34Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-5.9935760498046875, 36.49357604980469]\nWARNING - 2025-11-11T14:49:34Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.005064010620117, 45.994937896728516]\nWARNING - 2025-11-11T14:49:34Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-5.9935760498046875, 36.49357604980469]\nINFO - 2025-11-11T14:49:35Z - Selected dataset version: \"202311\"\nINFO - 2025-11-11T14:49:35Z - Selected dataset part: \"default\"\nINFO - 2025-11-11T14:49:36Z - Selected dataset version: \"202411\"\nINFO - 2025-11-11T14:49:36Z - Selected dataset part: \"default\"\nINFO - 2025-11-11T14:49:37Z - Selected dataset version: \"202411\"\nINFO - 2025-11-11T14:49:37Z - Selected dataset part: \"default\"\nWARNING - 2025-11-11T14:49:37Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.125, 46.025001525878906]\nWARNING - 2025-11-11T14:49:37Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-18.125, 36.32500076293945]\nWARNING - 2025-11-11T14:49:37Z - Some of your subset selection [30, 46] for the latitude dimension exceed the dataset coordinates [30.125, 46.025001525878906]\nWARNING - 2025-11-11T14:49:37Z - Some of your subset selection [-6.0, 36.5] for the longitude dimension exceed the dataset coordinates [-18.125, 36.32500076293945]\nINFO - 2025-11-11T14:49:38Z - Selected dataset version: \"202411\"\nINFO - 2025-11-11T14:49:38Z - Selected dataset part: \"default\"\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1144: RuntimeWarning: invalid value encountered in divide\n  updated_mean = (last_sum + new_sum) / updated_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1149: RuntimeWarning: invalid value encountered in divide\n  T = new_sum / new_sample_count\n/home/conda/users/03ab8823-1758107623-131-deepesdl-xcube-1.11.0/lib/python3.13/site-packages/sklearn/utils/extmath.py:1169: RuntimeWarning: invalid value encountered in divide\n  new_unnormalized_variance -= correction**2 / new_sample_count\n"}],"visibility":"show","key":"ObVcUa9BOR"}],"visibility":"show","key":"By0SQh7lf9"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Applying K-means clustering to seasonal variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k8fJ1yntqm"}],"identifier":"applying-k-means-clustering-to-seasonal-variables","label":"Applying K-means clustering to seasonal variables","html_id":"applying-k-means-clustering-to-seasonal-variables","implicit":true,"key":"TJx5DKDdV7"}],"key":"PlrFEUy6a1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Loading clusters centroids and labels\nkmeans = joblib.load('kmeans.joblib')\nlabels = joblib.load('labels.joblib')\n\n# Clusters prediction\nlabels_DJF = kmeans.predict(variables_DJF)\nlabels_MAM = kmeans.predict(variables_MAM)\nlabels_JJA = kmeans.predict(variables_JJA)\nlabels_SON = kmeans.predict(variables_SON)\n\nda_DJF = masking_labels(labels_DJF)\nda_MAM = masking_labels(labels_MAM)\nda_JJA = masking_labels(labels_JJA)\nda_SON = masking_labels(labels_SON)","visibility":"show","key":"SOnWCavnFb"},{"type":"output","id":"LelgkrJ5pq39RmiSGAQy-","data":[],"visibility":"show","key":"Tn8MFwCfHf"}],"visibility":"show","key":"fgtJFlDxdw"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Dumping to csv\ndjf_path = xarr_to_csv('DJF_clusters', da_DJF)\nmam_path = xarr_to_csv('MAM_clusters', da_MAM)\njja_path = xarr_to_csv('JJA_clusters', da_JJA)\nson_path = xarr_to_csv('SON_clusters', da_SON)","visibility":"show","key":"nwKtIMrTb5"},{"type":"output","id":"1NqZQRL0aDJmwVtK_Lz_A","data":[],"visibility":"show","key":"yeVWlya54L"}],"visibility":"show","key":"CNYtzuL2bF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualization of seasonal clusters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Je0lj7OViD"}],"identifier":"visualization-of-seasonal-clusters","label":"Visualization of seasonal clusters","html_id":"visualization-of-seasonal-clusters","implicit":true,"key":"N1ib6Ri1e8"}],"key":"rrirgukcaB"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Loading seasonal clusters\nda_DJF = csv_to_xarray(djf_path, 'DJF_clusters')\nda_MAM = csv_to_xarray(mam_path, 'MAM_clusters')\nda_JJA = csv_to_xarray(jja_path, 'JJA_clusters')\nda_SON = csv_to_xarray(son_path, 'SON_clusters')\n\n# Plotting\nfig = plt.figure(figsize=(15, 17))\n#fig.suptitle('Seasonal cycle of clusters', y=0.6, fontsize=23)\n\nax = fig.add_subplot(121, projection=ccrs.PlateCarree())\nax.coastlines(zorder=4)\nax.add_feature(cfeature.LAKES, zorder=3)\nax.add_feature(cfeature.RIVERS, zorder=3)\npc = ax.pcolormesh(da_DJF.longitude,da_DJF.latitude, da_DJF, cmap='Accent')\ngl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc, ax=ax, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax.set_title('DJF', fontsize=16, weight='bold')\n\n\nax2 = fig.add_subplot(122, projection=ccrs.PlateCarree())\npc2 = ax2.pcolormesh(da_MAM.longitude,da_MAM.latitude,da_MAM, cmap='Accent', zorder=2)\nax2.coastlines(zorder=4)\nax2.add_feature(cfeature.LAKES, zorder=3)\nax2.add_feature(cfeature.RIVERS, zorder=3)\ngl = ax2.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc2, ax=ax2, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax2.set_title('MAM', fontsize=16, weight='bold')\nplt.tight_layout()\nplt.savefig('Seasonal_clustering_DJF-MAM.png',bbox_inches='tight')\n#plt.show()\n\nfig = plt.figure(figsize=(15, 17))\nax = fig.add_subplot(121, projection=ccrs.PlateCarree())\nax.coastlines(zorder=4)\nax.add_feature(cfeature.LAKES, zorder=3)\nax.add_feature(cfeature.RIVERS, zorder=3)\npc = ax.pcolormesh(da_JJA.longitude,da_JJA.latitude, da_JJA, cmap='Accent')\ngl = ax.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc, ax=ax, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax.set_title('JJA', fontsize=16, weight='bold')\n\nax2 = fig.add_subplot(122, projection=ccrs.PlateCarree())\npc2 = ax2.pcolormesh(da_SON.longitude,da_SON.latitude,da_SON, cmap='Accent', zorder=2)\nax2.coastlines(zorder=4)\nax2.add_feature(cfeature.LAKES, zorder=3)\nax2.add_feature(cfeature.RIVERS, zorder=3)\ngl = ax2.gridlines(crs=ccrs.PlateCarree(), draw_labels=True, linewidth=1, color='k', alpha=0.5, linestyle='--')\ngl.xformatter = LONGITUDE_FORMATTER\ngl.yformatter = LATITUDE_FORMATTER\ncbar = plt.colorbar(pc2, ax=ax2, label='Cluster', pad=0.15, shrink=0.15)\ncbar.set_ticks(np.arange(0,8,1))\nax2.set_title('SON', fontsize=16, weight='bold')\nplt.tight_layout()\nplt.savefig('Seasonal_clustering_JJA-SON.png',bbox_inches='tight')\n\nplt.show()","visibility":"show","key":"HfsV2W3TwU"},{"type":"output","id":"f1AdPeC3RrSIbbSkAD_7k","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0b3f97014424dbb077655fa9ee814a37","path":"/eodashboard-notebooks/build/0b3f97014424dbb077655fa9ee814a37.png"},"text/plain":{"content":"<Figure size 1500x1700 with 4 Axes>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a5eb3b3e601cbe9ab299d0fbcce63c08","path":"/eodashboard-notebooks/build/a5eb3b3e601cbe9ab299d0fbcce63c08.png"},"text/plain":{"content":"<Figure size 1500x1700 with 4 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"EPCuwEZufB"}],"visibility":"show","key":"teqjxJRswf"},{"type":"block","kind":"notebook-content","children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cluster 1 (violet) - Eutrophic Water: - Colder waters - Eastward Winds - Medium Chlorophyll-a content","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tXXSMK0DDr"}],"key":"U09W9hsV3E"}],"key":"s53AjR5cNs"},{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cluster 2 (orange) - Coastal Water: - Very high Chlorophyll-a - Sea Surface Height","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"HQ0QCDu9A9"}],"key":"XpIiL1D8kd"}],"key":"sWw6dqyDKD"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cluster 7 (grey) - Oligotrophic Water: - Warmer waters - Northward wind and wind stress - Low Chlorophyll-a Conten","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rI0YrcqfBs"}],"key":"D4SXCrVLoL"}],"key":"YEzLa42v7o"}],"key":"e6RTHvQKtK"}],"key":"gRrPBlzBUF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Percentage change of seasonal clusters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A7axGgNyTh"}],"identifier":"percentage-change-of-seasonal-clusters","label":"Percentage change of seasonal clusters","html_id":"percentage-change-of-seasonal-clusters","implicit":true,"key":"ZSWzbF7Q6K"}],"key":"sJjRXokpIg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"DJF_1 = sum(sum(da_DJF == 1))\nDJF_2 = sum(sum(da_DJF == 2))\nDJF_7 = sum(sum(da_DJF == 7))\n\nMAM_1 = sum(sum(da_MAM == 1))\nMAM_2 = sum(sum(da_MAM == 2))\nMAM_7 = sum(sum(da_MAM == 7))\n\nJJA_1 = sum(sum(da_JJA == 1))\nJJA_2 = sum(sum(da_JJA == 2))\nJJA_7 = sum(sum(da_JJA == 7))\n\nSON_1 = sum(sum(da_SON == 1))\nSON_2 = sum(sum(da_SON == 2))\nSON_7 = sum(sum(da_SON == 7))","key":"RwPhL6kjEX"},{"type":"output","id":"3zA3X4XvMpJu_CVuafKxM","data":[],"key":"cxDtv7g4yO"}],"key":"QQlVDLc3et"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cluster_1 = [(JJA_1-JJA_1)/JJA_1, (SON_1-JJA_1)/JJA_1, (DJF_1-JJA_1)/JJA_1, (MAM_1-JJA_1)/JJA_1]\ncluster_2 = [(JJA_2-JJA_2)/JJA_2, (SON_2-JJA_2)/JJA_2, (DJF_2-JJA_2)/JJA_2, (MAM_2-JJA_2)/JJA_2]\ncluster_7 = [(JJA_7-JJA_7)/JJA_7, (SON_7-JJA_7)/JJA_7, (DJF_7-JJA_7)/JJA_7, (MAM_7-JJA_7)/JJA_7]","key":"JfIf3MbkQT"},{"type":"output","id":"oqprUdfCRDcU71m-u5axf","data":[],"key":"LfMbTpgWZL"}],"key":"XCPLiam4zS"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plotting results\nfig = plt.figure(figsize = (12,4))\nfig.suptitle('Seasonal cycle of clusters\\nPercentage Change', y=1, fontsize=15)\nplt.plot(cluster_1, label = 'Cluster 1 - Eutrophic Water', color = 'tab:purple')\nplt.plot(cluster_2, label = 'Cluster 2 - Coastal Water', color = 'tab:orange')\nplt.plot(cluster_7, label = 'Cluster 7 - Oligotrophic Water', color = 'tab:gray')\nplt.xticks([0,1,2,3], ['Summer','Autumn','Winter','Spring'])\nplt.ylabel('Percentage Change')\nplt.legend(loc='lower left', fontsize='small')\n\nplt.savefig('SeasonalClusters_percentage-change.png')\nplt.show()","visibility":"show","key":"SjaBmY0H2D"},{"type":"output","id":"dJlZsJdRtc9Q4Fi7A6TED","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"68fc7ceee0ff3b65ca4f202bb3be17e2","path":"/eodashboard-notebooks/build/68fc7ceee0ff3b65ca4f202bb3be17e2.png"},"text/plain":{"content":"<Figure size 1200x400 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"jEtfJsXKtq"}],"visibility":"show","key":"AG7ob1PY48"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"link","url":"#toc","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Back to Table of Contents","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MkXfYCC97l"}],"urlSource":"#toc","key":"kmK1Ao5e0G"}],"key":"eVAK1vdtiS"}],"key":"VYvYfA4gfA"}],"key":"nx6KhKh4XQ"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Exploring Inland Water Bodies with Sentinel-2 data in EDC","url":"/notebooks/inland-water-with-edc","group":"Notebooks"},"next":{"title":"Earth System Science Hub Challenge 3: Time series interpolation techniques for remote sensing - Fran, Denise, Mae","url":"/notebooks/openchallangenotebook-team-5-challenge-3-timeserie","group":"Notebooks"}}},"domain":"http://localhost:3000"}